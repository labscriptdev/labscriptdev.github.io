import{V as O,B as Ne,M as Y,R as Ge,L as Oe,P as ue,T as Ue,a as $e,F as Te,b as Ve,c as je,d as ye}from"./three.module.792bc64d.js";import{X as te}from"./entry.8100cb04.js";const le=new Map,Qe=5,ee=(V,y=!1)=>{if(!le.has(V))le.set(V,1);else{const x=le.get(V);if(typeof x>"u"||x>=Qe)return;le.set(V,x+1)}y?console.error(`%c [enable3d] ${V} `,"background: #222; color: #bada55"):console.warn(`%c [enable3d] ${V} `,"background: #222; color: #bada55")};var we={},me={};Object.defineProperty(me,"__esModule",{value:!0});me.VERSION=void 0;me.VERSION="0.0.5";/**
 * @package      npmjs.com/package/@yandeu/events (events.min.js)
 *
 * @author       Arnout Kazemier (https://github.com/3rd-Eden)
 * @copyright    Copyright (c) 2014 Arnout Kazemier
 * @license      {@link https://github.com/primus/eventemitter3/blob/master/LICENSE|MIT}
 *
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2021 Yannick Deubel; Project Url: https://github.com/yandeu/events
 * @license      {@link https://github.com/yandeu/events/blob/master/LICENSE|MIT}
 */var Ee=te&&te.__spreadArray||function(V,y){for(var x=0,C=y.length,u=V.length;x<C;x++,u++)V[u]=y[x];return V};Object.defineProperty(we,"__esModule",{value:!0});var Ze=we.Events=void 0,Ke=me,Je=function(){function V(y,x,C){C===void 0&&(C=!1),this.fn=y,this.context=x,this.once=C}return V}(),Ie=function(V,y,x,C,u){if(typeof x!="function")throw new TypeError("The listener must be a function");var e=new Je(x,C||V,u);return V._events.has(y)?V._events.get(y).fn?V._events.set(y,[V._events.get(y),e]):V._events.get(y).push(e):(V._events.set(y,e),V._eventsCount++),V},fe=function(V,y){--V._eventsCount===0?V._events=new Map:V._events.delete(y)},Xe=function(){function V(){this._events=new Map,this._eventsCount=0}return Object.defineProperty(V,"VERSION",{get:function(){return Ke.VERSION},enumerable:!1,configurable:!0}),V.prototype.eventNames=function(){return Array.from(this._events.keys())},V.prototype.listeners=function(y){var x=this._events.get(y);if(!x)return[];if(x.fn)return[x.fn];for(var C=0,u=x.length,e=new Array(u);C<u;C++)e[C]=x[C].fn;return e},V.prototype.listenerCount=function(y){var x=this._events.get(y);return x?x.fn?1:x.length:0},V.prototype.emit=function(y){for(var x,C,u=[],e=1;e<arguments.length;e++)u[e-1]=arguments[e];if(!this._events.has(y))return!1;var o=this._events.get(y),n;if(o.fn)return o.once&&this.removeListener(y,o.fn,void 0,!0),(x=o.fn).call.apply(x,Ee([o.context],u)),!0;var s=o.length;for(n=0;n<s;n++)o[n].once&&this.removeListener(y,o[n].fn,void 0,!0),(C=o[n].fn).call.apply(C,Ee([o[n].context],u));return!0},V.prototype.on=function(y,x,C){return Ie(this,y,x,C,!1)},V.prototype.once=function(y,x,C){return Ie(this,y,x,C,!0)},V.prototype.removeListener=function(y,x,C,u){if(!this._events.has(y))return this;if(!x)return fe(this,y),this;var e=this._events.get(y);if(e.fn)e.fn===x&&(!u||e.once)&&(!C||e.context===C)&&fe(this,y);else{for(var o=0,n=[],s=e.length;o<s;o++)(e[o].fn!==x||u&&!e[o].once||C&&e[o].context!==C)&&n.push(e[o]);n.length?this._events.set(y,n.length===1?n[0]:n):fe(this,y)}return this},V.prototype.removeAllListeners=function(y){return y?this._events.delete(y)&&fe(this,y):(this._events=new Map,this._eventsCount=0),this},Object.defineProperty(V.prototype,"off",{get:function(){return this.removeListener},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"addListener",{get:function(){return this.on},enumerable:!1,configurable:!0}),V}();Ze=we.Events=Xe;const ne={BOX:"box",CYLINDER:"cylinder",SPHERE:"sphere",CAPSULE:"capsule",CONE:"cone",HULL:"hull",HACD:"hacd",VHACD:"vhacd",MESH:"mesh",HEIGHTFIELD:"heightfield"},ie={ALL:"all",MANUAL:"manual"},ht=function(){const V=new O,y=new O,x=new Y;return function(C,u,e,o={}){if(o.type=ne.HULL,ve(o),o.fit===ie.MANUAL)return console.warn("cannot use fit: manual with type: hull"),null;const n=Se(C,u),s=new Ammo.btVector3,c=new Ammo.btConvexHullShape;c.setMargin(o.margin),y.addVectors(n.max,n.min).multiplyScalar(.5);let l=0;for(let i=0;i<C.length;i++)l+=C[i].length/3;const f=o.hullMaxVertices||1e5;l>f&&console.warn(`too many vertices for hull shape; sampling ~${f} from ~${l} vertices`);const r=Math.min(1,f/l);for(let i=0;i<C.length;i++){const a=C[i];x.fromArray(u[i]);for(let m=0;m<a.length;m+=3){const p=i===C.length-1&&m===a.length-3;(Math.random()<=r||p)&&(V.set(a[m],a[m+1],a[m+2]).applyMatrix4(x).sub(y),s.setValue(V.x,V.y,V.z),c.addPoint(s,p))}}let t=c;if(c.getNumVertices()>=100){const i=new Ammo.btShapeHull(c);i.buildHull(o.margin),Ammo.destroy(c),t=new Ammo.btConvexHullShape(Ammo.getPointer(i.getVertexPointer()),i.numVertices()),Ammo.destroy(i)}return Ammo.destroy(s),pe(t,o,ge(e,o)),t}}(),mt=function(){const V=new O,y=new O,x=new Y;return function(C,u,e,o,n={}){if(n.type=ne.HACD,ve(n),n.fit===ie.MANUAL)return console.warn("cannot use fit: manual with type: hacd"),[];if(!Ammo.hasOwnProperty("HACD"))return console.warn("HACD unavailable in included build of Ammo.js. Visit https://github.com/mozillareality/ammo.js for the latest version."),[];const s=Se(C,u);ge(o,n);let c=0,l=0;y.addVectors(s.max,s.min).multiplyScalar(.5);for(let S=0;S<C.length;S++)c+=C[S].length/3,e&&e[S]?l+=e[S].length/3:l+=C[S].length/9;const f=new Ammo.HACD;n.hasOwnProperty("compacityWeight")&&f.SetCompacityWeight(n.compacityWeight),n.hasOwnProperty("volumeWeight")&&f.SetVolumeWeight(n.volumeWeight),n.hasOwnProperty("nClusters")&&f.SetNClusters(n.nClusters),n.hasOwnProperty("nVerticesPerCH")&&f.SetNVerticesPerCH(n.nVerticesPerCH),n.hasOwnProperty("concavity")&&f.SetConcavity(n.concavity);const r=Ammo._malloc(c*3*8),t=Ammo._malloc(l*3*4);f.SetPoints(r),f.SetTriangles(t),f.SetNPoints(c),f.SetNTriangles(l);let i=r/8,a=t/4;for(let S=0;S<C.length;S++){const w=C[S];x.fromArray(u[S]);for(let h=0;h<w.length;h+=3)V.set(w[h+0],w[h+1],w[h+2]).applyMatrix4(x).sub(y),Ammo.HEAPF64[i+0]=V.x,Ammo.HEAPF64[i+1]=V.y,Ammo.HEAPF64[i+2]=V.z,i+=3;if(e[S]){const h=e[S];for(let v=0;v<h.length;v++)Ammo.HEAP32[a]=h[v],a++}else for(let h=0;h<w.length/3;h++)Ammo.HEAP32[a]=h,a++}f.Compute(),Ammo._free(r),Ammo._free(t);const m=f.GetNClusters(),p=[];for(let S=0;S<m;S++){const w=new Ammo.btConvexHullShape;w.setMargin(n.margin);const h=f.GetNPointsCH(S),v=f.GetNTrianglesCH(S),d=Ammo._malloc(h*3*8),g=Ammo._malloc(v*3*4);f.GetCH(S,d,g);const M=d/8;for(let A=0;A<h;A++){const T=new Ammo.btVector3,P=Ammo.HEAPF64[M+A*3+0],E=Ammo.HEAPF64[M+A*3+1],I=Ammo.HEAPF64[M+A*3+2];T.setValue(P,E,I),w.addPoint(T,A===h-1),Ammo.destroy(T)}pe(),p.push(w)}return p}}(),vt=function(){const V=new O,y=new O,x=new Y;return function(C,u,e,o,n={}){if(n.type=ne.VHACD,ve(n),n.fit===ie.MANUAL)return console.warn("cannot use fit: manual with type: vhacd"),[];if(!Ammo.hasOwnProperty("VHACD"))return console.warn("VHACD unavailable in included build of Ammo.js. Visit https://github.com/mozillareality/ammo.js for the latest version."),[];const s=Se(C,u);ge(o,n);let c=0,l=0;y.addVectors(s.max,s.min).multiplyScalar(.5);for(let h=0;h<C.length;h++)c+=C[h].length/3,e&&e[h]?l+=e[h].length/3:l+=C[h].length/9;const f=new Ammo.VHACD,r=new Ammo.Parameters;n.hasOwnProperty("resolution")&&r.set_m_resolution(n.resolution),n.hasOwnProperty("depth")&&r.set_m_depth(n.depth),n.hasOwnProperty("concavity")&&r.set_m_concavity(n.concavity),n.hasOwnProperty("planeDownsampling")&&r.set_m_planeDownsampling(n.planeDownsampling),n.hasOwnProperty("convexhullDownsampling")&&r.set_m_convexhullDownsampling(n.convexhullDownsampling),n.hasOwnProperty("alpha")&&r.set_m_alpha(n.alpha),n.hasOwnProperty("beta")&&r.set_m_beta(n.beta),n.hasOwnProperty("gamma")&&r.set_m_gamma(n.gamma),n.hasOwnProperty("pca")&&r.set_m_pca(n.pca),n.hasOwnProperty("mode")&&r.set_m_mode(n.mode),n.hasOwnProperty("maxNumVerticesPerCH")&&r.set_m_maxNumVerticesPerCH(n.maxNumVerticesPerCH),n.hasOwnProperty("minVolumePerCH")&&r.set_m_minVolumePerCH(n.minVolumePerCH),n.hasOwnProperty("convexhullApproximation")&&r.set_m_convexhullApproximation(n.convexhullApproximation),n.hasOwnProperty("oclAcceleration")&&r.set_m_oclAcceleration(n.oclAcceleration);const t=Ammo._malloc(c*3*8+3),i=Ammo._malloc(l*3*4);let a=t/8,m=i/4;for(let h=0;h<C.length;h++){const v=C[h];x.fromArray(u[h]);for(let d=0;d<v.length;d+=3)V.set(v[d+0],v[d+1],v[d+2]).applyMatrix4(x).sub(y),Ammo.HEAPF64[a+0]=V.x,Ammo.HEAPF64[a+1]=V.y,Ammo.HEAPF64[a+2]=V.z,a+=3;if(e[h]){const d=e[h];for(let g=0;g<d.length;g++)Ammo.HEAP32[m]=d[g],m++}else for(let d=0;d<v.length/3;d++)Ammo.HEAP32[m]=d,m++}f.Compute(t,3,c,i,3,l,r),Ammo._free(t),Ammo._free(i);const p=f.GetNConvexHulls(),S=[],w=new Ammo.ConvexHull;for(let h=0;h<p;h++){f.GetConvexHull(h,w);const v=w.get_m_nPoints();w.get_m_points();const d=new Ammo.btConvexHullShape;d.setMargin(n.margin);for(let g=0;g<v;g++){const M=new Ammo.btVector3,A=w.get_m_points(g*3+0),T=w.get_m_points(g*3+1),P=w.get_m_points(g*3+2);M.setValue(A,T,P),d.addPoint(M,g===v-1),Ammo.destroy(M)}pe(),S.push(d)}return Ammo.destroy(w),Ammo.destroy(f),S}}(),pt=function(){const V=new O,y=new O,x=new O,C=new Y;return function(u,e,o,n,s={}){if(s.type=ne.MESH,ve(s),s.fit===ie.MANUAL)return console.warn("cannot use fit: manual with type: mesh"),null;const c=ge(n,s),l=new Ammo.btVector3,f=new Ammo.btVector3,r=new Ammo.btVector3,t=new Ammo.btTriangleMesh(!0,!1);for(let m=0;m<u.length;m++){const p=u[m],S=o[m]?o[m]:null;if(C.fromArray(e[m]),S)for(let w=0;w<S.length;w+=3){const h=S[w]*3,v=S[w+1]*3,d=S[w+2]*3;V.set(p[h],p[h+1],p[h+2]).applyMatrix4(C),y.set(p[v],p[v+1],p[v+2]).applyMatrix4(C),x.set(p[d],p[d+1],p[d+2]).applyMatrix4(C),l.setValue(V.x,V.y,V.z),f.setValue(y.x,y.y,y.z),r.setValue(x.x,x.y,x.z),t.addTriangle(l,f,r,!1)}else for(let w=0;w<p.length;w+=9)V.set(p[w+0],p[w+1],p[w+2]).applyMatrix4(C),y.set(p[w+3],p[w+4],p[w+5]).applyMatrix4(C),x.set(p[w+6],p[w+7],p[w+8]).applyMatrix4(C),l.setValue(V.x,V.y,V.z),f.setValue(y.x,y.y,y.z),r.setValue(x.x,x.y,x.z),t.addTriangle(l,f,r,!1)}const i=new Ammo.btVector3(c.x,c.y,c.z);t.setScaling(i),Ammo.destroy(i);let a;return s.concave?a=new Ammo.btBvhTriangleMeshShape(t,!0,!0):a=new Ammo.btConvexTriangleMeshShape(t,!0),a.resources=[t],Ammo.destroy(l),Ammo.destroy(f),Ammo.destroy(r),pe(),a}}();function ve(V){V.type=V.type||ne.HULL,V.margin=V.hasOwnProperty("margin")?V.margin:.01}const pe=function(V,y,x){},gt=function(){const V=new Y;return function(y,x,C){parseInt(Ge)>=123?V.copy(y.matrixWorld).invert():V.getInverse(y.matrixWorld),new O().setFromMatrixScale(y.matrixWorld),y.traverse(e=>{const o=new Y;e.isMesh&&(x.includeInvisible||e.el&&e.el.object3D.visible||e.visible)&&(e===y?o.identity():(e.updateWorldMatrix(!0),o.multiplyMatrices(V,e.matrixWorld)),C(e.geometry.isBufferGeometry?e.geometry.attributes.position.array:e.geometry.vertices,o.elements,e.geometry.index?e.geometry.index.array:null))})}}(),ge=function(){const V=new Y;return function(y,x={}){const C=new O(1,1,1);return x.fit===ie.ALL&&(V.fromArray(y),C.setFromMatrixScale(V)),C}}();(function(){const V=new O;return function(y,x,C){let u=0,{x:e,y:o,z:n}=C.getCenter(V);return De(y,x,s=>{const c=e-s.x,l=o-s.y,f=n-s.z;u=Math.max(u,c*c+l*l+f*f)}),Math.sqrt(u)}})();const Se=function(V,y){const x=new Ne;let C=1/0,u=1/0,e=1/0,o=-1/0,n=-1/0,s=-1/0;return x.min.set(0,0,0),x.max.set(0,0,0),De(V,y,c=>{c.x<C&&(C=c.x),c.y<u&&(u=c.y),c.z<e&&(e=c.z),c.x>o&&(o=c.x),c.y>n&&(n=c.y),c.z>s&&(s=c.z)}),x.min.set(C,u,e),x.max.set(o,n,s),x},De=function(){const V=new O,y=new Y;return function(x,C,u){for(let e=0;e<x.length;e++){y.fromArray(C[e]);for(let o=0;o<x[e].length;o+=3)V.set(x[e][o],x[e][o+1],x[e][o+2]).applyMatrix4(y),u(V)}}}(),he=0,Ye=1,qe=new O,Re=new Oe,de=new ue,Fe=new O,ce=new Ue;class _e{constructor(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new He,this.unassigned=new He,this.vertices=[]}setFromPoints(y){if(y.length>=4){this.makeEmpty();for(let x=0,C=y.length;x<C;x++)this.vertices.push(new et(y[x]));this.compute()}return this}setFromObject(y){const x=[];return y.updateMatrixWorld(!0),y.traverse(function(C){const u=C.geometry;if(u!==void 0){const e=u.attributes.position;if(e!==void 0)for(let o=0,n=e.count;o<n;o++){const s=new O;s.fromBufferAttribute(e,o).applyMatrix4(C.matrixWorld),x.push(s)}}}),this.setFromPoints(x)}containsPoint(y){const x=this.faces;for(let C=0,u=x.length;C<u;C++)if(x[C].distanceToPoint(y)>this.tolerance)return!1;return!0}intersectRay(y,x){const C=this.faces;let u=-1/0,e=1/0;for(let o=0,n=C.length;o<n;o++){const s=C[o],c=s.distanceToPoint(y.origin),l=s.normal.dot(y.direction);if(c>0&&l>=0)return null;const f=l!==0?-c/l:0;if(!(f<=0)&&(l>0?e=Math.min(f,e):u=Math.max(f,u),u>e))return null}return u!==-1/0?y.at(u,x):y.at(e,x),x}intersectsRay(y){return this.intersectRay(y,qe)!==null}makeEmpty(){return this.faces=[],this.vertices=[],this}addVertexToFace(y,x){return y.face=x,x.outside===null?this.assigned.append(y):this.assigned.insertBefore(x.outside,y),x.outside=y,this}removeVertexFromFace(y,x){return y===x.outside&&(y.next!==null&&y.next.face===x?x.outside=y.next:x.outside=null),this.assigned.remove(y),this}removeAllVerticesFromFace(y){if(y.outside!==null){const x=y.outside;let C=y.outside;for(;C.next!==null&&C.next.face===y;)C=C.next;return this.assigned.removeSubList(x,C),x.prev=C.next=null,y.outside=null,x}}deleteFaceVertices(y,x){const C=this.removeAllVerticesFromFace(y);if(C!==void 0)if(x===void 0)this.unassigned.appendChain(C);else{let u=C;do{const e=u.next;x.distanceToPoint(u.point)>this.tolerance?this.addVertexToFace(u,x):this.unassigned.append(u),u=e}while(u!==null)}return this}resolveUnassignedPoints(y){if(this.unassigned.isEmpty()===!1){let x=this.unassigned.first();do{const C=x.next;let u=this.tolerance,e=null;for(let o=0;o<y.length;o++){const n=y[o];if(n.mark===he){const s=n.distanceToPoint(x.point);if(s>u&&(u=s,e=n),u>1e3*this.tolerance)break}}e!==null&&this.addVertexToFace(x,e),x=C}while(x!==null)}return this}computeExtremes(){const y=new O,x=new O,C=[],u=[];for(let e=0;e<3;e++)C[e]=u[e]=this.vertices[0];y.copy(this.vertices[0].point),x.copy(this.vertices[0].point);for(let e=0,o=this.vertices.length;e<o;e++){const n=this.vertices[e],s=n.point;for(let c=0;c<3;c++)s.getComponent(c)<y.getComponent(c)&&(y.setComponent(c,s.getComponent(c)),C[c]=n);for(let c=0;c<3;c++)s.getComponent(c)>x.getComponent(c)&&(x.setComponent(c,s.getComponent(c)),u[c]=n)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(y.x),Math.abs(x.x))+Math.max(Math.abs(y.y),Math.abs(x.y))+Math.max(Math.abs(y.z),Math.abs(x.z))),{min:C,max:u}}computeInitialHull(){const y=this.vertices,x=this.computeExtremes(),C=x.min,u=x.max;let e=0,o=0;for(let r=0;r<3;r++){const t=u[r].point.getComponent(r)-C[r].point.getComponent(r);t>e&&(e=t,o=r)}const n=C[o],s=u[o];let c,l;e=0,Re.set(n.point,s.point);for(let r=0,t=this.vertices.length;r<t;r++){const i=y[r];if(i!==n&&i!==s){Re.closestPointToPoint(i.point,!0,Fe);const a=Fe.distanceToSquared(i.point);a>e&&(e=a,c=i)}}e=-1,de.setFromCoplanarPoints(n.point,s.point,c.point);for(let r=0,t=this.vertices.length;r<t;r++){const i=y[r];if(i!==n&&i!==s&&i!==c){const a=Math.abs(de.distanceToPoint(i.point));a>e&&(e=a,l=i)}}const f=[];if(de.distanceToPoint(l.point)<0){f.push(Q.create(n,s,c),Q.create(l,s,n),Q.create(l,c,s),Q.create(l,n,c));for(let r=0;r<3;r++){const t=(r+1)%3;f[r+1].getEdge(2).setTwin(f[0].getEdge(t)),f[r+1].getEdge(1).setTwin(f[t+1].getEdge(0))}}else{f.push(Q.create(n,c,s),Q.create(l,n,s),Q.create(l,s,c),Q.create(l,c,n));for(let r=0;r<3;r++){const t=(r+1)%3;f[r+1].getEdge(2).setTwin(f[0].getEdge((3-r)%3)),f[r+1].getEdge(0).setTwin(f[t+1].getEdge(1))}}for(let r=0;r<4;r++)this.faces.push(f[r]);for(let r=0,t=y.length;r<t;r++){const i=y[r];if(i!==n&&i!==s&&i!==c&&i!==l){e=this.tolerance;let a=null;for(let m=0;m<4;m++){const p=this.faces[m].distanceToPoint(i.point);p>e&&(e=p,a=this.faces[m])}a!==null&&this.addVertexToFace(i,a)}}return this}reindexFaces(){const y=[];for(let x=0;x<this.faces.length;x++){const C=this.faces[x];C.mark===he&&y.push(C)}return this.faces=y,this}nextVertexToAdd(){if(this.assigned.isEmpty()===!1){let y,x=0;const C=this.assigned.first().face;let u=C.outside;do{const e=C.distanceToPoint(u.point);e>x&&(x=e,y=u),u=u.next}while(u!==null&&u.face===C);return y}}computeHorizon(y,x,C,u){this.deleteFaceVertices(C),C.mark=Ye;let e;x===null?e=x=C.getEdge(0):e=x.next;do{const o=e.twin,n=o.face;n.mark===he&&(n.distanceToPoint(y)>this.tolerance?this.computeHorizon(y,o,n,u):u.push(e)),e=e.next}while(e!==x);return this}addAdjoiningFace(y,x){const C=Q.create(y,x.tail(),x.head());return this.faces.push(C),C.getEdge(-1).setTwin(x.twin),C.getEdge(0)}addNewFaces(y,x){this.newFaces=[];let C=null,u=null;for(let e=0;e<x.length;e++){const o=x[e],n=this.addAdjoiningFace(y,o);C===null?C=n:n.next.setTwin(u),this.newFaces.push(n.face),u=n}return C.next.setTwin(u),this}addVertexToHull(y){const x=[];return this.unassigned.clear(),this.removeVertexFromFace(y,y.face),this.computeHorizon(y.point,null,y.face,x),this.addNewFaces(y,x),this.resolveUnassignedPoints(this.newFaces),this}cleanup(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}compute(){let y;for(this.computeInitialHull();(y=this.nextVertexToAdd())!==void 0;)this.addVertexToHull(y);return this.reindexFaces(),this.cleanup(),this}}class Q{constructor(){this.normal=new O,this.midpoint=new O,this.area=0,this.constant=0,this.outside=null,this.mark=he,this.edge=null}static create(y,x,C){const u=new Q,e=new xe(y,u),o=new xe(x,u),n=new xe(C,u);return e.next=n.prev=o,o.next=e.prev=n,n.next=o.prev=e,u.edge=e,u.compute()}getEdge(y){let x=this.edge;for(;y>0;)x=x.next,y--;for(;y<0;)x=x.prev,y++;return x}compute(){const y=this.edge.tail(),x=this.edge.head(),C=this.edge.next.head();return ce.set(y.point,x.point,C.point),ce.getNormal(this.normal),ce.getMidpoint(this.midpoint),this.area=ce.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(y){return this.normal.dot(y)-this.constant}}class xe{constructor(y,x){this.vertex=y,this.prev=null,this.next=null,this.twin=null,this.face=x}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const y=this.head(),x=this.tail();return x!==null?x.point.distanceTo(y.point):-1}lengthSquared(){const y=this.head(),x=this.tail();return x!==null?x.point.distanceToSquared(y.point):-1}setTwin(y){return this.twin=y,y.twin=this,this}}class et{constructor(y){this.point=y,this.prev=null,this.next=null,this.face=null}}class He{constructor(){this.head=null,this.tail=null}first(){return this.head}last(){return this.tail}clear(){return this.head=this.tail=null,this}insertBefore(y,x){return x.prev=y.prev,x.next=y,x.prev===null?this.head=x:x.prev.next=x,y.prev=x,this}insertAfter(y,x){return x.prev=y,x.next=y.next,x.next===null?this.tail=x:x.next.prev=x,y.next=x,this}append(y){return this.head===null?this.head=y:this.tail.next=y,y.prev=this.tail,y.next=null,this.tail=y,this}appendChain(y){for(this.head===null?this.head=y:this.tail.next=y,y.prev=this.tail;y.next!==null;)y=y.next;return this.tail=y,this}remove(y){return y.prev===null?this.head=y.next:y.prev.next=y.next,y.next===null?this.tail=y.prev:y.next.prev=y.prev,this}removeSubList(y,x){return y.prev===null?this.head=x.next:y.prev.next=x.next,x.next===null?this.tail=y.prev:x.next.prev=y.prev,this}isEmpty(){return this.head===null}}class tt extends $e{constructor(y=[]){super();const x=[],C=[],e=new _e().setFromPoints(y).faces;for(let o=0;o<e.length;o++){const n=e[o];let s=n.edge;do{const c=s.head().point;x.push(c.x,c.y,c.z),C.push(n.normal.x,n.normal.y,n.normal.z),s=s.next}while(s!==n.edge)}this.setAttribute("position",new Te(x,3)),this.setAttribute("normal",new Te(C,3))}}const Be=V=>{const y=window.THREE&&window.THREE.ConvexGeometry?window.THREE.ConvexGeometry:tt;return new y(V)},X=function(V,y){this.minSizeForBreak=V||1.4,this.smallDelta=y||1e-4,this.tempLine1=new Oe,this.tempPlane1=new ue,this.tempPlane2=new ue,this.tempPlane_Cut=new ue,this.tempCM1=new O,this.tempCM2=new O,this.tempVector3=new O,this.tempVector3_2=new O,this.tempVector3_3=new O,this.tempVector3_P0=new O,this.tempVector3_P1=new O,this.tempVector3_P2=new O,this.tempVector3_N0=new O,this.tempVector3_N1=new O,this.tempVector3_AB=new O,this.tempVector3_CB=new O,this.tempResultObjects={object1:null,object2:null},this.segments=[];for(var x=30*30,C=0;C<x;C++)this.segments[C]=!1};X.prototype={constructor:X,prepareBreakableObject:function(V,y,x,C,u){V.geometry.isBufferGeometry||console.error("THREE.ConvexObjectBreaker.prepareBreakableObject(): Parameter object must have a BufferGeometry."),V.userData.ammoPhysicsData={};var e=V.userData.ammoPhysicsData;e.mass=y,e.velocity=x.clone(),e.angularVelocity=C.clone(),e.breakable=u},subdivideByImpact:function(V,y,x,C,u){var e=[],o=this.tempPlane1,n=this.tempPlane2;this.tempVector3.addVectors(y,x),o.setFromCoplanarPoints(y,V.position,this.tempVector3);var s=u+C,c=this;function l(f,r,t,i){if(Math.random()<i*.05||i>s){e.push(f);return}var a=Math.PI;i===0?(n.normal.copy(o.normal),n.constant=o.constant):i<=C?(a=(t-r)*(.2+.6*Math.random())+r,c.tempVector3_2.copy(V.position).sub(y).applyAxisAngle(x,a).add(y),n.setFromCoplanarPoints(y,c.tempVector3,c.tempVector3_2)):(a=(.5*(i&1)+.2*(2-Math.random()))*Math.PI,c.tempVector3_2.copy(y).sub(f.position).applyAxisAngle(x,a).add(f.position),c.tempVector3_3.copy(x).add(f.position),n.setFromCoplanarPoints(f.position,c.tempVector3_3,c.tempVector3_2)),c.cutByPlane(f,n,c.tempResultObjects);var m=c.tempResultObjects.object1,p=c.tempResultObjects.object2;m&&l(m,r,a,i+1),p&&l(p,a,t,i+1)}return l(V,0,2*Math.PI,0),e},cutByPlane:function(V,y,x){var C=V.geometry,u=C.attributes.position.array,e=C.attributes.normal.array,o=u.length/3,n=o/3,s=C.getIndex();s&&(s=s.array,n=s.length/3);function c(j,re){var _=j*3+re;return s?s[_]:_}for(var l=[],f=[],r=this.smallDelta,t=o*o,i=0;i<t;i++)this.segments[i]=!1;for(var a=this.tempVector3_P0,m=this.tempVector3_P1,p=this.tempVector3_N0,S=this.tempVector3_N1,i=0;i<n-1;i++){var w=c(i,0),h=c(i,1),v=c(i,2);p.set(e[w],e[w]+1,e[w]+2);for(var d=i+1;d<n;d++){var g=c(d,0),M=c(d,1),A=c(d,2);S.set(e[g],e[g]+1,e[g]+2);var T=1-p.dot(S)<r;T&&(w===g||w===M||w===A?h===g||h===M||h===A?(this.segments[w*o+h]=!0,this.segments[h*o+w]=!0):(this.segments[v*o+w]=!0,this.segments[w*o+v]=!0):(h===g||h===M||h===A)&&(this.segments[v*o+h]=!0,this.segments[h*o+v]=!0))}}var P=this.tempPlane_Cut;V.updateMatrix(),X.transformPlaneToLocalSpace(y,V.matrix,P);for(var i=0;i<n;i++)for(var E=c(i,0),I=c(i,1),R=c(i,2),F=0;F<3;F++){var H=F===0?E:F===1?I:R,B=F===0?I:F===1?R:E,D=this.segments[H*o+B];if(!D){this.segments[H*o+B]=!0,this.segments[B*o+H]=!0,a.set(u[3*H],u[3*H+1],u[3*H+2]),m.set(u[3*B],u[3*B+1],u[3*B+2]);var L=0,b=P.distanceToPoint(a);b>r?(L=2,f.push(a.clone())):b<-r?(L=1,l.push(a.clone())):(L=3,l.push(a.clone()),f.push(a.clone()));var k=0,b=P.distanceToPoint(m);if(b>r?(k=2,f.push(m.clone())):b<-r?(k=1,l.push(m.clone())):(k=3,l.push(m.clone()),f.push(m.clone())),L===1&&k===2||L===2&&k===1){this.tempLine1.start.copy(a),this.tempLine1.end.copy(m);var z=new O;if(z=P.intersectLine(this.tempLine1,z),z===void 0)return console.error("Internal error: segment does not intersect plane."),x.segmentedObject1=null,x.segmentedObject2=null,0;l.push(z),f.push(z.clone())}}}var W=V.userData.ammoPhysicsData.mass*.5;this.tempCM1.set(0,0,0);var $=0,G=l.length;if(G>0){for(var i=0;i<G;i++)this.tempCM1.add(l[i]);this.tempCM1.divideScalar(G);for(var i=0;i<G;i++){var N=l[i];N.sub(this.tempCM1),$=Math.max($,N.x,N.y,N.z)}this.tempCM1.add(V.position)}this.tempCM2.set(0,0,0);var U=0,q=f.length;if(q>0){for(var i=0;i<q;i++)this.tempCM2.add(f[i]);this.tempCM2.divideScalar(q);for(var i=0;i<q;i++){var N=f[i];N.sub(this.tempCM2),U=Math.max(U,N.x,N.y,N.z)}this.tempCM2.add(V.position)}var Z=null,K=null,J=0;if(G>4)try{Z=new Ve(Be(l),V.material),Z.position.copy(this.tempCM1),Z.quaternion.copy(V.quaternion),Z.userData=V.userData,this.prepareBreakableObject(Z,W,V.userData.ammoPhysicsData.velocity,V.userData.ammoPhysicsData.angularVelocity,2*$>this.minSizeForBreak),J++}catch(j){ee("Error in ConvexObjectBreaker.ts",!0),ee(j,!0)}if(q>4)try{K=new Ve(Be(f),V.material),K.position.copy(this.tempCM2),K.quaternion.copy(V.quaternion),K.userData=V.userData,this.prepareBreakableObject(K,W,V.userData.ammoPhysicsData.velocity,V.userData.ammoPhysicsData.angularVelocity,2*U>this.minSizeForBreak),J++}catch(j){ee("Error in ConvexObjectBreaker.ts",!0),ee(j,!0)}return x.object1=Z,x.object2=K,J}};X.transformFreeVector=function(V,y){var x=V.x,C=V.y,u=V.z,e=y.elements;return V.x=e[0]*x+e[4]*C+e[8]*u,V.y=e[1]*x+e[5]*C+e[9]*u,V.z=e[2]*x+e[6]*C+e[10]*u,V};X.transformFreeVectorInverse=function(V,y){var x=V.x,C=V.y,u=V.z,e=y.elements;return V.x=e[0]*x+e[1]*C+e[2]*u,V.y=e[4]*x+e[5]*C+e[6]*u,V.z=e[8]*x+e[9]*C+e[10]*u,V};X.transformTiedVectorInverse=function(V,y){var x=V.x,C=V.y,u=V.z,e=y.elements;return V.x=e[0]*x+e[1]*C+e[2]*u-e[12],V.y=e[4]*x+e[5]*C+e[6]*u-e[13],V.z=e[8]*x+e[9]*C+e[10]*u-e[14],V};X.transformPlaneToLocalSpace=function(){var V=new O;return function(x,C,u){u.normal.copy(x.normal),u.constant=x.constant;var e=X.transformTiedVectorInverse(x.coplanarPoint(V),C);X.transformFreeVectorInverse(u.normal,C),u.constant=-e.dot(u.normal)}}();const nt=(()=>{try{if(typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function"){const V=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(V instanceof WebAssembly.Module)return new WebAssembly.Instance(V)instanceof WebAssembly.Instance}}catch(V){V instanceof Error&&console.error(V.message)}return!1})(),Le=(V,y)=>{var x=document.createElement("script");x.onload=()=>{y()},x.onerror=()=>{throw new Error(`failed to load ${V}`)},x.async=!0,x.src=V,document.head.appendChild(x)},dt=(V,y)=>{nt?Le(`${V}/ammo.wasm.js`,()=>y()):Le(`${V}/ammo.js`,()=>y())};function ke(V,y){y.forEach(x=>{Object.getOwnPropertyNames(x.prototype).forEach(C=>{Object.defineProperty(V.prototype,C,Object.getOwnPropertyDescriptor(x.prototype,C)||Object.create(null))})})}/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */class it{constructor(y){this.physics=y}getHitPointWorld(){const y=this._btRayCallback.get_m_hitPointWorld();return{x:y.x(),y:y.y(),z:y.z()}}getHitNormalWorld(){const y=this._btRayCallback.get_m_hitNormalWorld();return{x:y.x(),y:y.y(),z:y.z()}}getCollisionObject(){return Ammo.castObject(this._btRayCallback.get_m_collisionObject(),Ammo.btRigidBody).threeObject}}/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */class rt{constructor(y){this.physics=y}getHitPointsWorld(){const y=this._btRayCallback.get_m_hitPointWorld(),x=[];for(let C=y.size()-1;C>=0;C--){const u=y.at(C);x.push({x:u.x(),y:u.y(),z:u.z()})}return x}getHitPointWorld(){return ee("Use getHitPointsWorld() instead of getHitPointWorld() for the AllHitsRayCaster!"),this.getHitPointsWorld()}getHitNormalsWorld(){const y=this._btRayCallback.get_m_hitNormalWorld(),x=[];for(let C=y.size()-1;C>=0;C--){const u=y.at(C);x.push({x:u.x(),y:u.y(),z:u.z()})}return x}getCollisionObjects(){const y=[],x=this._btRayCallback.get_m_collisionObjects();for(let C=x.size()-1;C>=0;C--){const u=Ammo.castObject(x.at(C),Ammo.btRigidBody);y.push(u.threeObject)}return y}}/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */class be{constructor(y){this.physics=y}setRayFromWorld(y=0,x=0,C=0){this._btRayFrom.setValue(y,x,C)}setRayToWorld(y=0,x=0,C=0){this._btRayTo.setValue(y,x,C)}hasHit(){return this._btRayCallback.hasHit()}rayTest(){typeof this._btRayCallback<"u"&&Ammo.destroy(this._btRayCallback),this._btRayCallback=this.type==="closest"?new Ammo.ClosestRayResultCallback(this._btRayFrom,this._btRayTo):new Ammo.AllHitsRayResultCallback(this._btRayFrom,this._btRayTo),this.physics.physicsWorld.rayTest(this._btRayFrom,this._btRayTo,this._btRayCallback)}destroy(){typeof this._btRayFrom<"u"&&Ammo.destroy(this._btRayFrom),typeof this._btRayTo<"u"&&Ammo.destroy(this._btRayTo),typeof this._btRayCallback<"u"&&Ammo.destroy(this._btRayCallback)}}class st{constructor(y){this.physics=y,this.type="closest",this._btRayFrom=new Ammo.btVector3(0,0,0),this._btRayTo=new Ammo.btVector3(0,0,0)}}class at{constructor(y){this.physics=y,this.type="allHits",this._btRayFrom=new Ammo.btVector3(0,0,0),this._btRayTo=new Ammo.btVector3(0,0,0)}}ke(st,[be,it]);ke(at,[be,rt]);const ot="0.25.3",lt=`Powered by enable3d v${ot}`;console.log(`%c %c %c %c %c ${lt} %c https://enable3d.io/`,"background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none");/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2021 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */document.createElement("canvas");new je;new ye;new ye;new ye;var ft={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(V,y){(function(C,u){V.exports=u()})(te,function(){return function(x){var C={};function u(e){if(C[e])return C[e].exports;var o=C[e]={i:e,l:!1,exports:{}};return x[e].call(o.exports,o,o.exports,u),o.l=!0,o.exports}return u.m=x,u.c=C,u.d=function(e,o,n){u.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:n})},u.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,o){if(o&1&&(e=u(e)),o&8||o&4&&typeof e=="object"&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),o&2&&typeof e!="string")for(var s in e)u.d(n,s,function(c){return e[c]}.bind(null,s));return n},u.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(o,"a",o),o},u.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},u.p="",u(u.s=21)}([function(x,C){var u={};x.exports=u,function(){u._nextId=0,u._seed=0,u._nowStartTime=+new Date,u._warnedOnce={},u._decomp=null,u.extend=function(o,n){var s,c;typeof n=="boolean"?(s=2,c=n):(s=1,c=!0);for(var l=s;l<arguments.length;l++){var f=arguments[l];if(f)for(var r in f)c&&f[r]&&f[r].constructor===Object&&(!o[r]||o[r].constructor===Object)?(o[r]=o[r]||{},u.extend(o[r],c,f[r])):o[r]=f[r]}return o},u.clone=function(o,n){return u.extend({},n,o)},u.keys=function(o){if(Object.keys)return Object.keys(o);var n=[];for(var s in o)n.push(s);return n},u.values=function(o){var n=[];if(Object.keys){for(var s=Object.keys(o),c=0;c<s.length;c++)n.push(o[s[c]]);return n}for(var l in o)n.push(o[l]);return n},u.get=function(o,n,s,c){n=n.split(".").slice(s,c);for(var l=0;l<n.length;l+=1)o=o[n[l]];return o},u.set=function(o,n,s,c,l){var f=n.split(".").slice(c,l);return u.get(o,n,0,-1)[f[f.length-1]]=s,s},u.shuffle=function(o){for(var n=o.length-1;n>0;n--){var s=Math.floor(u.random()*(n+1)),c=o[n];o[n]=o[s],o[s]=c}return o},u.choose=function(o){return o[Math.floor(u.random()*o.length)]},u.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},u.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},u.isFunction=function(o){return typeof o=="function"},u.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},u.isString=function(o){return toString.call(o)==="[object String]"},u.clamp=function(o,n,s){return o<n?n:o>s?s:o},u.sign=function(o){return o<0?-1:1},u.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-u._nowStartTime},u.random=function(o,n){return o=typeof o<"u"?o:0,n=typeof n<"u"?n:1,o+e()*(n-o)};var e=function(){return u._seed=(u._seed*9301+49297)%233280,u._seed/233280};u.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},u.logLevel=1,u.log=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.info=function(){console&&u.logLevel>0&&u.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warn=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");u._warnedOnce[o]||(u.warn(o),u._warnedOnce[o]=!0)},u.deprecated=function(o,n,s){o[n]=u.chain(function(){u.warnOnce("\u{1F505} deprecated \u{1F505}",s)},o[n])},u.nextId=function(){return u._nextId++},u.indexOf=function(o,n){if(o.indexOf)return o.indexOf(n);for(var s=0;s<o.length;s++)if(o[s]===n)return s;return-1},u.map=function(o,n){if(o.map)return o.map(n);for(var s=[],c=0;c<o.length;c+=1)s.push(n(o[c]));return s},u.topologicalSort=function(o){var n=[],s=[],c=[];for(var l in o)!s[l]&&!c[l]&&u._topologicalSort(l,s,c,o,n);return n},u._topologicalSort=function(o,n,s,c,l){var f=c[o]||[];s[o]=!0;for(var r=0;r<f.length;r+=1){var t=f[r];s[t]||n[t]||u._topologicalSort(t,n,s,c,l)}s[o]=!1,n[o]=!0,l.push(o)},u.chain=function(){for(var o=[],n=0;n<arguments.length;n+=1){var s=arguments[n];s._chained?o.push.apply(o,s._chained):o.push(s)}var c=function(){for(var l,f=new Array(arguments.length),r=0,t=arguments.length;r<t;r++)f[r]=arguments[r];for(r=0;r<o.length;r+=1){var i=o[r].apply(l,f);typeof i<"u"&&(l=i)}return l};return c._chained=o,c},u.chainPathBefore=function(o,n,s){return u.set(o,n,u.chain(s,u.get(o,n)))},u.chainPathAfter=function(o,n,s){return u.set(o,n,u.chain(u.get(o,n),s))},u.setDecomp=function(o){u._decomp=o},u.getDecomp=function(){var o=u._decomp;try{!o&&typeof window<"u"&&(o=window.decomp),!o&&typeof te<"u"&&(o=te.decomp)}catch{o=null}return o}}()},function(x,C){var u={};x.exports=u,function(){u.create=function(e){var o={min:{x:0,y:0},max:{x:0,y:0}};return e&&u.update(o,e),o},u.update=function(e,o,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var s=0;s<o.length;s++){var c=o[s];c.x>e.max.x&&(e.max.x=c.x),c.x<e.min.x&&(e.min.x=c.x),c.y>e.max.y&&(e.max.y=c.y),c.y<e.min.y&&(e.min.y=c.y)}n&&(n.x>0?e.max.x+=n.x:e.min.x+=n.x,n.y>0?e.max.y+=n.y:e.min.y+=n.y)},u.contains=function(e,o){return o.x>=e.min.x&&o.x<=e.max.x&&o.y>=e.min.y&&o.y<=e.max.y},u.overlaps=function(e,o){return e.min.x<=o.max.x&&e.max.x>=o.min.x&&e.max.y>=o.min.y&&e.min.y<=o.max.y},u.translate=function(e,o){e.min.x+=o.x,e.max.x+=o.x,e.min.y+=o.y,e.max.y+=o.y},u.shift=function(e,o){var n=e.max.x-e.min.x,s=e.max.y-e.min.y;e.min.x=o.x,e.max.x=o.x+n,e.min.y=o.y,e.max.y=o.y+s}}()},function(x,C){var u={};x.exports=u,function(){u.create=function(e,o){return{x:e||0,y:o||0}},u.clone=function(e){return{x:e.x,y:e.y}},u.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},u.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},u.rotate=function(e,o,n){var s=Math.cos(o),c=Math.sin(o);n||(n={});var l=e.x*s-e.y*c;return n.y=e.x*c+e.y*s,n.x=l,n},u.rotateAbout=function(e,o,n,s){var c=Math.cos(o),l=Math.sin(o);s||(s={});var f=n.x+((e.x-n.x)*c-(e.y-n.y)*l);return s.y=n.y+((e.x-n.x)*l+(e.y-n.y)*c),s.x=f,s},u.normalise=function(e){var o=u.magnitude(e);return o===0?{x:0,y:0}:{x:e.x/o,y:e.y/o}},u.dot=function(e,o){return e.x*o.x+e.y*o.y},u.cross=function(e,o){return e.x*o.y-e.y*o.x},u.cross3=function(e,o,n){return(o.x-e.x)*(n.y-e.y)-(o.y-e.y)*(n.x-e.x)},u.add=function(e,o,n){return n||(n={}),n.x=e.x+o.x,n.y=e.y+o.y,n},u.sub=function(e,o,n){return n||(n={}),n.x=e.x-o.x,n.y=e.y-o.y,n},u.mult=function(e,o){return{x:e.x*o,y:e.y*o}},u.div=function(e,o){return{x:e.x/o,y:e.y/o}},u.perp=function(e,o){return o=o===!0?-1:1,{x:o*-e.y,y:o*e.x}},u.neg=function(e){return{x:-e.x,y:-e.y}},u.angle=function(e,o){return Math.atan2(o.y-e.y,o.x-e.x)},u._temp=[u.create(),u.create(),u.create(),u.create(),u.create(),u.create()]}()},function(x,C,u){var e={};x.exports=e;var o=u(2),n=u(0);(function(){e.create=function(s,c){for(var l=[],f=0;f<s.length;f++){var r=s[f],t={x:r.x,y:r.y,index:f,body:c,isInternal:!1};l.push(t)}return l},e.fromPath=function(s,c){var l=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return s.replace(l,function(r,t,i){f.push({x:parseFloat(t),y:parseFloat(i)})}),e.create(f,c)},e.centre=function(s){for(var c=e.area(s,!0),l={x:0,y:0},f,r,t,i=0;i<s.length;i++)t=(i+1)%s.length,f=o.cross(s[i],s[t]),r=o.mult(o.add(s[i],s[t]),f),l=o.add(l,r);return o.div(l,6*c)},e.mean=function(s){for(var c={x:0,y:0},l=0;l<s.length;l++)c.x+=s[l].x,c.y+=s[l].y;return o.div(c,s.length)},e.area=function(s,c){for(var l=0,f=s.length-1,r=0;r<s.length;r++)l+=(s[f].x-s[r].x)*(s[f].y+s[r].y),f=r;return c?l/2:Math.abs(l)/2},e.inertia=function(s,c){for(var l=0,f=0,r=s,t,i,a=0;a<r.length;a++)i=(a+1)%r.length,t=Math.abs(o.cross(r[i],r[a])),l+=t*(o.dot(r[i],r[i])+o.dot(r[i],r[a])+o.dot(r[a],r[a])),f+=t;return c/6*(l/f)},e.translate=function(s,c,l){l=typeof l<"u"?l:1;var f=s.length,r=c.x*l,t=c.y*l,i;for(i=0;i<f;i++)s[i].x+=r,s[i].y+=t;return s},e.rotate=function(s,c,l){if(c!==0){var f=Math.cos(c),r=Math.sin(c),t=l.x,i=l.y,a=s.length,m,p,S,w;for(w=0;w<a;w++)m=s[w],p=m.x-t,S=m.y-i,m.x=t+(p*f-S*r),m.y=i+(p*r+S*f);return s}},e.contains=function(s,c){for(var l=c.x,f=c.y,r=s.length,t=s[r-1],i,a=0;a<r;a++){if(i=s[a],(l-t.x)*(i.y-t.y)+(f-t.y)*(t.x-i.x)>0)return!1;t=i}return!0},e.scale=function(s,c,l,f){if(c===1&&l===1)return s;f=f||e.centre(s);for(var r,t,i=0;i<s.length;i++)r=s[i],t=o.sub(r,f),s[i].x=f.x+t.x*c,s[i].y=f.y+t.y*l;return s},e.chamfer=function(s,c,l,f,r){typeof c=="number"?c=[c]:c=c||[8],l=typeof l<"u"?l:-1,f=f||2,r=r||14;for(var t=[],i=0;i<s.length;i++){var a=s[i-1>=0?i-1:s.length-1],m=s[i],p=s[(i+1)%s.length],S=c[i<c.length?i:c.length-1];if(S===0){t.push(m);continue}var w=o.normalise({x:m.y-a.y,y:a.x-m.x}),h=o.normalise({x:p.y-m.y,y:m.x-p.x}),v=Math.sqrt(2*Math.pow(S,2)),d=o.mult(n.clone(w),S),g=o.normalise(o.mult(o.add(w,h),.5)),M=o.sub(m,o.mult(g,v)),A=l;l===-1&&(A=Math.pow(S,.32)*1.75),A=n.clamp(A,f,r),A%2===1&&(A+=1);for(var T=Math.acos(o.dot(w,h)),P=T/A,E=0;E<A;E++)t.push(o.add(o.rotate(d,P*E),M))}return t},e.clockwiseSort=function(s){var c=e.mean(s);return s.sort(function(l,f){return o.angle(c,l)-o.angle(c,f)}),s},e.isConvex=function(s){var c=0,l=s.length,f,r,t,i;if(l<3)return null;for(f=0;f<l;f++)if(r=(f+1)%l,t=(f+2)%l,i=(s[r].x-s[f].x)*(s[t].y-s[r].y),i-=(s[r].y-s[f].y)*(s[t].x-s[r].x),i<0?c|=1:i>0&&(c|=2),c===3)return!1;return c!==0?!0:null},e.hull=function(s){var c=[],l=[],f,r;for(s=s.slice(0),s.sort(function(t,i){var a=t.x-i.x;return a!==0?a:t.y-i.y}),r=0;r<s.length;r+=1){for(f=s[r];l.length>=2&&o.cross3(l[l.length-2],l[l.length-1],f)<=0;)l.pop();l.push(f)}for(r=s.length-1;r>=0;r-=1){for(f=s[r];c.length>=2&&o.cross3(c[c.length-2],c[c.length-1],f)<=0;)c.pop();c.push(f)}return c.pop(),l.pop(),c.concat(l)}})()},function(x,C,u){var e={};x.exports=e;var o=u(0);(function(){e.on=function(n,s,c){for(var l=s.split(" "),f,r=0;r<l.length;r++)f=l[r],n.events=n.events||{},n.events[f]=n.events[f]||[],n.events[f].push(c);return c},e.off=function(n,s,c){if(!s){n.events={};return}typeof s=="function"&&(c=s,s=o.keys(n.events).join(" "));for(var l=s.split(" "),f=0;f<l.length;f++){var r=n.events[l[f]],t=[];if(c&&r)for(var i=0;i<r.length;i++)r[i]!==c&&t.push(r[i]);n.events[l[f]]=t}},e.trigger=function(n,s,c){var l,f,r,t,i=n.events;if(i&&o.keys(i).length>0){c||(c={}),l=s.split(" ");for(var a=0;a<l.length;a++)if(f=l[a],r=i[f],r){t=o.clone(c,!1),t.name=f,t.source=n;for(var m=0;m<r.length;m++)r[m].apply(n,[t])}}}})()},function(x,C,u){var e={};x.exports=e;var o=u(4),n=u(0),s=u(1),c=u(6);(function(){e.create=function(l){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},l)},e.setModified=function(l,f,r,t){if(l.isModified=f,f&&l.cache&&(l.cache.allBodies=null,l.cache.allConstraints=null,l.cache.allComposites=null),r&&l.parent&&e.setModified(l.parent,f,r,t),t)for(var i=0;i<l.composites.length;i++){var a=l.composites[i];e.setModified(a,f,r,t)}},e.add=function(l,f){var r=[].concat(f);o.trigger(l,"beforeAdd",{object:f});for(var t=0;t<r.length;t++){var i=r[t];switch(i.type){case"body":if(i.parent!==i){n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(l,i);break;case"constraint":e.addConstraint(l,i);break;case"composite":e.addComposite(l,i);break;case"mouseConstraint":e.addConstraint(l,i.constraint);break}}return o.trigger(l,"afterAdd",{object:f}),l},e.remove=function(l,f,r){var t=[].concat(f);o.trigger(l,"beforeRemove",{object:f});for(var i=0;i<t.length;i++){var a=t[i];switch(a.type){case"body":e.removeBody(l,a,r);break;case"constraint":e.removeConstraint(l,a,r);break;case"composite":e.removeComposite(l,a,r);break;case"mouseConstraint":e.removeConstraint(l,a.constraint);break}}return o.trigger(l,"afterRemove",{object:f}),l},e.addComposite=function(l,f){return l.composites.push(f),f.parent=l,e.setModified(l,!0,!0,!1),l},e.removeComposite=function(l,f,r){var t=n.indexOf(l.composites,f);if(t!==-1&&e.removeCompositeAt(l,t),r)for(var i=0;i<l.composites.length;i++)e.removeComposite(l.composites[i],f,!0);return l},e.removeCompositeAt=function(l,f){return l.composites.splice(f,1),e.setModified(l,!0,!0,!1),l},e.addBody=function(l,f){return l.bodies.push(f),e.setModified(l,!0,!0,!1),l},e.removeBody=function(l,f,r){var t=n.indexOf(l.bodies,f);if(t!==-1&&e.removeBodyAt(l,t),r)for(var i=0;i<l.composites.length;i++)e.removeBody(l.composites[i],f,!0);return l},e.removeBodyAt=function(l,f){return l.bodies.splice(f,1),e.setModified(l,!0,!0,!1),l},e.addConstraint=function(l,f){return l.constraints.push(f),e.setModified(l,!0,!0,!1),l},e.removeConstraint=function(l,f,r){var t=n.indexOf(l.constraints,f);if(t!==-1&&e.removeConstraintAt(l,t),r)for(var i=0;i<l.composites.length;i++)e.removeConstraint(l.composites[i],f,!0);return l},e.removeConstraintAt=function(l,f){return l.constraints.splice(f,1),e.setModified(l,!0,!0,!1),l},e.clear=function(l,f,r){if(r)for(var t=0;t<l.composites.length;t++)e.clear(l.composites[t],f,!0);return f?l.bodies=l.bodies.filter(function(i){return i.isStatic}):l.bodies.length=0,l.constraints.length=0,l.composites.length=0,e.setModified(l,!0,!0,!1),l},e.allBodies=function(l){if(l.cache&&l.cache.allBodies)return l.cache.allBodies;for(var f=[].concat(l.bodies),r=0;r<l.composites.length;r++)f=f.concat(e.allBodies(l.composites[r]));return l.cache&&(l.cache.allBodies=f),f},e.allConstraints=function(l){if(l.cache&&l.cache.allConstraints)return l.cache.allConstraints;for(var f=[].concat(l.constraints),r=0;r<l.composites.length;r++)f=f.concat(e.allConstraints(l.composites[r]));return l.cache&&(l.cache.allConstraints=f),f},e.allComposites=function(l){if(l.cache&&l.cache.allComposites)return l.cache.allComposites;for(var f=[].concat(l.composites),r=0;r<l.composites.length;r++)f=f.concat(e.allComposites(l.composites[r]));return l.cache&&(l.cache.allComposites=f),f},e.get=function(l,f,r){var t,i;switch(r){case"body":t=e.allBodies(l);break;case"constraint":t=e.allConstraints(l);break;case"composite":t=e.allComposites(l).concat(l);break}return t?(i=t.filter(function(a){return a.id.toString()===f.toString()}),i.length===0?null:i[0]):null},e.move=function(l,f,r){return e.remove(l,f),e.add(r,f),l},e.rebase=function(l){for(var f=e.allBodies(l).concat(e.allConstraints(l)).concat(e.allComposites(l)),r=0;r<f.length;r++)f[r].id=n.nextId();return l},e.translate=function(l,f,r){for(var t=r?e.allBodies(l):l.bodies,i=0;i<t.length;i++)c.translate(t[i],f);return l},e.rotate=function(l,f,r,t){for(var i=Math.cos(f),a=Math.sin(f),m=t?e.allBodies(l):l.bodies,p=0;p<m.length;p++){var S=m[p],w=S.position.x-r.x,h=S.position.y-r.y;c.setPosition(S,{x:r.x+(w*i-h*a),y:r.y+(w*a+h*i)}),c.rotate(S,f)}return l},e.scale=function(l,f,r,t,i){for(var a=i?e.allBodies(l):l.bodies,m=0;m<a.length;m++){var p=a[m],S=p.position.x-t.x,w=p.position.y-t.y;c.setPosition(p,{x:t.x+S*f,y:t.y+w*r}),c.scale(p,f,r)}return l},e.bounds=function(l){for(var f=e.allBodies(l),r=[],t=0;t<f.length;t+=1){var i=f[t];r.push(i.bounds.min,i.bounds.max)}return s.create(r)}})()},function(x,C,u){var e={};x.exports=e;var o=u(3),n=u(2),s=u(7);u(16);var c=u(0),l=u(1),f=u(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var i={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},a=c.extend(i,t);return r(a,t),a},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var r=function(t,i){i=i||{},e.set(t,{bounds:t.bounds||l.create(t.vertices),positionPrev:t.positionPrev||n.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),o.rotate(t.vertices,t.angle,t.position),f.rotate(t.axes,t.angle),l.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:i.axes||t.axes,area:i.area||t.area,mass:i.mass||t.mass,inertia:i.inertia||t.inertia});var a=t.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),m=t.isStatic?"#555":"#ccc",p=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||a,t.render.strokeStyle=t.render.strokeStyle||m,t.render.lineWidth=t.render.lineWidth||p,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,i,a){var m;typeof i=="string"&&(m=i,i={},i[m]=a);for(m in i)if(!!Object.prototype.hasOwnProperty.call(i,m))switch(a=i[m],m){case"isStatic":e.setStatic(t,a);break;case"isSleeping":s.set(t,a);break;case"mass":e.setMass(t,a);break;case"density":e.setDensity(t,a);break;case"inertia":e.setInertia(t,a);break;case"vertices":e.setVertices(t,a);break;case"position":e.setPosition(t,a);break;case"angle":e.setAngle(t,a);break;case"velocity":e.setVelocity(t,a);break;case"angularVelocity":e.setAngularVelocity(t,a);break;case"parts":e.setParts(t,a);break;case"centre":e.setCentre(t,a);break;default:t[m]=a}},e.setStatic=function(t,i){for(var a=0;a<t.parts.length;a++){var m=t.parts[a];m.isStatic=i,i?(m._original={restitution:m.restitution,friction:m.friction,mass:m.mass,inertia:m.inertia,density:m.density,inverseMass:m.inverseMass,inverseInertia:m.inverseInertia},m.restitution=0,m.friction=1,m.mass=m.inertia=m.density=1/0,m.inverseMass=m.inverseInertia=0,m.positionPrev.x=m.position.x,m.positionPrev.y=m.position.y,m.anglePrev=m.angle,m.angularVelocity=0,m.speed=0,m.angularSpeed=0,m.motion=0):m._original&&(m.restitution=m._original.restitution,m.friction=m._original.friction,m.mass=m._original.mass,m.inertia=m._original.inertia,m.density=m._original.density,m.inverseMass=m._original.inverseMass,m.inverseInertia=m._original.inverseInertia,m._original=null)}},e.setMass=function(t,i){var a=t.inertia/(t.mass/6);t.inertia=a*(i/6),t.inverseInertia=1/t.inertia,t.mass=i,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,i){e.setMass(t,i*t.area),t.density=i},e.setInertia=function(t,i){t.inertia=i,t.inverseInertia=1/t.inertia},e.setVertices=function(t,i){i[0].body===t?t.vertices=i:t.vertices=o.create(i,t),t.axes=f.fromVertices(t.vertices),t.area=o.area(t.vertices),e.setMass(t,t.density*t.area);var a=o.centre(t.vertices);o.translate(t.vertices,a,-1),e.setInertia(t,e._inertiaScale*o.inertia(t.vertices,t.mass)),o.translate(t.vertices,t.position),l.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,i,a){var m;for(i=i.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,m=0;m<i.length;m++){var p=i[m];p!==t&&(p.parent=t,t.parts.push(p))}if(t.parts.length!==1){if(a=typeof a<"u"?a:!0,a){var S=[];for(m=0;m<i.length;m++)S=S.concat(i[m].vertices);o.clockwiseSort(S);var w=o.hull(S),h=o.centre(w);e.setVertices(t,w),o.translate(t.vertices,h)}var v=e._totalProperties(t);t.area=v.area,t.parent=t,t.position.x=v.centre.x,t.position.y=v.centre.y,t.positionPrev.x=v.centre.x,t.positionPrev.y=v.centre.y,e.setMass(t,v.mass),e.setInertia(t,v.inertia),e.setPosition(t,v.centre)}},e.setCentre=function(t,i,a){a?(t.positionPrev.x+=i.x,t.positionPrev.y+=i.y,t.position.x+=i.x,t.position.y+=i.y):(t.positionPrev.x=i.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=i.y-(t.position.y-t.positionPrev.y),t.position.x=i.x,t.position.y=i.y)},e.setPosition=function(t,i){var a=n.sub(i,t.position);t.positionPrev.x+=a.x,t.positionPrev.y+=a.y;for(var m=0;m<t.parts.length;m++){var p=t.parts[m];p.position.x+=a.x,p.position.y+=a.y,o.translate(p.vertices,a),l.update(p.bounds,p.vertices,t.velocity)}},e.setAngle=function(t,i){var a=i-t.angle;t.anglePrev+=a;for(var m=0;m<t.parts.length;m++){var p=t.parts[m];p.angle+=a,o.rotate(p.vertices,a,t.position),f.rotate(p.axes,a),l.update(p.bounds,p.vertices,t.velocity),m>0&&n.rotateAbout(p.position,a,t.position,p.position)}},e.setVelocity=function(t,i){t.positionPrev.x=t.position.x-i.x,t.positionPrev.y=t.position.y-i.y,t.velocity.x=i.x,t.velocity.y=i.y,t.speed=n.magnitude(t.velocity)},e.setAngularVelocity=function(t,i){t.anglePrev=t.angle-i,t.angularVelocity=i,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,i){e.setPosition(t,n.add(t.position,i))},e.rotate=function(t,i,a){if(!a)e.setAngle(t,t.angle+i);else{var m=Math.cos(i),p=Math.sin(i),S=t.position.x-a.x,w=t.position.y-a.y;e.setPosition(t,{x:a.x+(S*m-w*p),y:a.y+(S*p+w*m)}),e.setAngle(t,t.angle+i)}},e.scale=function(t,i,a,m){var p=0,S=0;m=m||t.position;for(var w=0;w<t.parts.length;w++){var h=t.parts[w];o.scale(h.vertices,i,a,m),h.axes=f.fromVertices(h.vertices),h.area=o.area(h.vertices),e.setMass(h,t.density*h.area),o.translate(h.vertices,{x:-h.position.x,y:-h.position.y}),e.setInertia(h,e._inertiaScale*o.inertia(h.vertices,h.mass)),o.translate(h.vertices,{x:h.position.x,y:h.position.y}),w>0&&(p+=h.area,S+=h.inertia),h.position.x=m.x+(h.position.x-m.x)*i,h.position.y=m.y+(h.position.y-m.y)*a,l.update(h.bounds,h.vertices,t.velocity)}t.parts.length>1&&(t.area=p,t.isStatic||(e.setMass(t,t.density*p),e.setInertia(t,S))),t.circleRadius&&(i===a?t.circleRadius*=i:t.circleRadius=null)},e.update=function(t,i,a,m){var p=Math.pow(i*a*t.timeScale,2),S=1-t.frictionAir*a*t.timeScale,w=t.position.x-t.positionPrev.x,h=t.position.y-t.positionPrev.y;t.velocity.x=w*S*m+t.force.x/t.mass*p,t.velocity.y=h*S*m+t.force.y/t.mass*p,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*S*m+t.torque/t.inertia*p,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=n.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var v=0;v<t.parts.length;v++){var d=t.parts[v];o.translate(d.vertices,t.velocity),v>0&&(d.position.x+=t.velocity.x,d.position.y+=t.velocity.y),t.angularVelocity!==0&&(o.rotate(d.vertices,t.angularVelocity,t.position),f.rotate(d.axes,t.angularVelocity),v>0&&n.rotateAbout(d.position,t.angularVelocity,t.position,d.position)),l.update(d.bounds,d.vertices,t.velocity)}},e.applyForce=function(t,i,a){t.force.x+=a.x,t.force.y+=a.y;var m={x:i.x-t.position.x,y:i.y-t.position.y};t.torque+=m.x*a.y-m.y*a.x},e._totalProperties=function(t){for(var i={mass:0,area:0,inertia:0,centre:{x:0,y:0}},a=t.parts.length===1?0:1;a<t.parts.length;a++){var m=t.parts[a],p=m.mass!==1/0?m.mass:1;i.mass+=p,i.area+=m.area,i.inertia+=m.inertia,i.centre=n.add(i.centre,n.mult(m.position,p))}return i.centre=n.div(i.centre,i.mass),i}})()},function(x,C,u){var e={};x.exports=e;var o=u(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(n,s){for(var c=s*s*s,l=0;l<n.length;l++){var f=n[l],r=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){e.set(f,!1);continue}var t=Math.min(f.motion,r),i=Math.max(f.motion,r);f.motion=e._minBias*t+(1-e._minBias)*i,f.sleepThreshold>0&&f.motion<e._motionSleepThreshold*c?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&e.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},e.afterCollisions=function(n,s){for(var c=s*s*s,l=0;l<n.length;l++){var f=n[l];if(!!f.isActive){var r=f.collision,t=r.bodyA.parent,i=r.bodyB.parent;if(!(t.isSleeping&&i.isSleeping||t.isStatic||i.isStatic)&&(t.isSleeping||i.isSleeping)){var a=t.isSleeping&&!t.isStatic?t:i,m=a===t?i:t;!a.isStatic&&m.motion>e._motionWakeThreshold*c&&e.set(a,!1)}}}},e.set=function(n,s){var c=n.isSleeping;s?(n.isSleeping=!0,n.sleepCounter=n.sleepThreshold,n.positionImpulse.x=0,n.positionImpulse.y=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.speed=0,n.angularSpeed=0,n.motion=0,c||o.trigger(n,"sleepStart")):(n.isSleeping=!1,n.sleepCounter=0,c&&o.trigger(n,"sleepEnd"))}})()},function(x,C,u){var e={};x.exports=e;var o=u(3),n=u(9);(function(){var s=[],c={overlap:0,axis:null},l={overlap:0,axis:null};e.create=function(f,r){return{pair:null,collided:!1,bodyA:f,bodyB:r,parentA:f.parent,parentB:r.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(f,r,t){if(e._overlapAxes(c,f.vertices,r.vertices,f.axes),c.overlap<=0||(e._overlapAxes(l,r.vertices,f.vertices,r.axes),l.overlap<=0))return null;var i=t&&t.table[n.id(f,r)],a;i?a=i.collision:(a=e.create(f,r),a.collided=!0,a.bodyA=f.id<r.id?f:r,a.bodyB=f.id<r.id?r:f,a.parentA=a.bodyA.parent,a.parentB=a.bodyB.parent),f=a.bodyA,r=a.bodyB;var m;c.overlap<l.overlap?m=c:m=l;var p=a.normal,S=a.supports,w=m.axis,h=w.x,v=w.y;h*(r.position.x-f.position.x)+v*(r.position.y-f.position.y)<0?(p.x=h,p.y=v):(p.x=-h,p.y=-v),a.tangent.x=-p.y,a.tangent.y=p.x,a.depth=m.overlap,a.penetration.x=p.x*a.depth,a.penetration.y=p.y*a.depth;var d=e._findSupports(f,r,p,1),g=0;if(o.contains(f.vertices,d[0])&&(S[g++]=d[0]),o.contains(f.vertices,d[1])&&(S[g++]=d[1]),g<2){var M=e._findSupports(r,f,p,-1);o.contains(r.vertices,M[0])&&(S[g++]=M[0]),g<2&&o.contains(r.vertices,M[1])&&(S[g++]=M[1])}return g===0&&(S[g++]=d[0]),S.length=g,a},e._overlapAxes=function(f,r,t,i){var a=r.length,m=t.length,p=r[0].x,S=r[0].y,w=t[0].x,h=t[0].y,v=i.length,d=Number.MAX_VALUE,g=0,M,A,T,P,E,I;for(E=0;E<v;E++){var R=i[E],F=R.x,H=R.y,B=p*F+S*H,D=w*F+h*H,L=B,k=D;for(I=1;I<a;I+=1)P=r[I].x*F+r[I].y*H,P>L?L=P:P<B&&(B=P);for(I=1;I<m;I+=1)P=t[I].x*F+t[I].y*H,P>k?k=P:P<D&&(D=P);if(A=L-D,T=k-B,M=A<T?A:T,M<d&&(d=M,g=E,M<=0))break}f.axis=i[g],f.overlap=d},e._projectToAxis=function(f,r,t){for(var i=r[0].x*t.x+r[0].y*t.y,a=i,m=1;m<r.length;m+=1){var p=r[m].x*t.x+r[m].y*t.y;p>a?a=p:p<i&&(i=p)}f.min=i,f.max=a},e._findSupports=function(f,r,t,i){var a=r.vertices,m=a.length,p=f.position.x,S=f.position.y,w=t.x*i,h=t.y*i,v=Number.MAX_VALUE,d,g,M,A,T;for(T=0;T<m;T+=1)g=a[T],A=w*(p-g.x)+h*(S-g.y),A<v&&(v=A,d=g);return M=a[(m+d.index-1)%m],v=w*(p-M.x)+h*(S-M.y),g=a[(d.index+1)%m],w*(p-g.x)+h*(S-g.y)<v?(s[0]=d,s[1]=g,s):(s[0]=d,s[1]=M,s)}})()},function(x,C,u){var e={};x.exports=e;var o=u(17);(function(){e.create=function(n,s){var c=n.bodyA,l=n.bodyB,f={id:e.id(c,l),bodyA:c,bodyB:l,collision:n,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||l.isSensor,timeCreated:s,timeUpdated:s,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(f,n,s),f},e.update=function(n,s,c){var l=n.contacts,f=s.supports,r=n.activeContacts,t=s.parentA,i=s.parentB,a=t.vertices.length;n.isActive=!0,n.timeUpdated=c,n.collision=s,n.separation=s.depth,n.inverseMass=t.inverseMass+i.inverseMass,n.friction=t.friction<i.friction?t.friction:i.friction,n.frictionStatic=t.frictionStatic>i.frictionStatic?t.frictionStatic:i.frictionStatic,n.restitution=t.restitution>i.restitution?t.restitution:i.restitution,n.slop=t.slop>i.slop?t.slop:i.slop,s.pair=n,r.length=0;for(var m=0;m<f.length;m++){var p=f[m],S=p.body===t?p.index:a+p.index,w=l[S];w?r.push(w):r.push(l[S]=o.create(p))}},e.setActive=function(n,s,c){s?(n.isActive=!0,n.timeUpdated=c):(n.isActive=!1,n.activeContacts.length=0)},e.id=function(n,s){return n.id<s.id?"A"+n.id+"B"+s.id:"A"+s.id+"B"+n.id}})()},function(x,C,u){var e={};x.exports=e;var o=u(3),n=u(2),s=u(7),c=u(1),l=u(11),f=u(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(r){var t=r;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var i=t.bodyA?n.add(t.bodyA.position,t.pointA):t.pointA,a=t.bodyB?n.add(t.bodyB.position,t.pointB):t.pointB,m=n.magnitude(n.sub(i,a));t.length=typeof t.length<"u"?t.length:m,t.id=t.id||f.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var p={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(p.type="pin",p.anchors=!1):t.stiffness<.9&&(p.type="spring"),t.render=f.extend(p,t.render),t},e.preSolveAll=function(r){for(var t=0;t<r.length;t+=1){var i=r[t],a=i.constraintImpulse;i.isStatic||a.x===0&&a.y===0&&a.angle===0||(i.position.x+=a.x,i.position.y+=a.y,i.angle+=a.angle)}},e.solveAll=function(r,t){for(var i=0;i<r.length;i+=1){var a=r[i],m=!a.bodyA||a.bodyA&&a.bodyA.isStatic,p=!a.bodyB||a.bodyB&&a.bodyB.isStatic;(m||p)&&e.solve(r[i],t)}for(i=0;i<r.length;i+=1)a=r[i],m=!a.bodyA||a.bodyA&&a.bodyA.isStatic,p=!a.bodyB||a.bodyB&&a.bodyB.isStatic,!m&&!p&&e.solve(r[i],t)},e.solve=function(r,t){var i=r.bodyA,a=r.bodyB,m=r.pointA,p=r.pointB;if(!(!i&&!a)){i&&!i.isStatic&&(n.rotate(m,i.angle-r.angleA,m),r.angleA=i.angle),a&&!a.isStatic&&(n.rotate(p,a.angle-r.angleB,p),r.angleB=a.angle);var S=m,w=p;if(i&&(S=n.add(i.position,m)),a&&(w=n.add(a.position,p)),!(!S||!w)){var h=n.sub(S,w),v=n.magnitude(h);v<e._minLength&&(v=e._minLength);var d=(v-r.length)/v,g=r.stiffness<1?r.stiffness*t:r.stiffness,M=n.mult(h,d*g),A=(i?i.inverseMass:0)+(a?a.inverseMass:0),T=(i?i.inverseInertia:0)+(a?a.inverseInertia:0),P=A+T,E,I,R,F,H;if(r.damping){var B=n.create();R=n.div(h,v),H=n.sub(a&&n.sub(a.position,a.positionPrev)||B,i&&n.sub(i.position,i.positionPrev)||B),F=n.dot(R,H)}i&&!i.isStatic&&(I=i.inverseMass/A,i.constraintImpulse.x-=M.x*I,i.constraintImpulse.y-=M.y*I,i.position.x-=M.x*I,i.position.y-=M.y*I,r.damping&&(i.positionPrev.x-=r.damping*R.x*F*I,i.positionPrev.y-=r.damping*R.y*F*I),E=n.cross(m,M)/P*e._torqueDampen*i.inverseInertia*(1-r.angularStiffness),i.constraintImpulse.angle-=E,i.angle-=E),a&&!a.isStatic&&(I=a.inverseMass/A,a.constraintImpulse.x+=M.x*I,a.constraintImpulse.y+=M.y*I,a.position.x+=M.x*I,a.position.y+=M.y*I,r.damping&&(a.positionPrev.x+=r.damping*R.x*F*I,a.positionPrev.y+=r.damping*R.y*F*I),E=n.cross(p,M)/P*e._torqueDampen*a.inverseInertia*(1-r.angularStiffness),a.constraintImpulse.angle+=E,a.angle+=E)}}},e.postSolveAll=function(r){for(var t=0;t<r.length;t++){var i=r[t],a=i.constraintImpulse;if(!(i.isStatic||a.x===0&&a.y===0&&a.angle===0)){s.set(i,!1);for(var m=0;m<i.parts.length;m++){var p=i.parts[m];o.translate(p.vertices,a),m>0&&(p.position.x+=a.x,p.position.y+=a.y),a.angle!==0&&(o.rotate(p.vertices,a.angle,i.position),l.rotate(p.axes,a.angle),m>0&&n.rotateAbout(p.position,a.angle,i.position,p.position)),c.update(p.bounds,p.vertices,i.velocity)}a.angle*=e._warming,a.x*=e._warming,a.y*=e._warming}}},e.pointAWorld=function(r){return{x:(r.bodyA?r.bodyA.position.x:0)+r.pointA.x,y:(r.bodyA?r.bodyA.position.y:0)+r.pointA.y}},e.pointBWorld=function(r){return{x:(r.bodyB?r.bodyB.position.x:0)+r.pointB.x,y:(r.bodyB?r.bodyB.position.y:0)+r.pointB.y}}})()},function(x,C,u){var e={};x.exports=e;var o=u(2),n=u(0);(function(){e.fromVertices=function(s){for(var c={},l=0;l<s.length;l++){var f=(l+1)%s.length,r=o.normalise({x:s[f].y-s[l].y,y:s[l].x-s[f].x}),t=r.y===0?1/0:r.x/r.y;t=t.toFixed(3).toString(),c[t]=r}return n.values(c)},e.rotate=function(s,c){if(c!==0)for(var l=Math.cos(c),f=Math.sin(c),r=0;r<s.length;r++){var t=s[r],i;i=t.x*l-t.y*f,t.y=t.x*f+t.y*l,t.x=i}}})()},function(x,C,u){var e={};x.exports=e;var o=u(3),n=u(0),s=u(6),c=u(1),l=u(2);(function(){e.rectangle=function(f,r,t,i,a){a=a||{};var m={label:"Rectangle Body",position:{x:f,y:r},vertices:o.fromPath("L 0 0 L "+t+" 0 L "+t+" "+i+" L 0 "+i)};if(a.chamfer){var p=a.chamfer;m.vertices=o.chamfer(m.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete a.chamfer}return s.create(n.extend({},m,a))},e.trapezoid=function(f,r,t,i,a,m){m=m||{},a*=.5;var p=(1-a*2)*t,S=t*a,w=S+p,h=w+S,v;a<.5?v="L 0 0 L "+S+" "+-i+" L "+w+" "+-i+" L "+h+" 0":v="L 0 0 L "+w+" "+-i+" L "+h+" 0";var d={label:"Trapezoid Body",position:{x:f,y:r},vertices:o.fromPath(v)};if(m.chamfer){var g=m.chamfer;d.vertices=o.chamfer(d.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete m.chamfer}return s.create(n.extend({},d,m))},e.circle=function(f,r,t,i,a){i=i||{};var m={label:"Circle Body",circleRadius:t};a=a||25;var p=Math.ceil(Math.max(10,Math.min(a,t)));return p%2===1&&(p+=1),e.polygon(f,r,p,t,n.extend({},m,i))},e.polygon=function(f,r,t,i,a){if(a=a||{},t<3)return e.circle(f,r,i,a);for(var m=2*Math.PI/t,p="",S=m*.5,w=0;w<t;w+=1){var h=S+w*m,v=Math.cos(h)*i,d=Math.sin(h)*i;p+="L "+v.toFixed(3)+" "+d.toFixed(3)+" "}var g={label:"Polygon Body",position:{x:f,y:r},vertices:o.fromPath(p)};if(a.chamfer){var M=a.chamfer;g.vertices=o.chamfer(g.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete a.chamfer}return s.create(n.extend({},g,a))},e.fromVertices=function(f,r,t,i,a,m,p,S){var w=n.getDecomp(),h,v,d,g,M,A,T,P,E,I,R;for(h=Boolean(w&&w.quickDecomp),i=i||{},d=[],a=typeof a<"u"?a:!1,m=typeof m<"u"?m:.01,p=typeof p<"u"?p:10,S=typeof S<"u"?S:.01,n.isArray(t[0])||(t=[t]),I=0;I<t.length;I+=1)if(A=t[I],g=o.isConvex(A),M=!g,M&&!h&&n.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),g||!h)g?A=o.clockwiseSort(A):A=o.hull(A),d.push({position:{x:f,y:r},vertices:A});else{var F=A.map(function(N){return[N.x,N.y]});w.makeCCW(F),m!==!1&&w.removeCollinearPoints(F,m),S!==!1&&w.removeDuplicatePoints&&w.removeDuplicatePoints(F,S);var H=w.quickDecomp(F);for(T=0;T<H.length;T++){var B=H[T],D=B.map(function(N){return{x:N[0],y:N[1]}});p>0&&o.area(D)<p||d.push({position:o.centre(D),vertices:D})}}for(T=0;T<d.length;T++)d[T]=s.create(n.extend(d[T],i));if(a){var L=5;for(T=0;T<d.length;T++){var k=d[T];for(P=T+1;P<d.length;P++){var b=d[P];if(c.overlaps(k.bounds,b.bounds)){var z=k.vertices,W=b.vertices;for(E=0;E<k.vertices.length;E++)for(R=0;R<b.vertices.length;R++){var $=l.magnitudeSquared(l.sub(z[(E+1)%z.length],W[R])),G=l.magnitudeSquared(l.sub(z[E],W[(R+1)%W.length]));$<L&&G<L&&(z[E].isInternal=!0,W[R].isInternal=!0)}}}}}return d.length>1?(v=s.create(n.extend({parts:d.slice(0)},i)),s.setPosition(v,{x:f,y:r}),v):d[0]}})()},function(x,C,u){var e={};x.exports=e;var o=u(0);(function(){e.create=function(n){var s={};return n||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),s.element=n||document.body,s.absolute={x:0,y:0},s.position={x:0,y:0},s.mousedownPosition={x:0,y:0},s.mouseupPosition={x:0,y:0},s.offset={x:0,y:0},s.scale={x:1,y:1},s.wheelDelta=0,s.button=-1,s.pixelRatio=parseInt(s.element.getAttribute("data-pixel-ratio"),10)||1,s.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},s.mousemove=function(c){var l=e._getRelativeMousePosition(c,s.element,s.pixelRatio),f=c.changedTouches;f&&(s.button=0,c.preventDefault()),s.absolute.x=l.x,s.absolute.y=l.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.sourceEvents.mousemove=c},s.mousedown=function(c){var l=e._getRelativeMousePosition(c,s.element,s.pixelRatio),f=c.changedTouches;f?(s.button=0,c.preventDefault()):s.button=c.button,s.absolute.x=l.x,s.absolute.y=l.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.mousedownPosition.x=s.position.x,s.mousedownPosition.y=s.position.y,s.sourceEvents.mousedown=c},s.mouseup=function(c){var l=e._getRelativeMousePosition(c,s.element,s.pixelRatio),f=c.changedTouches;f&&c.preventDefault(),s.button=-1,s.absolute.x=l.x,s.absolute.y=l.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.mouseupPosition.x=s.position.x,s.mouseupPosition.y=s.position.y,s.sourceEvents.mouseup=c},s.mousewheel=function(c){s.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault()},e.setElement(s,s.element),s},e.setElement=function(n,s){n.element=s,s.addEventListener("mousemove",n.mousemove),s.addEventListener("mousedown",n.mousedown),s.addEventListener("mouseup",n.mouseup),s.addEventListener("mousewheel",n.mousewheel),s.addEventListener("DOMMouseScroll",n.mousewheel),s.addEventListener("touchmove",n.mousemove),s.addEventListener("touchstart",n.mousedown),s.addEventListener("touchend",n.mouseup)},e.clearSourceEvents=function(n){n.sourceEvents.mousemove=null,n.sourceEvents.mousedown=null,n.sourceEvents.mouseup=null,n.sourceEvents.mousewheel=null,n.wheelDelta=0},e.setOffset=function(n,s){n.offset.x=s.x,n.offset.y=s.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e.setScale=function(n,s){n.scale.x=s.x,n.scale.y=s.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e._getRelativeMousePosition=function(n,s,c){var l=s.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,r=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,i=n.changedTouches,a,m;return i?(a=i[0].pageX-l.left-r,m=i[0].pageY-l.top-t):(a=n.pageX-l.left-r,m=n.pageY-l.top-t),{x:a/(s.clientWidth/(s.width||s.clientWidth)*c),y:m/(s.clientHeight/(s.height||s.clientHeight)*c)}}})()},function(x,C,u){var e={};x.exports=e;var o=u(0),n=u(8);(function(){e.create=function(s){var c={bodies:[],pairs:null};return o.extend(c,s)},e.setBodies=function(s,c){s.bodies=c.slice(0)},e.clear=function(s){s.bodies=[]},e.collisions=function(s){var c=[],l=s.pairs,f=s.bodies,r=f.length,t=e.canCollide,i=n.collides,a,m;for(f.sort(e._compareBoundsX),a=0;a<r;a++){var p=f[a],S=p.bounds,w=p.bounds.max.x,h=p.bounds.max.y,v=p.bounds.min.y,d=p.isStatic||p.isSleeping,g=p.parts.length,M=g===1;for(m=a+1;m<r;m++){var A=f[m],T=A.bounds;if(T.min.x>w)break;if(!(h<T.min.y||v>T.max.y)&&!(d&&(A.isStatic||A.isSleeping))&&!!t(p.collisionFilter,A.collisionFilter)){var P=A.parts.length;if(M&&P===1){var E=i(p,A,l);E&&c.push(E)}else for(var I=g>1?1:0,R=P>1?1:0,F=I;F<g;F++)for(var H=p.parts[F],S=H.bounds,B=R;B<P;B++){var D=A.parts[B],T=D.bounds;if(!(S.min.x>T.max.x||S.max.x<T.min.x||S.max.y<T.min.y||S.min.y>T.max.y)){var E=i(H,D,l);E&&c.push(E)}}}}}return c},e.canCollide=function(s,c){return s.group===c.group&&s.group!==0?s.group>0:(s.mask&c.category)!==0&&(c.mask&s.category)!==0},e._compareBoundsX=function(s,c){return s.bounds.min.x-c.bounds.min.x}})()},function(x,C,u){var e={};x.exports=e;var o=u(0);(function(){e._registry={},e.register=function(n){if(e.isPlugin(n)||o.warn("Plugin.register:",e.toString(n),"does not implement all required fields."),n.name in e._registry){var s=e._registry[n.name],c=e.versionParse(n.version).number,l=e.versionParse(s.version).number;c>l?(o.warn("Plugin.register:",e.toString(s),"was upgraded to",e.toString(n)),e._registry[n.name]=n):c<l?o.warn("Plugin.register:",e.toString(s),"can not be downgraded to",e.toString(n)):n!==s&&o.warn("Plugin.register:",e.toString(n),"is already registered to different plugin object")}else e._registry[n.name]=n;return n},e.resolve=function(n){return e._registry[e.dependencyParse(n).name]},e.toString=function(n){return typeof n=="string"?n:(n.name||"anonymous")+"@"+(n.version||n.range||"0.0.0")},e.isPlugin=function(n){return n&&n.name&&n.version&&n.install},e.isUsed=function(n,s){return n.used.indexOf(s)>-1},e.isFor=function(n,s){var c=n.for&&e.dependencyParse(n.for);return!n.for||s.name===c.name&&e.versionSatisfies(s.version,c.range)},e.use=function(n,s){if(n.uses=(n.uses||[]).concat(s||[]),n.uses.length===0){o.warn("Plugin.use:",e.toString(n),"does not specify any dependencies to install.");return}for(var c=e.dependencies(n),l=o.topologicalSort(c),f=[],r=0;r<l.length;r+=1)if(l[r]!==n.name){var t=e.resolve(l[r]);if(!t){f.push("\u274C "+l[r]);continue}e.isUsed(n,t.name)||(e.isFor(t,n)||(o.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(n)+"."),t._warned=!0),t.install?t.install(n):(o.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(f.push("\u{1F536} "+e.toString(t)),delete t._warned):f.push("\u2705 "+e.toString(t)),n.used.push(t.name))}f.length>0&&o.info(f.join("  "))},e.dependencies=function(n,s){var c=e.dependencyParse(n),l=c.name;if(s=s||{},!(l in s)){n=e.resolve(n)||n,s[l]=o.map(n.uses||[],function(r){e.isPlugin(r)&&e.register(r);var t=e.dependencyParse(r),i=e.resolve(r);return i&&!e.versionSatisfies(i.version,t.range)?(o.warn("Plugin.dependencies:",e.toString(i),"does not satisfy",e.toString(t),"used by",e.toString(c)+"."),i._warned=!0,n._warned=!0):i||(o.warn("Plugin.dependencies:",e.toString(r),"used by",e.toString(c),"could not be resolved."),n._warned=!0),t.name});for(var f=0;f<s[l].length;f+=1)e.dependencies(s[l][f],s);return s}},e.dependencyParse=function(n){if(o.isString(n)){var s=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return s.test(n)||o.warn("Plugin.dependencyParse:",n,"is not a valid dependency string."),{name:n.split("@")[0],range:n.split("@")[1]||"*"}}return{name:n.name,range:n.range||n.version}},e.versionParse=function(n){var s=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;s.test(n)||o.warn("Plugin.versionParse:",n,"is not a valid version or range.");var c=s.exec(n),l=Number(c[4]),f=Number(c[5]),r=Number(c[6]);return{isRange:Boolean(c[1]||c[2]),version:c[3],range:n,operator:c[1]||c[2]||"",major:l,minor:f,patch:r,parts:[l,f,r],prerelease:c[7],number:l*1e8+f*1e4+r}},e.versionSatisfies=function(n,s){s=s||"*";var c=e.versionParse(s),l=e.versionParse(n);if(c.isRange){if(c.operator==="*"||n==="*")return!0;if(c.operator===">")return l.number>c.number;if(c.operator===">=")return l.number>=c.number;if(c.operator==="~")return l.major===c.major&&l.minor===c.minor&&l.patch>=c.patch;if(c.operator==="^")return c.major>0?l.major===c.major&&l.number>=c.number:c.minor>0?l.minor===c.minor&&l.patch>=c.patch:l.patch===c.patch}return n===s||n==="*"}})()},function(x,C,u){var e={};x.exports=e;var o=u(0),n=u(5),s=u(1),c=u(4),l=u(2),f=u(13);(function(){var r,t;typeof window<"u"&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(h){window.setTimeout(function(){h(o.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(h){var v={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!h.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},d=o.extend(v,h);return d.canvas&&(d.canvas.width=d.options.width||d.canvas.width,d.canvas.height=d.options.height||d.canvas.height),d.mouse=h.mouse,d.engine=h.engine,d.canvas=d.canvas||m(d.options.width,d.options.height),d.context=d.canvas.getContext("2d"),d.textures={},d.bounds=d.bounds||{min:{x:0,y:0},max:{x:d.canvas.width,y:d.canvas.height}},d.options.showBroadphase=!1,d.options.pixelRatio!==1&&e.setPixelRatio(d,d.options.pixelRatio),o.isElement(d.element)?d.element.appendChild(d.canvas):d.canvas.parentNode||o.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),d},e.run=function(h){(function v(d){h.frameRequestId=r(v),i(h,d),e.world(h,d),(h.options.showStats||h.options.showDebug)&&e.stats(h,h.context,d),(h.options.showPerformance||h.options.showDebug)&&e.performance(h,h.context,d)})()},e.stop=function(h){t(h.frameRequestId)},e.setPixelRatio=function(h,v){var d=h.options,g=h.canvas;v==="auto"&&(v=p(g)),d.pixelRatio=v,g.setAttribute("data-pixel-ratio",v),g.width=d.width*v,g.height=d.height*v,g.style.width=d.width+"px",g.style.height=d.height+"px"},e.lookAt=function(h,v,d,g){g=typeof g<"u"?g:!0,v=o.isArray(v)?v:[v],d=d||{x:0,y:0};for(var M={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},A=0;A<v.length;A+=1){var T=v[A],P=T.bounds?T.bounds.min:T.min||T.position||T,E=T.bounds?T.bounds.max:T.max||T.position||T;P&&E&&(P.x<M.min.x&&(M.min.x=P.x),E.x>M.max.x&&(M.max.x=E.x),P.y<M.min.y&&(M.min.y=P.y),E.y>M.max.y&&(M.max.y=E.y))}var I=M.max.x-M.min.x+2*d.x,R=M.max.y-M.min.y+2*d.y,F=h.canvas.height,H=h.canvas.width,B=H/F,D=I/R,L=1,k=1;D>B?k=D/B:L=B/D,h.options.hasBounds=!0,h.bounds.min.x=M.min.x,h.bounds.max.x=M.min.x+I*L,h.bounds.min.y=M.min.y,h.bounds.max.y=M.min.y+R*k,g&&(h.bounds.min.x+=I*.5-I*L*.5,h.bounds.max.x+=I*.5-I*L*.5,h.bounds.min.y+=R*.5-R*k*.5,h.bounds.max.y+=R*.5-R*k*.5),h.bounds.min.x-=d.x,h.bounds.max.x-=d.x,h.bounds.min.y-=d.y,h.bounds.max.y-=d.y,h.mouse&&(f.setScale(h.mouse,{x:(h.bounds.max.x-h.bounds.min.x)/h.canvas.width,y:(h.bounds.max.y-h.bounds.min.y)/h.canvas.height}),f.setOffset(h.mouse,h.bounds.min))},e.startViewTransform=function(h){var v=h.bounds.max.x-h.bounds.min.x,d=h.bounds.max.y-h.bounds.min.y,g=v/h.options.width,M=d/h.options.height;h.context.setTransform(h.options.pixelRatio/g,0,0,h.options.pixelRatio/M,0,0),h.context.translate(-h.bounds.min.x,-h.bounds.min.y)},e.endViewTransform=function(h){h.context.setTransform(h.options.pixelRatio,0,0,h.options.pixelRatio,0,0)},e.world=function(h,v){var d=o.now(),g=h.engine,M=g.world,A=h.canvas,T=h.context,P=h.options,E=h.timing,I=n.allBodies(M),R=n.allConstraints(M),F=P.wireframes?P.wireframeBackground:P.background,H=[],B=[],D,L={timestamp:g.timing.timestamp};if(c.trigger(h,"beforeRender",L),h.currentBackground!==F&&w(h,F),T.globalCompositeOperation="source-in",T.fillStyle="transparent",T.fillRect(0,0,A.width,A.height),T.globalCompositeOperation="source-over",P.hasBounds){for(D=0;D<I.length;D++){var k=I[D];s.overlaps(k.bounds,h.bounds)&&H.push(k)}for(D=0;D<R.length;D++){var b=R[D],z=b.bodyA,W=b.bodyB,$=b.pointA,G=b.pointB;z&&($=l.add(z.position,b.pointA)),W&&(G=l.add(W.position,b.pointB)),!(!$||!G)&&(s.contains(h.bounds,$)||s.contains(h.bounds,G))&&B.push(b)}e.startViewTransform(h),h.mouse&&(f.setScale(h.mouse,{x:(h.bounds.max.x-h.bounds.min.x)/h.options.width,y:(h.bounds.max.y-h.bounds.min.y)/h.options.height}),f.setOffset(h.mouse,h.bounds.min))}else B=R,H=I,h.options.pixelRatio!==1&&h.context.setTransform(h.options.pixelRatio,0,0,h.options.pixelRatio,0,0);!P.wireframes||g.enableSleeping&&P.showSleeping?e.bodies(h,H,T):(P.showConvexHulls&&e.bodyConvexHulls(h,H,T),e.bodyWireframes(h,H,T)),P.showBounds&&e.bodyBounds(h,H,T),(P.showAxes||P.showAngleIndicator)&&e.bodyAxes(h,H,T),P.showPositions&&e.bodyPositions(h,H,T),P.showVelocity&&e.bodyVelocity(h,H,T),P.showIds&&e.bodyIds(h,H,T),P.showSeparations&&e.separations(h,g.pairs.list,T),P.showCollisions&&e.collisions(h,g.pairs.list,T),P.showVertexNumbers&&e.vertexNumbers(h,H,T),P.showMousePosition&&e.mousePosition(h,h.mouse,T),e.constraints(B,T),P.hasBounds&&e.endViewTransform(h),c.trigger(h,"afterRender",L),E.lastElapsed=o.now()-d},e.stats=function(h,v,d){for(var g=h.engine,M=g.world,A=n.allBodies(M),T=0,P=55,E=44,I=0,R=0,F=0;F<A.length;F+=1)T+=A[F].parts.length;var H={Part:T,Body:A.length,Cons:n.allConstraints(M).length,Comp:n.allComposites(M).length,Pair:g.pairs.list.length};v.fillStyle="#0e0f19",v.fillRect(I,R,P*5.5,E),v.font="12px Arial",v.textBaseline="top",v.textAlign="right";for(var B in H){var D=H[B];v.fillStyle="#aaa",v.fillText(B,I+P,R+8),v.fillStyle="#eee",v.fillText(D,I+P,R+26),I+=P}},e.performance=function(h,v){var d=h.engine,g=h.timing,M=g.deltaHistory,A=g.elapsedHistory,T=g.timestampElapsedHistory,P=g.engineDeltaHistory,E=g.engineElapsedHistory,I=d.timing.lastDelta,R=a(M),F=a(A),H=a(P),B=a(E),D=a(T),L=D/R||0,k=1e3/R||0,b=4,z=12,W=60,$=34,G=10,N=69;v.fillStyle="#0e0f19",v.fillRect(0,50,z*4+W*5+22,$),e.status(v,G,N,W,b,M.length,Math.round(k)+" fps",k/e._goodFps,function(U){return M[U]/R-1}),e.status(v,G+z+W,N,W,b,P.length,I.toFixed(2)+" dt",e._goodDelta/I,function(U){return P[U]/H-1}),e.status(v,G+(z+W)*2,N,W,b,E.length,B.toFixed(2)+" ut",1-B/e._goodFps,function(U){return E[U]/B-1}),e.status(v,G+(z+W)*3,N,W,b,A.length,F.toFixed(2)+" rt",1-F/e._goodFps,function(U){return A[U]/F-1}),e.status(v,G+(z+W)*4,N,W,b,T.length,L.toFixed(2)+" x",L*L*L,function(U){return(T[U]/M[U]/L||0)-1})},e.status=function(h,v,d,g,M,A,T,P,E){h.strokeStyle="#888",h.fillStyle="#444",h.lineWidth=1,h.fillRect(v,d+7,g,1),h.beginPath(),h.moveTo(v,d+7-M*o.clamp(.4*E(0),-2,2));for(var I=0;I<g;I+=1)h.lineTo(v+I,d+7-(I<A?M*o.clamp(.4*E(I),-2,2):0));h.stroke(),h.fillStyle="hsl("+o.clamp(25+95*P,0,120)+",100%,60%)",h.fillRect(v,d-7,4,4),h.font="12px Arial",h.textBaseline="middle",h.textAlign="right",h.fillStyle="#eee",h.fillText(T,v+g,d-5)},e.constraints=function(h,v){for(var d=v,g=0;g<h.length;g++){var M=h[g];if(!(!M.render.visible||!M.pointA||!M.pointB)){var A=M.bodyA,T=M.bodyB,P,E;if(A?P=l.add(A.position,M.pointA):P=M.pointA,M.render.type==="pin")d.beginPath(),d.arc(P.x,P.y,3,0,2*Math.PI),d.closePath();else{if(T?E=l.add(T.position,M.pointB):E=M.pointB,d.beginPath(),d.moveTo(P.x,P.y),M.render.type==="spring")for(var I=l.sub(E,P),R=l.perp(l.normalise(I)),F=Math.ceil(o.clamp(M.length/5,12,20)),H,B=1;B<F;B+=1)H=B%2===0?1:-1,d.lineTo(P.x+I.x*(B/F)+R.x*H*4,P.y+I.y*(B/F)+R.y*H*4);d.lineTo(E.x,E.y)}M.render.lineWidth&&(d.lineWidth=M.render.lineWidth,d.strokeStyle=M.render.strokeStyle,d.stroke()),M.render.anchors&&(d.fillStyle=M.render.strokeStyle,d.beginPath(),d.arc(P.x,P.y,3,0,2*Math.PI),d.arc(E.x,E.y,3,0,2*Math.PI),d.closePath(),d.fill())}}},e.bodies=function(h,v,d){var g=d;h.engine;var M=h.options,A=M.showInternalEdges||!M.wireframes,T,P,E,I;for(E=0;E<v.length;E++)if(T=v[E],!!T.render.visible){for(I=T.parts.length>1?1:0;I<T.parts.length;I++)if(P=T.parts[I],!!P.render.visible){if(M.showSleeping&&T.isSleeping?g.globalAlpha=.5*P.render.opacity:P.render.opacity!==1&&(g.globalAlpha=P.render.opacity),P.render.sprite&&P.render.sprite.texture&&!M.wireframes){var R=P.render.sprite,F=S(h,R.texture);g.translate(P.position.x,P.position.y),g.rotate(P.angle),g.drawImage(F,F.width*-R.xOffset*R.xScale,F.height*-R.yOffset*R.yScale,F.width*R.xScale,F.height*R.yScale),g.rotate(-P.angle),g.translate(-P.position.x,-P.position.y)}else{if(P.circleRadius)g.beginPath(),g.arc(P.position.x,P.position.y,P.circleRadius,0,2*Math.PI);else{g.beginPath(),g.moveTo(P.vertices[0].x,P.vertices[0].y);for(var H=1;H<P.vertices.length;H++)!P.vertices[H-1].isInternal||A?g.lineTo(P.vertices[H].x,P.vertices[H].y):g.moveTo(P.vertices[H].x,P.vertices[H].y),P.vertices[H].isInternal&&!A&&g.moveTo(P.vertices[(H+1)%P.vertices.length].x,P.vertices[(H+1)%P.vertices.length].y);g.lineTo(P.vertices[0].x,P.vertices[0].y),g.closePath()}M.wireframes?(g.lineWidth=1,g.strokeStyle="#bbb",g.stroke()):(g.fillStyle=P.render.fillStyle,P.render.lineWidth&&(g.lineWidth=P.render.lineWidth,g.strokeStyle=P.render.strokeStyle,g.stroke()),g.fill())}g.globalAlpha=1}}},e.bodyWireframes=function(h,v,d){var g=d,M=h.options.showInternalEdges,A,T,P,E,I;for(g.beginPath(),P=0;P<v.length;P++)if(A=v[P],!!A.render.visible)for(I=A.parts.length>1?1:0;I<A.parts.length;I++){for(T=A.parts[I],g.moveTo(T.vertices[0].x,T.vertices[0].y),E=1;E<T.vertices.length;E++)!T.vertices[E-1].isInternal||M?g.lineTo(T.vertices[E].x,T.vertices[E].y):g.moveTo(T.vertices[E].x,T.vertices[E].y),T.vertices[E].isInternal&&!M&&g.moveTo(T.vertices[(E+1)%T.vertices.length].x,T.vertices[(E+1)%T.vertices.length].y);g.lineTo(T.vertices[0].x,T.vertices[0].y)}g.lineWidth=1,g.strokeStyle="#bbb",g.stroke()},e.bodyConvexHulls=function(h,v,d){var g=d,M,A,T;for(g.beginPath(),A=0;A<v.length;A++)if(M=v[A],!(!M.render.visible||M.parts.length===1)){for(g.moveTo(M.vertices[0].x,M.vertices[0].y),T=1;T<M.vertices.length;T++)g.lineTo(M.vertices[T].x,M.vertices[T].y);g.lineTo(M.vertices[0].x,M.vertices[0].y)}g.lineWidth=1,g.strokeStyle="rgba(255,255,255,0.2)",g.stroke()},e.vertexNumbers=function(h,v,d){var g=d,M,A,T;for(M=0;M<v.length;M++){var P=v[M].parts;for(T=P.length>1?1:0;T<P.length;T++){var E=P[T];for(A=0;A<E.vertices.length;A++)g.fillStyle="rgba(255,255,255,0.2)",g.fillText(M+"_"+A,E.position.x+(E.vertices[A].x-E.position.x)*.8,E.position.y+(E.vertices[A].y-E.position.y)*.8)}}},e.mousePosition=function(h,v,d){var g=d;g.fillStyle="rgba(255,255,255,0.8)",g.fillText(v.position.x+"  "+v.position.y,v.position.x+5,v.position.y-5)},e.bodyBounds=function(h,v,d){var g=d;h.engine;var M=h.options;g.beginPath();for(var A=0;A<v.length;A++){var T=v[A];if(T.render.visible)for(var P=v[A].parts,E=P.length>1?1:0;E<P.length;E++){var I=P[E];g.rect(I.bounds.min.x,I.bounds.min.y,I.bounds.max.x-I.bounds.min.x,I.bounds.max.y-I.bounds.min.y)}}M.wireframes?g.strokeStyle="rgba(255,255,255,0.08)":g.strokeStyle="rgba(0,0,0,0.1)",g.lineWidth=1,g.stroke()},e.bodyAxes=function(h,v,d){var g=d;h.engine;var M=h.options,A,T,P,E;for(g.beginPath(),T=0;T<v.length;T++){var I=v[T],R=I.parts;if(!!I.render.visible)if(M.showAxes)for(P=R.length>1?1:0;P<R.length;P++)for(A=R[P],E=0;E<A.axes.length;E++){var F=A.axes[E];g.moveTo(A.position.x,A.position.y),g.lineTo(A.position.x+F.x*20,A.position.y+F.y*20)}else for(P=R.length>1?1:0;P<R.length;P++)for(A=R[P],E=0;E<A.axes.length;E++)g.moveTo(A.position.x,A.position.y),g.lineTo((A.vertices[0].x+A.vertices[A.vertices.length-1].x)/2,(A.vertices[0].y+A.vertices[A.vertices.length-1].y)/2)}M.wireframes?(g.strokeStyle="indianred",g.lineWidth=1):(g.strokeStyle="rgba(255, 255, 255, 0.4)",g.globalCompositeOperation="overlay",g.lineWidth=2),g.stroke(),g.globalCompositeOperation="source-over"},e.bodyPositions=function(h,v,d){var g=d;h.engine;var M=h.options,A,T,P,E;for(g.beginPath(),P=0;P<v.length;P++)if(A=v[P],!!A.render.visible)for(E=0;E<A.parts.length;E++)T=A.parts[E],g.arc(T.position.x,T.position.y,3,0,2*Math.PI,!1),g.closePath();for(M.wireframes?g.fillStyle="indianred":g.fillStyle="rgba(0,0,0,0.5)",g.fill(),g.beginPath(),P=0;P<v.length;P++)A=v[P],A.render.visible&&(g.arc(A.positionPrev.x,A.positionPrev.y,2,0,2*Math.PI,!1),g.closePath());g.fillStyle="rgba(255,165,0,0.8)",g.fill()},e.bodyVelocity=function(h,v,d){var g=d;g.beginPath();for(var M=0;M<v.length;M++){var A=v[M];!A.render.visible||(g.moveTo(A.position.x,A.position.y),g.lineTo(A.position.x+(A.position.x-A.positionPrev.x)*2,A.position.y+(A.position.y-A.positionPrev.y)*2))}g.lineWidth=3,g.strokeStyle="cornflowerblue",g.stroke()},e.bodyIds=function(h,v,d){var g=d,M,A;for(M=0;M<v.length;M++)if(!!v[M].render.visible){var T=v[M].parts;for(A=T.length>1?1:0;A<T.length;A++){var P=T[A];g.font="12px Arial",g.fillStyle="rgba(255,255,255,0.5)",g.fillText(P.id,P.position.x+10,P.position.y-10)}}},e.collisions=function(h,v,d){var g=d,M=h.options,A,T,P,E;for(g.beginPath(),P=0;P<v.length;P++)if(A=v[P],!!A.isActive)for(T=A.collision,E=0;E<A.activeContacts.length;E++){var I=A.activeContacts[E],R=I.vertex;g.rect(R.x-1.5,R.y-1.5,3.5,3.5)}for(M.wireframes?g.fillStyle="rgba(255,255,255,0.7)":g.fillStyle="orange",g.fill(),g.beginPath(),P=0;P<v.length;P++)if(A=v[P],!!A.isActive&&(T=A.collision,A.activeContacts.length>0)){var F=A.activeContacts[0].vertex.x,H=A.activeContacts[0].vertex.y;A.activeContacts.length===2&&(F=(A.activeContacts[0].vertex.x+A.activeContacts[1].vertex.x)/2,H=(A.activeContacts[0].vertex.y+A.activeContacts[1].vertex.y)/2),T.bodyB===T.supports[0].body||T.bodyA.isStatic===!0?g.moveTo(F-T.normal.x*8,H-T.normal.y*8):g.moveTo(F+T.normal.x*8,H+T.normal.y*8),g.lineTo(F,H)}M.wireframes?g.strokeStyle="rgba(255,165,0,0.7)":g.strokeStyle="orange",g.lineWidth=1,g.stroke()},e.separations=function(h,v,d){var g=d,M=h.options,A,T,P,E,I;for(g.beginPath(),I=0;I<v.length;I++)if(A=v[I],!!A.isActive){T=A.collision,P=T.bodyA,E=T.bodyB;var R=1;!E.isStatic&&!P.isStatic&&(R=.5),E.isStatic&&(R=0),g.moveTo(E.position.x,E.position.y),g.lineTo(E.position.x-T.penetration.x*R,E.position.y-T.penetration.y*R),R=1,!E.isStatic&&!P.isStatic&&(R=.5),P.isStatic&&(R=0),g.moveTo(P.position.x,P.position.y),g.lineTo(P.position.x+T.penetration.x*R,P.position.y+T.penetration.y*R)}M.wireframes?g.strokeStyle="rgba(255,165,0,0.5)":g.strokeStyle="orange",g.stroke()},e.inspector=function(h,v){h.engine;var d=h.selected,g=h.render,M=g.options,A;if(M.hasBounds){var T=g.bounds.max.x-g.bounds.min.x,P=g.bounds.max.y-g.bounds.min.y,E=T/g.options.width,I=P/g.options.height;v.scale(1/E,1/I),v.translate(-g.bounds.min.x,-g.bounds.min.y)}for(var R=0;R<d.length;R++){var F=d[R].data;switch(v.translate(.5,.5),v.lineWidth=1,v.strokeStyle="rgba(255,165,0,0.9)",v.setLineDash([1,2]),F.type){case"body":A=F.bounds,v.beginPath(),v.rect(Math.floor(A.min.x-3),Math.floor(A.min.y-3),Math.floor(A.max.x-A.min.x+6),Math.floor(A.max.y-A.min.y+6)),v.closePath(),v.stroke();break;case"constraint":var H=F.pointA;F.bodyA&&(H=F.pointB),v.beginPath(),v.arc(H.x,H.y,10,0,2*Math.PI),v.closePath(),v.stroke();break}v.setLineDash([]),v.translate(-.5,-.5)}h.selectStart!==null&&(v.translate(.5,.5),v.lineWidth=1,v.strokeStyle="rgba(255,165,0,0.6)",v.fillStyle="rgba(255,165,0,0.1)",A=h.selectBounds,v.beginPath(),v.rect(Math.floor(A.min.x),Math.floor(A.min.y),Math.floor(A.max.x-A.min.x),Math.floor(A.max.y-A.min.y)),v.closePath(),v.stroke(),v.fill(),v.translate(-.5,-.5)),M.hasBounds&&v.setTransform(1,0,0,1,0,0)};var i=function(h,v){var d=h.engine,g=h.timing,M=g.historySize,A=d.timing.timestamp;g.delta=v-g.lastTime||e._goodDelta,g.lastTime=v,g.timestampElapsed=A-g.lastTimestamp||0,g.lastTimestamp=A,g.deltaHistory.unshift(g.delta),g.deltaHistory.length=Math.min(g.deltaHistory.length,M),g.engineDeltaHistory.unshift(d.timing.lastDelta),g.engineDeltaHistory.length=Math.min(g.engineDeltaHistory.length,M),g.timestampElapsedHistory.unshift(g.timestampElapsed),g.timestampElapsedHistory.length=Math.min(g.timestampElapsedHistory.length,M),g.engineElapsedHistory.unshift(d.timing.lastElapsed),g.engineElapsedHistory.length=Math.min(g.engineElapsedHistory.length,M),g.elapsedHistory.unshift(g.lastElapsed),g.elapsedHistory.length=Math.min(g.elapsedHistory.length,M)},a=function(h){for(var v=0,d=0;d<h.length;d+=1)v+=h[d];return v/h.length||0},m=function(h,v){var d=document.createElement("canvas");return d.width=h,d.height=v,d.oncontextmenu=function(){return!1},d.onselectstart=function(){return!1},d},p=function(h){var v=h.getContext("2d"),d=window.devicePixelRatio||1,g=v.webkitBackingStorePixelRatio||v.mozBackingStorePixelRatio||v.msBackingStorePixelRatio||v.oBackingStorePixelRatio||v.backingStorePixelRatio||1;return d/g},S=function(h,v){var d=h.textures[v];return d||(d=h.textures[v]=new Image,d.src=v,d)},w=function(h,v){var d=v;/(jpg|gif|png)$/.test(v)&&(d="url("+v+")"),h.canvas.style.background=d,h.canvas.style.backgroundSize="contain",h.currentBackground=v}})()},function(x,C){var u={};x.exports=u,function(){u.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(x,C,u){var e={};x.exports=e;var o=u(7),n=u(19),s=u(14),c=u(20),l=u(4),f=u(5),r=u(10),t=u(0),i=u(6);(function(){e.create=function(a){a=a||{};var m={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},p=t.extend(m,a);return p.world=a.world||f.create({label:"World"}),p.pairs=a.pairs||c.create(),p.detector=a.detector||s.create(),p.grid={buckets:[]},p.world.gravity=p.gravity,p.broadphase=p.grid,p.metrics={},p},e.update=function(a,m,p){var S=t.now();m=m||1e3/60,p=p||1;var w=a.world,h=a.detector,v=a.pairs,d=a.timing,g=d.timestamp,M;d.timestamp+=m*d.timeScale,d.lastDelta=m*d.timeScale;var A={timestamp:d.timestamp};l.trigger(a,"beforeUpdate",A);var T=f.allBodies(w),P=f.allConstraints(w);for(w.isModified&&s.setBodies(h,T),w.isModified&&f.setModified(w,!1,!1,!0),a.enableSleeping&&o.update(T,d.timeScale),e._bodiesApplyGravity(T,a.gravity),e._bodiesUpdate(T,m,d.timeScale,p,w.bounds),r.preSolveAll(T),M=0;M<a.constraintIterations;M++)r.solveAll(P,d.timeScale);r.postSolveAll(T),h.pairs=a.pairs;var E=s.collisions(h);for(c.update(v,E,g),a.enableSleeping&&o.afterCollisions(v.list,d.timeScale),v.collisionStart.length>0&&l.trigger(a,"collisionStart",{pairs:v.collisionStart}),n.preSolvePosition(v.list),M=0;M<a.positionIterations;M++)n.solvePosition(v.list,d.timeScale);for(n.postSolvePosition(T),r.preSolveAll(T),M=0;M<a.constraintIterations;M++)r.solveAll(P,d.timeScale);for(r.postSolveAll(T),n.preSolveVelocity(v.list),M=0;M<a.velocityIterations;M++)n.solveVelocity(v.list,d.timeScale);return v.collisionActive.length>0&&l.trigger(a,"collisionActive",{pairs:v.collisionActive}),v.collisionEnd.length>0&&l.trigger(a,"collisionEnd",{pairs:v.collisionEnd}),e._bodiesClearForces(T),l.trigger(a,"afterUpdate",A),a.timing.lastElapsed=t.now()-S,a},e.merge=function(a,m){if(t.extend(a,m),m.world){a.world=m.world,e.clear(a);for(var p=f.allBodies(a.world),S=0;S<p.length;S++){var w=p[S];o.set(w,!1),w.id=t.nextId()}}},e.clear=function(a){c.clear(a.pairs),s.clear(a.detector)},e._bodiesClearForces=function(a){for(var m=0;m<a.length;m++){var p=a[m];p.force.x=0,p.force.y=0,p.torque=0}},e._bodiesApplyGravity=function(a,m){var p=typeof m.scale<"u"?m.scale:.001;if(!(m.x===0&&m.y===0||p===0))for(var S=0;S<a.length;S++){var w=a[S];w.isStatic||w.isSleeping||(w.force.y+=w.mass*m.y*p,w.force.x+=w.mass*m.x*p)}},e._bodiesUpdate=function(a,m,p,S,w){for(var h=0;h<a.length;h++){var v=a[h];v.isStatic||v.isSleeping||i.update(v,m,p,S)}}})()},function(x,C,u){var e={};x.exports=e;var o=u(3),n=u(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(s){var c,l,f,r=s.length;for(c=0;c<r;c++)l=s[c],l.isActive&&(f=l.activeContacts.length,l.collision.parentA.totalContacts+=f,l.collision.parentB.totalContacts+=f)},e.solvePosition=function(s,c){var l,f,r,t,i,a,m,p,S=e._positionDampen,w=s.length;for(l=0;l<w;l++)f=s[l],!(!f.isActive||f.isSensor)&&(r=f.collision,t=r.parentA,i=r.parentB,a=r.normal,f.separation=a.x*(i.positionImpulse.x+r.penetration.x-t.positionImpulse.x)+a.y*(i.positionImpulse.y+r.penetration.y-t.positionImpulse.y));for(l=0;l<w;l++)f=s[l],!(!f.isActive||f.isSensor)&&(r=f.collision,t=r.parentA,i=r.parentB,a=r.normal,p=(f.separation-f.slop)*c,(t.isStatic||i.isStatic)&&(p*=2),t.isStatic||t.isSleeping||(m=S/t.totalContacts,t.positionImpulse.x+=a.x*p*m,t.positionImpulse.y+=a.y*p*m),i.isStatic||i.isSleeping||(m=S/i.totalContacts,i.positionImpulse.x-=a.x*p*m,i.positionImpulse.y-=a.y*p*m))},e.postSolvePosition=function(s){for(var c=e._positionWarming,l=s.length,f=o.translate,r=n.update,t=0;t<l;t++){var i=s[t],a=i.positionImpulse,m=a.x,p=a.y,S=i.velocity;if(i.totalContacts=0,m!==0||p!==0){for(var w=0;w<i.parts.length;w++){var h=i.parts[w];f(h.vertices,a),r(h.bounds,h.vertices,S),h.position.x+=m,h.position.y+=p}i.positionPrev.x+=m,i.positionPrev.y+=p,m*S.x+p*S.y<0?(a.x=0,a.y=0):(a.x*=c,a.y*=c)}}},e.preSolveVelocity=function(s){var c=s.length,l,f;for(l=0;l<c;l++){var r=s[l];if(!(!r.isActive||r.isSensor)){var t=r.activeContacts,i=t.length,a=r.collision,m=a.parentA,p=a.parentB,S=a.normal,w=a.tangent;for(f=0;f<i;f++){var h=t[f],v=h.vertex,d=h.normalImpulse,g=h.tangentImpulse;if(d!==0||g!==0){var M=S.x*d+w.x*g,A=S.y*d+w.y*g;m.isStatic||m.isSleeping||(m.positionPrev.x+=M*m.inverseMass,m.positionPrev.y+=A*m.inverseMass,m.anglePrev+=m.inverseInertia*((v.x-m.position.x)*A-(v.y-m.position.y)*M)),p.isStatic||p.isSleeping||(p.positionPrev.x-=M*p.inverseMass,p.positionPrev.y-=A*p.inverseMass,p.anglePrev-=p.inverseInertia*((v.x-p.position.x)*A-(v.y-p.position.y)*M))}}}}},e.solveVelocity=function(s,c){var l=c*c,f=e._restingThresh*l,r=e._frictionNormalMultiplier,t=e._restingThreshTangent*l,i=Number.MAX_VALUE,a=s.length,m,p,S,w;for(S=0;S<a;S++){var h=s[S];if(!(!h.isActive||h.isSensor)){var v=h.collision,d=v.parentA,g=v.parentB,M=d.velocity,A=g.velocity,T=v.normal.x,P=v.normal.y,E=v.tangent.x,I=v.tangent.y,R=h.activeContacts,F=R.length,H=1/F,B=d.inverseMass+g.inverseMass,D=h.friction*h.frictionStatic*r*l;for(M.x=d.position.x-d.positionPrev.x,M.y=d.position.y-d.positionPrev.y,A.x=g.position.x-g.positionPrev.x,A.y=g.position.y-g.positionPrev.y,d.angularVelocity=d.angle-d.anglePrev,g.angularVelocity=g.angle-g.anglePrev,w=0;w<F;w++){var L=R[w],k=L.vertex,b=k.x-d.position.x,z=k.y-d.position.y,W=k.x-g.position.x,$=k.y-g.position.y,G=M.x-z*d.angularVelocity,N=M.y+b*d.angularVelocity,U=A.x-$*g.angularVelocity,q=A.y+W*g.angularVelocity,Z=G-U,K=N-q,J=T*Z+P*K,j=E*Z+I*K,re=h.separation+J,_=Math.min(re,1);_=re<0?0:_;var Pe=_*D;j>Pe||-j>Pe?(p=j>0?j:-j,m=h.friction*(j>0?1:-1)*l,m<-p?m=-p:m>p&&(m=p)):(m=j,p=i);var Ce=b*P-z*T,Ae=W*P-$*T,Me=H/(B+d.inverseInertia*Ce*Ce+g.inverseInertia*Ae*Ae),se=(1+h.restitution)*J*Me;if(m*=Me,J*J>f&&J<0)L.normalImpulse=0;else{var We=L.normalImpulse;L.normalImpulse+=se,L.normalImpulse=Math.min(L.normalImpulse,0),se=L.normalImpulse-We}if(j*j>t)L.tangentImpulse=0;else{var ze=L.tangentImpulse;L.tangentImpulse+=m,L.tangentImpulse<-p&&(L.tangentImpulse=-p),L.tangentImpulse>p&&(L.tangentImpulse=p),m=L.tangentImpulse-ze}var ae=T*se+E*m,oe=P*se+I*m;d.isStatic||d.isSleeping||(d.positionPrev.x+=ae*d.inverseMass,d.positionPrev.y+=oe*d.inverseMass,d.anglePrev+=(b*oe-z*ae)*d.inverseInertia),g.isStatic||g.isSleeping||(g.positionPrev.x-=ae*g.inverseMass,g.positionPrev.y-=oe*g.inverseMass,g.anglePrev-=(W*oe-$*ae)*g.inverseInertia)}}}}})()},function(x,C,u){var e={};x.exports=e;var o=u(9),n=u(0);(function(){e.create=function(s){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},s)},e.update=function(s,c,l){var f=s.list,r=f.length,t=s.table,i=c.length,a=s.collisionStart,m=s.collisionEnd,p=s.collisionActive,S,w,h,v;for(a.length=0,m.length=0,p.length=0,v=0;v<r;v++)f[v].confirmedActive=!1;for(v=0;v<i;v++)S=c[v],h=S.pair,h?(h.isActive?p.push(h):a.push(h),o.update(h,S,l),h.confirmedActive=!0):(h=o.create(S,l),t[h.id]=h,a.push(h),f.push(h));var d=[];for(r=f.length,v=0;v<r;v++)h=f[v],h.confirmedActive||(o.setActive(h,!1,l),m.push(h),!h.collision.bodyA.isSleeping&&!h.collision.bodyB.isSleeping&&d.push(v));for(v=0;v<d.length;v++)w=d[v]-v,h=f[w],f.splice(w,1),delete t[h.id]},e.clear=function(s){return s.table={},s.list.length=0,s.collisionStart.length=0,s.collisionActive.length=0,s.collisionEnd.length=0,s}})()},function(x,C,u){var e=x.exports=u(22);e.Axes=u(11),e.Bodies=u(12),e.Body=u(6),e.Bounds=u(1),e.Collision=u(8),e.Common=u(0),e.Composite=u(5),e.Composites=u(23),e.Constraint=u(10),e.Contact=u(17),e.Detector=u(14),e.Engine=u(18),e.Events=u(4),e.Grid=u(24),e.Mouse=u(13),e.MouseConstraint=u(25),e.Pair=u(9),e.Pairs=u(20),e.Plugin=u(15),e.Query=u(26),e.Render=u(16),e.Resolver=u(19),e.Runner=u(27),e.SAT=u(28),e.Sleeping=u(7),e.Svg=u(29),e.Vector=u(2),e.Vertices=u(3),e.World=u(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(x,C,u){var e={};x.exports=e;var o=u(15),n=u(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){o.use(e,Array.prototype.slice.call(arguments))},e.before=function(s,c){return s=s.replace(/^Matter./,""),n.chainPathBefore(e,s,c)},e.after=function(s,c){return s=s.replace(/^Matter./,""),n.chainPathAfter(e,s,c)}})()},function(x,C,u){var e={};x.exports=e;var o=u(5),n=u(10),s=u(0),c=u(6),l=u(12),f=s.deprecated;(function(){e.stack=function(r,t,i,a,m,p,S){for(var w=o.create({label:"Stack"}),h=r,v=t,d,g=0,M=0;M<a;M++){for(var A=0,T=0;T<i;T++){var P=S(h,v,T,M,d,g);if(P){var E=P.bounds.max.y-P.bounds.min.y,I=P.bounds.max.x-P.bounds.min.x;E>A&&(A=E),c.translate(P,{x:I*.5,y:E*.5}),h=P.bounds.max.x+m,o.addBody(w,P),d=P,g+=1}else h+=m}v+=A+p,h=r}return w},e.chain=function(r,t,i,a,m,p){for(var S=r.bodies,w=1;w<S.length;w++){var h=S[w-1],v=S[w],d=h.bounds.max.y-h.bounds.min.y,g=h.bounds.max.x-h.bounds.min.x,M=v.bounds.max.y-v.bounds.min.y,A=v.bounds.max.x-v.bounds.min.x,T={bodyA:h,pointA:{x:g*t,y:d*i},bodyB:v,pointB:{x:A*a,y:M*m}},P=s.extend(T,p);o.addConstraint(r,n.create(P))}return r.label+=" Chain",r},e.mesh=function(r,t,i,a,m){var p=r.bodies,S,w,h,v,d;for(S=0;S<i;S++){for(w=1;w<t;w++)h=p[w-1+S*t],v=p[w+S*t],o.addConstraint(r,n.create(s.extend({bodyA:h,bodyB:v},m)));if(S>0)for(w=0;w<t;w++)h=p[w+(S-1)*t],v=p[w+S*t],o.addConstraint(r,n.create(s.extend({bodyA:h,bodyB:v},m))),a&&w>0&&(d=p[w-1+(S-1)*t],o.addConstraint(r,n.create(s.extend({bodyA:d,bodyB:v},m)))),a&&w<t-1&&(d=p[w+1+(S-1)*t],o.addConstraint(r,n.create(s.extend({bodyA:d,bodyB:v},m))))}return r.label+=" Mesh",r},e.pyramid=function(r,t,i,a,m,p,S){return e.stack(r,t,i,a,m,p,function(w,h,v,d,g,M){var A=Math.min(a,Math.ceil(i/2)),T=g?g.bounds.max.x-g.bounds.min.x:0;if(!(d>A)){d=A-d;var P=d,E=i-1-d;if(!(v<P||v>E)){M===1&&c.translate(g,{x:(v+(i%2===1?1:-1))*T,y:0});var I=g?v*T:0;return S(r+I+v*m,h,v,d,g,M)}}})},e.newtonsCradle=function(r,t,i,a,m){for(var p=o.create({label:"Newtons Cradle"}),S=0;S<i;S++){var w=1.9,h=l.circle(r+S*(a*w),t+m,a,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),v=n.create({pointA:{x:r+S*(a*w),y:t},bodyB:h});o.addBody(p,h),o.addConstraint(p,v)}return p},f(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(r,t,i,a,m){var p=c.nextGroup(!0),S=20,w=-i*.5+S,h=i*.5-S,v=0,d=o.create({label:"Car"}),g=l.rectangle(r,t,i,a,{collisionFilter:{group:p},chamfer:{radius:a*.5},density:2e-4}),M=l.circle(r+w,t+v,m,{collisionFilter:{group:p},friction:.8}),A=l.circle(r+h,t+v,m,{collisionFilter:{group:p},friction:.8}),T=n.create({bodyB:g,pointB:{x:w,y:v},bodyA:M,stiffness:1,length:0}),P=n.create({bodyB:g,pointB:{x:h,y:v},bodyA:A,stiffness:1,length:0});return o.addBody(d,g),o.addBody(d,M),o.addBody(d,A),o.addConstraint(d,T),o.addConstraint(d,P),d},f(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(r,t,i,a,m,p,S,w,h,v){h=s.extend({inertia:1/0},h),v=s.extend({stiffness:.2,render:{type:"line",anchors:!1}},v);var d=e.stack(r,t,i,a,m,p,function(g,M){return l.circle(g,M,w,h)});return e.mesh(d,i,a,S,v),d.label="Soft Body",d},f(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(x,C,u){var e={};x.exports=e;var o=u(9),n=u(0),s=n.deprecated;(function(){e.create=function(c){var l={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return n.extend(l,c)},e.update=function(c,l,f,r){var t,i,a,m=f.world,p=c.buckets,S,w,h=!1;for(t=0;t<l.length;t++){var v=l[t];if(!(v.isSleeping&&!r)&&!(m.bounds&&(v.bounds.max.x<m.bounds.min.x||v.bounds.min.x>m.bounds.max.x||v.bounds.max.y<m.bounds.min.y||v.bounds.min.y>m.bounds.max.y))){var d=e._getRegion(c,v);if(!v.region||d.id!==v.region.id||r){(!v.region||r)&&(v.region=d);var g=e._regionUnion(d,v.region);for(i=g.startCol;i<=g.endCol;i++)for(a=g.startRow;a<=g.endRow;a++){w=e._getBucketId(i,a),S=p[w];var M=i>=d.startCol&&i<=d.endCol&&a>=d.startRow&&a<=d.endRow,A=i>=v.region.startCol&&i<=v.region.endCol&&a>=v.region.startRow&&a<=v.region.endRow;!M&&A&&A&&S&&e._bucketRemoveBody(c,S,v),(v.region===d||M&&!A||r)&&(S||(S=e._createBucket(p,w)),e._bucketAddBody(c,S,v))}v.region=d,h=!0}}}h&&(c.pairsList=e._createActivePairsList(c))},s(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},s(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(c,l){var f=Math.min(c.startCol,l.startCol),r=Math.max(c.endCol,l.endCol),t=Math.min(c.startRow,l.startRow),i=Math.max(c.endRow,l.endRow);return e._createRegion(f,r,t,i)},e._getRegion=function(c,l){var f=l.bounds,r=Math.floor(f.min.x/c.bucketWidth),t=Math.floor(f.max.x/c.bucketWidth),i=Math.floor(f.min.y/c.bucketHeight),a=Math.floor(f.max.y/c.bucketHeight);return e._createRegion(r,t,i,a)},e._createRegion=function(c,l,f,r){return{id:c+","+l+","+f+","+r,startCol:c,endCol:l,startRow:f,endRow:r}},e._getBucketId=function(c,l){return"C"+c+"R"+l},e._createBucket=function(c,l){var f=c[l]=[];return f},e._bucketAddBody=function(c,l,f){var r=c.pairs,t=o.id,i=l.length,a;for(a=0;a<i;a++){var m=l[a];if(!(f.id===m.id||f.isStatic&&m.isStatic)){var p=t(f,m),S=r[p];S?S[2]+=1:r[p]=[f,m,1]}}l.push(f)},e._bucketRemoveBody=function(c,l,f){var r=c.pairs,t=o.id,i;l.splice(n.indexOf(l,f),1);var a=l.length;for(i=0;i<a;i++){var m=r[t(f,l[i])];m&&(m[2]-=1)}},e._createActivePairsList=function(c){var l,f=c.pairs,r=n.keys(f),t=r.length,i=[],a;for(a=0;a<t;a++)l=f[r[a]],l[2]>0?i.push(l):delete f[r[a]];return i}})()},function(x,C,u){var e={};x.exports=e;var o=u(3),n=u(7),s=u(13),c=u(4),l=u(14),f=u(10),r=u(5),t=u(0),i=u(1);(function(){e.create=function(a,m){var p=(a?a.mouse:null)||(m?m.mouse:null);p||(a&&a.render&&a.render.canvas?p=s.create(a.render.canvas):m&&m.element?p=s.create(m.element):(p=s.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var S=f.create({label:"Mouse Constraint",pointA:p.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),w={type:"mouseConstraint",mouse:p,element:null,body:null,constraint:S,collisionFilter:{category:1,mask:4294967295,group:0}},h=t.extend(w,m);return c.on(a,"beforeUpdate",function(){var v=r.allBodies(a.world);e.update(h,v),e._triggerEvents(h)}),h},e.update=function(a,m){var p=a.mouse,S=a.constraint,w=a.body;if(p.button===0){if(S.bodyB)n.set(S.bodyB,!1),S.pointA=p.position;else for(var h=0;h<m.length;h++)if(w=m[h],i.contains(w.bounds,p.position)&&l.canCollide(w.collisionFilter,a.collisionFilter))for(var v=w.parts.length>1?1:0;v<w.parts.length;v++){var d=w.parts[v];if(o.contains(d.vertices,p.position)){S.pointA=p.position,S.bodyB=a.body=w,S.pointB={x:p.position.x-w.position.x,y:p.position.y-w.position.y},S.angleB=w.angle,n.set(w,!1),c.trigger(a,"startdrag",{mouse:p,body:w});break}}}else S.bodyB=a.body=null,S.pointB=null,w&&c.trigger(a,"enddrag",{mouse:p,body:w})},e._triggerEvents=function(a){var m=a.mouse,p=m.sourceEvents;p.mousemove&&c.trigger(a,"mousemove",{mouse:m}),p.mousedown&&c.trigger(a,"mousedown",{mouse:m}),p.mouseup&&c.trigger(a,"mouseup",{mouse:m}),s.clearSourceEvents(m)}})()},function(x,C,u){var e={};x.exports=e;var o=u(2),n=u(8),s=u(1),c=u(12),l=u(3);(function(){e.collides=function(f,r){for(var t=[],i=r.length,a=f.bounds,m=n.collides,p=s.overlaps,S=0;S<i;S++){var w=r[S],h=w.parts.length,v=h===1?0:1;if(p(w.bounds,a))for(var d=v;d<h;d++){var g=w.parts[d];if(p(g.bounds,a)){var M=m(g,f);if(M){t.push(M);break}}}}return t},e.ray=function(f,r,t,i){i=i||1e-100;for(var a=o.angle(r,t),m=o.magnitude(o.sub(r,t)),p=(t.x+r.x)*.5,S=(t.y+r.y)*.5,w=c.rectangle(p,S,m,i,{angle:a}),h=e.collides(w,f),v=0;v<h.length;v+=1){var d=h[v];d.body=d.bodyB=d.bodyA}return h},e.region=function(f,r,t){for(var i=[],a=0;a<f.length;a++){var m=f[a],p=s.overlaps(m.bounds,r);(p&&!t||!p&&t)&&i.push(m)}return i},e.point=function(f,r){for(var t=[],i=0;i<f.length;i++){var a=f[i];if(s.contains(a.bounds,r))for(var m=a.parts.length===1?0:1;m<a.parts.length;m++){var p=a.parts[m];if(s.contains(p.bounds,r)&&l.contains(p.vertices,r)){t.push(a);break}}}return t}})()},function(x,C,u){var e={};x.exports=e;var o=u(4),n=u(18),s=u(0);(function(){var c,l;if(typeof window<"u"&&(c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,l=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!c){var f;c=function(r){f=setTimeout(function(){r(s.now())},1e3/60)},l=function(){clearTimeout(f)}}e.create=function(r){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},i=s.extend(t,r);return i.delta=i.delta||1e3/i.fps,i.deltaMin=i.deltaMin||1e3/i.fps,i.deltaMax=i.deltaMax||1e3/(i.fps*.5),i.fps=1e3/i.delta,i},e.run=function(r,t){return typeof r.positionIterations<"u"&&(t=r,r=e.create()),function i(a){r.frameRequestId=c(i),a&&r.enabled&&e.tick(r,t,a)}(),r},e.tick=function(r,t,i){var a=t.timing,m=1,p,S={timestamp:a.timestamp};o.trigger(r,"beforeTick",S),r.isFixed?p=r.delta:(p=i-r.timePrev||r.delta,r.timePrev=i,r.deltaHistory.push(p),r.deltaHistory=r.deltaHistory.slice(-r.deltaSampleSize),p=Math.min.apply(null,r.deltaHistory),p=p<r.deltaMin?r.deltaMin:p,p=p>r.deltaMax?r.deltaMax:p,m=p/r.delta,r.delta=p),r.timeScalePrev!==0&&(m*=a.timeScale/r.timeScalePrev),a.timeScale===0&&(m=0),r.timeScalePrev=a.timeScale,r.correction=m,r.frameCounter+=1,i-r.counterTimestamp>=1e3&&(r.fps=r.frameCounter*((i-r.counterTimestamp)/1e3),r.counterTimestamp=i,r.frameCounter=0),o.trigger(r,"tick",S),o.trigger(r,"beforeUpdate",S),n.update(t,p,m),o.trigger(r,"afterUpdate",S),o.trigger(r,"afterTick",S)},e.stop=function(r){l(r.frameRequestId)},e.start=function(r,t){e.run(r,t)}})()},function(x,C,u){var e={};x.exports=e;var o=u(8),n=u(0),s=n.deprecated;(function(){e.collides=function(c,l){return o.collides(c,l)},s(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(x,C,u){var e={};x.exports=e,u(1);var o=u(0);(function(){e.pathToVertices=function(n,s){typeof window<"u"&&!("SVGPathSeg"in window)&&o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,l,f,r,t,i,a,m,p,S,w=[],h,v,d=0,g=0,M=0;s=s||15;var A=function(P,E,I){var R=I%2===1&&I>1;if(!p||P!=p.x||E!=p.y){p&&R?(h=p.x,v=p.y):(h=0,v=0);var F={x:h+P,y:v+E};(R||!p)&&(p=F),w.push(F),g=h+P,M=v+E}},T=function(P){var E=P.pathSegTypeAsLetter.toUpperCase();if(E!=="Z"){switch(E){case"M":case"L":case"T":case"C":case"S":case"Q":g=P.x,M=P.y;break;case"H":g=P.x;break;case"V":M=P.y;break}A(g,M,P.pathSegType)}};for(e._svgPathToAbsolute(n),f=n.getTotalLength(),i=[],c=0;c<n.pathSegList.numberOfItems;c+=1)i.push(n.pathSegList.getItem(c));for(a=i.concat();d<f;){if(S=n.getPathSegAtLength(d),t=i[S],t!=m){for(;a.length&&a[0]!=t;)T(a.shift());m=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":r=n.getPointAtLength(d),A(r.x,r.y,0);break}d+=s}for(c=0,l=a.length;c<l;++c)T(a[c]);return w},e._svgPathToAbsolute=function(n){for(var s,c,l,f,r,t,i=n.pathSegList,a=0,m=0,p=i.numberOfItems,S=0;S<p;++S){var w=i.getItem(S),h=w.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(h))"x"in w&&(a=w.x),"y"in w&&(m=w.y);else switch("x1"in w&&(l=a+w.x1),"x2"in w&&(r=a+w.x2),"y1"in w&&(f=m+w.y1),"y2"in w&&(t=m+w.y2),"x"in w&&(a+=w.x),"y"in w&&(m+=w.y),h){case"m":i.replaceItem(n.createSVGPathSegMovetoAbs(a,m),S);break;case"l":i.replaceItem(n.createSVGPathSegLinetoAbs(a,m),S);break;case"h":i.replaceItem(n.createSVGPathSegLinetoHorizontalAbs(a),S);break;case"v":i.replaceItem(n.createSVGPathSegLinetoVerticalAbs(m),S);break;case"c":i.replaceItem(n.createSVGPathSegCurvetoCubicAbs(a,m,l,f,r,t),S);break;case"s":i.replaceItem(n.createSVGPathSegCurvetoCubicSmoothAbs(a,m,r,t),S);break;case"q":i.replaceItem(n.createSVGPathSegCurvetoQuadraticAbs(a,m,l,f),S);break;case"t":i.replaceItem(n.createSVGPathSegCurvetoQuadraticSmoothAbs(a,m),S);break;case"a":i.replaceItem(n.createSVGPathSegArcAbs(a,m,w.r1,w.r2,w.angle,w.largeArcFlag,w.sweepFlag),S);break;case"z":case"Z":a=s,m=c;break}(h=="M"||h=="m")&&(s=a,c=m)}}})()},function(x,C,u){var e={};x.exports=e;var o=u(5);u(0),function(){e.create=o.create,e.add=o.add,e.remove=o.remove,e.clear=o.clear,e.addComposite=o.addComposite,e.addBody=o.addBody,e.addConstraint=o.addConstraint}()}])})})(ft);export{at as A,X as C,Ze as E,dt as a,st as b,pt as c,vt as d,mt as e,ht as f,gt as i,ee as l};
