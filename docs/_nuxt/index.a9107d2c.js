import{a as F,r as i,o as y,l as _,e as l,w as a,b as s,t as m,F as g,s as b,i as I,n as T,g as j,f,c as D,j as Y,m as E}from"./entry.5d33167f.js";import{_ as S}from"./layout.2f2c6b9d.js";import z from"./Clockify.fff063fd.js";import"./lodash.bf067173.js";const H={props:{modelValue:{type:[Boolean,String],default:!1},dates:{type:Array,default:()=>[]}},computed:{month:{set(r){},get(){const r=this.$dayjs(this.modelValue),e={};return e.date=r.format("YYYY-MM-DD"),e.year=r.format("YYYY"),e.month=r.format("MM"),e.day=r.format("DD"),e.monthName=r.format("MMMM"),e.daysInMonth=r.daysInMonth(),e.firstDay=r.startOf("month").day(),e.weekdays=this.$dayjs.weekdays().map(k=>k.substring(0,3)),e.days=(()=>{const k={id:null,day:null,dayName:null,dayAbbr:null,dates:[]};let p=[];for(let o=0;o<e.firstDay;o++)p.push({...k});for(let o=1;o<=e.daysInMonth;o++){const c=r.set("date",o);let u={...k};u.id=c.format(),u.date=c.format("YYYY-MM-DD"),u.day=c.format("DD"),u.dayName=this.$dayjs.weekdays()[c.day()],u.dayAbbr=u.dayName.substring(0,3),p.push(u)}return p=p.map(o=>(o.id&&(o.dates=this.dates.filter(c=>c.date.startsWith(o.date))),o)),((o,c)=>Array.from({length:Math.ceil(o.length/c)},(u,d)=>o.slice(d*c,d*c+c)))(p,7)})(),e}}},methods:{monthAdd(r){const e=this.$dayjs(this.modelValue).add(r,"month").format("YYYY-MM-DD");this.$emit("update:modelValue",e)},slotBind(r={}){return{modelValue:this.modelValue,...r}}}},L={class:"bg-primary"},O={colspan:"7",class:"pa-0"},W={class:"d-flex align-center pa-2 border"},R={class:"flex-grow-1 text-center text-uppercase",style:{"font-size":"16px","line-height":"20px","white-space":"nowrap","font-weight":"bold"}},q={class:"text-center pa-0"};function J(r,e,k,p,t,o){const c=i("v-btn"),u=i("v-table");return y(),_("div",null,[l(u,{class:"rounded"},{default:a(()=>[s("thead",null,[s("tr",L,[s("td",O,[s("div",W,[l(c,{flat:"",size:30,icon:"mdi-chevron-left",onClick:e[0]||(e[0]=d=>o.monthAdd(-1))}),s("div",R,m(o.month.year)+" "+m(o.month.monthName),1),l(c,{flat:"",size:30,icon:"mdi-chevron-right",onClick:e[1]||(e[1]=d=>o.monthAdd(1))})])])]),s("tr",null,[(y(!0),_(g,null,b(o.month.weekdays,d=>(y(),_("th",{key:d,class:"text-center text-uppercase px-0 py-3"},m(d),1))),128))])]),s("tbody",null,[(y(!0),_(g,null,b(o.month.days,d=>(y(),_("tr",null,[(y(!0),_(g,null,b(d,v=>(y(),_("td",q,[I(r.$slots,"day",T(j(o.slotBind(v))),()=>[l(c,{block:"",flat:"",size:35},{default:a(()=>[f(m(v.day),1)]),_:2},1024)])]))),256))]))),256))])]),_:3})])}const K=F(H,[["render",J]]),Q={mounted(){this.clockify.init()},beforeUnmount(){this.clockify.destroy()},computed:{result(){return this.clockify.result()}},data(){return{clockify:new z}}},X={class:"text-h3 py-4"},Z={class:"fw-bold"},$={style:{width:"90vw","max-width":"600px!important",margin:"0 auto"}},ee=s("a",{href:"https://app.clockify.me/user/settings",target:"_blank"},"here",-1),te=s("br",null,null,-1),oe=s("br",null,null,-1),le={class:"d-flex align-center mb-6",style:{gap:"15px"}},ne={class:"d-flex flex-column",style:{gap:"15px"}},re=s("div",null,"Em andamento:",-1),se={class:"text-uppercase"};function ae(r,e,k,p,t,o){const c=K,u=i("v-card-text"),d=i("v-divider"),v=i("v-icon"),x=i("v-btn"),h=i("v-text-field"),V=i("v-autocomplete"),C=i("v-spacer"),P=i("v-card-actions"),N=i("v-card"),A=i("v-dialog"),w=i("v-progress-linear"),M=i("v-alert"),U=S;return y(),D(U,{title:"Clockify","container-width":"100%"},{drawer:a(()=>[t.clockify.ready?(y(),_(g,{key:0},[l(u,null,{default:a(()=>[s("div",Z,m(t.clockify.user.name),1)]),_:1}),l(d)],64)):Y("",!0),l(u,null,{default:a(()=>[l(A,null,{activator:a(({props:n})=>[l(x,E({block:""},n,{ref:"settings"}),{default:a(()=>[l(v,{class:"me-2"},{default:a(()=>[f("mdi-cog")]),_:1}),f(" Settings ")]),_:2},1040)]),default:a(()=>[s("div",$,[l(N,null,{default:a(()=>[l(u,null,{default:a(()=>[f(" Get your access token "),ee,f(". "),te,oe,l(h,{label:"Token",modelValue:t.clockify.storage.token,"onUpdate:modelValue":e[1]||(e[1]=n=>t.clockify.storage.token=n)},null,8,["modelValue"]),s("div",le,[l(h,{label:"Converter de",modelValue:t.clockify.storage.amountPerHour,"onUpdate:modelValue":e[2]||(e[2]=n=>t.clockify.storage.amountPerHour=n),modelModifiers:{number:!0},type:"number","hide-details":!0},null,8,["modelValue"]),l(V,{modelValue:t.clockify.storage.currencyFrom,"onUpdate:modelValue":e[3]||(e[3]=n=>t.clockify.storage.currencyFrom=n),items:t.clockify.currency.items.map(n=>n.code),"hide-details":!0,style:{width:"150px"}},null,8,["modelValue","items"]),l(V,{label:"Para",modelValue:t.clockify.storage.currencyTo,"onUpdate:modelValue":e[4]||(e[4]=n=>t.clockify.storage.currencyTo=n),items:t.clockify.currency.items.map(n=>n.code),"hide-details":!0,style:{width:"150px"}},null,8,["modelValue","items"])]),l(h,{label:`Meta (${t.clockify.storage.currencyFrom})`,modelValue:t.clockify.storage.amountGoal,"onUpdate:modelValue":e[5]||(e[5]=n=>t.clockify.storage.amountGoal=n),modelModifiers:{number:!0},type:"number","hide-details":!0,suffix:`${r.$filter.numberFormat(t.clockify.currencyConverted(t.clockify.storage.amountGoal))} ${t.clockify.storage.currencyTo}`},null,8,["label","modelValue","suffix"])]),_:1}),l(d),l(P,null,{default:a(()=>[l(C),l(x,{onClick:e[6]||(e[6]=n=>{r.$refs.settings.$el.click(),t.clockify.init()})},{default:a(()=>[f("Ok")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),l(d),l(u,null,{default:a(()=>[l(c,{modelValue:t.clockify.date,"onUpdate:modelValue":[e[7]||(e[7]=n=>t.clockify.date=n),e[8]||(e[8]=n=>t.clockify.timeEntryLoad())]},null,8,["modelValue"])]),_:1}),l(d),l(u,null,{default:a(()=>[l(h,{label:`\xC0 receber (${t.clockify.storage.currencyFrom})`,"model-value":r.$filter.numberFormat(o.result.amount),suffix:`${r.$filter.numberFormat(t.clockify.currencyConverted(o.result.amount))} ${t.clockify.storage.currencyTo}`,readonly:""},null,8,["label","model-value","suffix"]),s("div",ne,[l(w,{"model-value":o.result.amountGoalPercent,color:o.result.amountGoalPercent>o.result.amountDaysPercent?"success":"error",height:"22"},{default:a(()=>[f("Meta: "+m(r.$filter.numberFormat(t.clockify.storage.amountGoal))+" "+m(t.clockify.storage.currencyFrom),1)]),_:1},8,["model-value","color"]),l(w,{"model-value":o.result.amountDaysPercent,color:"success",height:"22"},{default:a(()=>[f("Fim do m\xEAs")]),_:1},8,["model-value"]),l(M,null,{default:a(()=>[f("Voc\xEA precisa trabalhar "),s("strong",null,m(o.result.goalWorkDaysAvg)+" horas por dia",1),f(" para bater a meta.")]),_:1}),t.clockify.workingItem?(y(),D(M,{key:0,icon:"mdi-clock-outline",color:"success"},{default:a(()=>[re,s("div",se,[s("strong",null,m(t.clockify.workingItem.description),1)]),s("div",null,[s("small",null,m(r.$filter.dateTimeago(t.clockify.workingItem.workedMinutes*60)),1)])]),_:1})):Y("",!0)])]),_:1})]),default:a(()=>[l(c,{modelValue:t.clockify.date,"onUpdate:modelValue":e[0]||(e[0]=n=>t.clockify.date=n),dates:t.clockify.timeEntry.items.map(n=>({date:n.timeInterval.start,...n}))},{day:a(n=>[s("div",X,m(n.day),1),s("div",null,m((n.dates.reduce((B,G)=>B+G.workedMinutes,0)/60).toFixed(2)),1)]),_:1},8,["modelValue","dates"])]),_:1})}const me=F(Q,[["render",ae]]);export{me as default};
