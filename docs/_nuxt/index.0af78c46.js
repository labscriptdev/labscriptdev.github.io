import{a as F,r as i,o as f,l as _,e as l,w as s,b as c,t as y,F as g,s as b,i as T,n as j,g as I,f as m,c as D,j as Y,m as S}from"./entry.65fd9d93.js";import{_ as E}from"./layout.0997a75b.js";import z from"./Clockify.86d6df0f.js";import"./lodash.269bf887.js";const H={props:{modelValue:{type:[Boolean,String],default:!1},dates:{type:Array,default:()=>[]}},computed:{month:{set(r){},get(){const r=this.$dayjs(this.modelValue),e={};return e.date=r.format("YYYY-MM-DD"),e.year=r.format("YYYY"),e.month=r.format("MM"),e.day=r.format("DD"),e.monthName=r.format("MMMM"),e.daysInMonth=r.daysInMonth(),e.firstDay=r.startOf("month").day(),e.weekdays=this.$dayjs.weekdays().map(k=>k.substring(0,3)),e.days=(()=>{const k={id:null,day:null,dayName:null,dayAbbr:null,dates:[]};let p=[];for(let o=0;o<e.firstDay;o++)p.push({...k});for(let o=1;o<=e.daysInMonth;o++){const a=r.set("date",o);let u={...k};u.id=a.format(),u.date=a.format("YYYY-MM-DD"),u.day=a.format("DD"),u.dayName=this.$dayjs.weekdays()[a.day()],u.dayAbbr=u.dayName.substring(0,3),p.push(u)}return p=p.map(o=>(o.id&&(o.dates=this.dates.filter(a=>a.date.startsWith(o.date))),o)),((o,a)=>Array.from({length:Math.ceil(o.length/a)},(u,d)=>o.slice(d*a,d*a+a)))(p,7)})(),e}}},methods:{monthAdd(r){const e=this.$dayjs(this.modelValue).add(r,"month").format("YYYY-MM-DD");this.$emit("update:modelValue",e)},slotBind(r={}){return{modelValue:this.modelValue,...r}}}},L={class:"bg-primary"},O={colspan:"7",class:"pa-0"},W={class:"d-flex align-center pa-2 border"},R={class:"flex-grow-1 text-center text-uppercase",style:{"font-size":"16px","line-height":"20px","white-space":"nowrap","font-weight":"bold"}},q={class:"text-center pa-0"};function J(r,e,k,p,t,o){const a=i("v-btn"),u=i("v-table");return f(),_("div",null,[l(u,{class:"rounded"},{default:s(()=>[c("thead",null,[c("tr",L,[c("td",O,[c("div",W,[l(a,{flat:"",size:30,icon:"mdi-chevron-left",onClick:e[0]||(e[0]=d=>o.monthAdd(-1))}),c("div",R,y(o.month.year)+" "+y(o.month.monthName),1),l(a,{flat:"",size:30,icon:"mdi-chevron-right",onClick:e[1]||(e[1]=d=>o.monthAdd(1))})])])]),c("tr",null,[(f(!0),_(g,null,b(o.month.weekdays,d=>(f(),_("th",{key:d,class:"text-center text-uppercase px-0 py-3"},y(d),1))),128))])]),c("tbody",null,[(f(!0),_(g,null,b(o.month.days,d=>(f(),_("tr",null,[(f(!0),_(g,null,b(d,v=>(f(),_("td",q,[T(r.$slots,"day",j(I(o.slotBind(v))),()=>[l(a,{block:"",flat:"",size:35},{default:s(()=>[m(y(v.day),1)]),_:2},1024)])]))),256))]))),256))])]),_:3})])}const K=F(H,[["render",J]]),Q={mounted(){this.clockify.init()},beforeUnmount(){this.clockify.destroy()},computed:{result(){return this.clockify.result()}},data(){return{clockify:new z}}},X={class:"text-h3 py-4"},Z={class:"fw-bold"},$={style:{width:"90vw","max-width":"600px!important",margin:"0 auto"}},ee=c("a",{href:"https://app.clockify.me/user/settings",target:"_blank"},"here",-1),te=c("br",null,null,-1),oe=c("br",null,null,-1),le={class:"d-flex align-center mb-6",style:{gap:"15px"}},ne={class:"d-flex flex-column mb-5",style:{gap:"15px"}};function re(r,e,k,p,t,o){const a=K,u=i("v-card-text"),d=i("v-divider"),v=i("v-icon"),x=i("v-btn"),h=i("v-text-field"),V=i("v-autocomplete"),C=i("v-spacer"),P=i("v-card-actions"),A=i("v-card"),N=i("v-dialog"),M=i("v-progress-linear"),w=i("v-alert"),U=E;return f(),D(U,{title:"Clockify","container-width":"100%"},{drawer:s(()=>[t.clockify.ready?(f(),_(g,{key:0},[l(u,null,{default:s(()=>[c("div",Z,y(t.clockify.user.name),1)]),_:1}),l(d)],64)):Y("",!0),l(u,null,{default:s(()=>[l(N,null,{activator:s(({props:n})=>[l(x,S({block:""},n,{ref:"settings"}),{default:s(()=>[l(v,{class:"me-2"},{default:s(()=>[m("mdi-cog")]),_:1}),m(" Settings ")]),_:2},1040)]),default:s(()=>[c("div",$,[l(A,null,{default:s(()=>[l(u,null,{default:s(()=>[m(" Get your access token "),ee,m(". "),te,oe,l(h,{label:"Token",modelValue:t.clockify.storage.token,"onUpdate:modelValue":e[1]||(e[1]=n=>t.clockify.storage.token=n)},null,8,["modelValue"]),c("div",le,[l(h,{label:"Converter de",modelValue:t.clockify.storage.amountPerHour,"onUpdate:modelValue":e[2]||(e[2]=n=>t.clockify.storage.amountPerHour=n),modelModifiers:{number:!0},type:"number","hide-details":!0},null,8,["modelValue"]),l(V,{modelValue:t.clockify.storage.currencyFrom,"onUpdate:modelValue":e[3]||(e[3]=n=>t.clockify.storage.currencyFrom=n),items:t.clockify.currency.items.map(n=>n.code),"hide-details":!0,style:{width:"150px"}},null,8,["modelValue","items"]),l(V,{label:"Para",modelValue:t.clockify.storage.currencyTo,"onUpdate:modelValue":e[4]||(e[4]=n=>t.clockify.storage.currencyTo=n),items:t.clockify.currency.items.map(n=>n.code),"hide-details":!0,style:{width:"150px"}},null,8,["modelValue","items"])]),l(h,{label:`Meta (${t.clockify.storage.currencyFrom})`,modelValue:t.clockify.storage.amountGoal,"onUpdate:modelValue":e[5]||(e[5]=n=>t.clockify.storage.amountGoal=n),modelModifiers:{number:!0},type:"number","hide-details":!0,suffix:`${r.$filter.numberFormat(t.clockify.currencyConverted(t.clockify.storage.amountGoal))} ${t.clockify.storage.currencyTo}`},null,8,["label","modelValue","suffix"])]),_:1}),l(d),l(P,null,{default:s(()=>[l(C),l(x,{onClick:e[6]||(e[6]=n=>{r.$refs.settings.$el.click(),t.clockify.init()})},{default:s(()=>[m("Ok")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),l(d),l(u,null,{default:s(()=>[l(a,{modelValue:t.clockify.date,"onUpdate:modelValue":[e[7]||(e[7]=n=>t.clockify.date=n),e[8]||(e[8]=n=>t.clockify.timeEntryLoad())]},null,8,["modelValue"])]),_:1}),l(d),l(u,null,{default:s(()=>[l(h,{label:`\xC0 receber (${t.clockify.storage.currencyFrom})`,"model-value":r.$filter.numberFormat(o.result.amount),suffix:`${r.$filter.numberFormat(t.clockify.currencyConverted(o.result.amount))} ${t.clockify.storage.currencyTo}`,readonly:""},null,8,["label","model-value","suffix"]),c("div",ne,[l(M,{"model-value":o.result.amountGoalPercent,color:o.result.amountGoalPercent>o.result.amountDaysPercent?"success":"error",height:"22"},{default:s(()=>[m("Meta: "+y(r.$filter.numberFormat(t.clockify.storage.amountGoal))+" "+y(t.clockify.storage.currencyFrom),1)]),_:1},8,["model-value","color"]),l(M,{"model-value":o.result.amountDaysPercent,color:"success",height:"22"},{default:s(()=>[m("Fim do m\xEAs")]),_:1},8,["model-value"]),l(w,null,{default:s(()=>[m("Voc\xEA precisa trabalhar "),c("strong",null,y(o.result.goalWorkDaysAvg)+" horas por dia",1),m(" para bater a meta.")]),_:1})]),t.clockify.clockActive?(f(),D(w,{key:0,icon:"mdi-clock-outline",color:"success"},{default:s(()=>[m(" Tarefa em andamento ")]),_:1})):Y("",!0)]),_:1})]),default:s(()=>[l(a,{modelValue:t.clockify.date,"onUpdate:modelValue":e[0]||(e[0]=n=>t.clockify.date=n),dates:t.clockify.timeEntry.items.map(n=>({date:n.timeInterval.start,...n}))},{day:s(n=>[c("div",X,y(n.day),1),c("div",null,y((n.dates.reduce((B,G)=>B+G.workedMinutes,0)/60).toFixed(2)),1)]),_:1},8,["modelValue","dates"])]),_:1})}const de=F(Q,[["render",re]]);export{de as default};
