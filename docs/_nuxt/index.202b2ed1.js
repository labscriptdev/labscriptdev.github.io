import ee from"./layout.68d02413.js";import{V as Z,h as q,s as W,a3 as te,G as O,j as ne,Q as oe,y as re,W as se,o as j,c as U,w as M,f as z,a as h,e as g,t as H,a1 as ae,a4 as G,b as A,F as I,$ as R,g as L,a0 as ie,r as x}from"./entry.4ce56b92.js";/* empty css                                               */var Q={exports:{}};(function(y,l){(function(Y,f){y.exports=f()})(Z,function(){var Y,f,t=1e3,c=6e4,F=36e5,b=864e5,E=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m=31536e6,v=2592e6,k=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,w={years:m,months:v,days:b,hours:F,minutes:c,seconds:t,milliseconds:1,weeks:6048e5},p=function(u){return u instanceof V},_=function(u,s,n){return new V(u,n,s.$l)},d=function(u){return f.p(u)+"s"},S=function(u){return u<0},$=function(u){return S(u)?Math.ceil(u):Math.floor(u)},D=function(u){return Math.abs(u)},P=function(u,s){return u?S(u)?{negative:!0,format:""+D(u)+s}:{negative:!1,format:""+u+s}:{negative:!1,format:""}},V=function(){function u(n,r,e){var a=this;if(this.$d={},this.$l=e,n===void 0&&(this.$ms=0,this.parseFromMilliseconds()),r)return _(n*w[d(r)],this);if(typeof n=="number")return this.$ms=n,this.parseFromMilliseconds(),this;if(typeof n=="object")return Object.keys(n).forEach(function(T){a.$d[d(T)]=n[T]}),this.calMilliseconds(),this;if(typeof n=="string"){var i=n.match(k);if(i){var o=i.slice(2).map(function(T){return T!=null?Number(T):0});return this.$d.years=o[0],this.$d.months=o[1],this.$d.weeks=o[2],this.$d.days=o[3],this.$d.hours=o[4],this.$d.minutes=o[5],this.$d.seconds=o[6],this.calMilliseconds(),this}}return this}var s=u.prototype;return s.calMilliseconds=function(){var n=this;this.$ms=Object.keys(this.$d).reduce(function(r,e){return r+(n.$d[e]||0)*w[e]},0)},s.parseFromMilliseconds=function(){var n=this.$ms;this.$d.years=$(n/m),n%=m,this.$d.months=$(n/v),n%=v,this.$d.days=$(n/b),n%=b,this.$d.hours=$(n/F),n%=F,this.$d.minutes=$(n/c),n%=c,this.$d.seconds=$(n/t),n%=t,this.$d.milliseconds=n},s.toISOString=function(){var n=P(this.$d.years,"Y"),r=P(this.$d.months,"M"),e=+this.$d.days||0;this.$d.weeks&&(e+=7*this.$d.weeks);var a=P(e,"D"),i=P(this.$d.hours,"H"),o=P(this.$d.minutes,"M"),T=this.$d.seconds||0;this.$d.milliseconds&&(T+=this.$d.milliseconds/1e3);var C=P(T,"S"),N=n.negative||r.negative||a.negative||i.negative||o.negative||C.negative,X=i.format||o.format||C.format?"T":"",B=(N?"-":"")+"P"+n.format+r.format+a.format+X+i.format+o.format+C.format;return B==="P"||B==="-P"?"P0D":B},s.toJSON=function(){return this.toISOString()},s.format=function(n){var r=n||"YYYY-MM-DDTHH:mm:ss",e={Y:this.$d.years,YY:f.s(this.$d.years,2,"0"),YYYY:f.s(this.$d.years,4,"0"),M:this.$d.months,MM:f.s(this.$d.months,2,"0"),D:this.$d.days,DD:f.s(this.$d.days,2,"0"),H:this.$d.hours,HH:f.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:f.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:f.s(this.$d.seconds,2,"0"),SSS:f.s(this.$d.milliseconds,3,"0")};return r.replace(E,function(a,i){return i||String(e[a])})},s.as=function(n){return this.$ms/w[d(n)]},s.get=function(n){var r=this.$ms,e=d(n);return e==="milliseconds"?r%=1e3:r=e==="weeks"?$(r/w[e]):this.$d[e],r===0?0:r},s.add=function(n,r,e){var a;return a=r?n*w[d(r)]:p(n)?n.$ms:_(n,this).$ms,_(this.$ms+a*(e?-1:1),this)},s.subtract=function(n,r){return this.add(n,r,!0)},s.locale=function(n){var r=this.clone();return r.$l=n,r},s.clone=function(){return _(this.$ms,this)},s.humanize=function(n){return Y().add(this.$ms,"ms").locale(this.$l).fromNow(!n)},s.milliseconds=function(){return this.get("milliseconds")},s.asMilliseconds=function(){return this.as("milliseconds")},s.seconds=function(){return this.get("seconds")},s.asSeconds=function(){return this.as("seconds")},s.minutes=function(){return this.get("minutes")},s.asMinutes=function(){return this.as("minutes")},s.hours=function(){return this.get("hours")},s.asHours=function(){return this.as("hours")},s.days=function(){return this.get("days")},s.asDays=function(){return this.as("days")},s.weeks=function(){return this.get("weeks")},s.asWeeks=function(){return this.as("weeks")},s.months=function(){return this.get("months")},s.asMonths=function(){return this.as("months")},s.years=function(){return this.get("years")},s.asYears=function(){return this.as("years")},u}();return function(u,s,n){Y=n,f=n().$utils(),n.duration=function(a,i){var o=n.locale();return _(a,{$l:o},i)},n.isDuration=p;var r=s.prototype.add,e=s.prototype.subtract;s.prototype.add=function(a,i){return p(a)&&(a=a.asMilliseconds()),r.bind(this)(a,i)},s.prototype.subtract=function(a,i){return p(a)&&(a=a.asMilliseconds()),e.bind(this)(a,i)}}})})(Q);const le=Q.exports;var J={exports:{}};(function(y,l){(function(Y,f){y.exports=f()})(Z,function(){return function(Y,f,t){Y=Y||{};var c=f.prototype,F={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function b(m,v,k,w){return c.fromToBase(m,v,k,w)}t.en.relativeTime=F,c.fromToBase=function(m,v,k,w,p){for(var _,d,S,$=k.$locale().relativeTime||F,D=Y.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],P=D.length,V=0;V<P;V+=1){var u=D[V];u.d&&(_=w?t(m).diff(k,u.d,!0):k.diff(m,u.d,!0));var s=(Y.rounding||Math.round)(Math.abs(_));if(S=_>0,s<=u.r||!u.r){s<=1&&V>0&&(u=D[V-1]);var n=$[u.l];p&&(s=p(""+s)),d=typeof n=="string"?n.replace("%d",s):n(s,v,u.l,S);break}}if(v)return d;var r=S?$.future:$.past;return typeof r=="function"?r(d):r.replace("%s",d)},c.to=function(m,v){return b(m,v,this,!0)},c.from=function(m,v){return b(m,v,this)};var E=function(m){return m.$u?t.utc():t()};c.toNow=function(m){return this.to(E(this),m)},c.fromNow=function(m){return this.from(E(this),m)}}})})(J);const ue=J.exports;function ce(y={}){const{$dayjs:l,$axios:Y}=q();l.extend(le),l.extend(ue),y={storageKey:"clockify",dateStart:l().startOf("month").format("YYYY-MM-DDTHH:mm:ss.000z"),dateFinal:l().endOf("month").format("YYYY-MM-DDTHH:mm:ss.000z"),currencyFrom:"USD",currencyTo:"BRL",timeEntryParse:e=>e,...y};const f=W(y.dateStart||null),t=W(y.dateFinal||null),c=W(te(y.storageKey,{token:"",amountPerHour:13,amountCurrency:"BRL",amountGoal:1e3,currencyFrom:y.currencyFrom,currencyTo:y.currencyTo,securityMode:!1})),F=async e=>Y.request({...e,url:["https://api.clockify.me/api/v1",e.url.replace(/^\/|\/$/g,"")].join("/"),headers:{"X-Api-Key":c.value.token}}),b=W({loading:!1,currencyFrom:y.currencyFrom,currencyTo:y.currencyTo,rates:{}}),E=async()=>{b.value.loading=!0;const{data:e}=await Y.get(`https://api.exchangerate.host/latest?base=${c.value.currencyFrom}`);b.value.rates=e.rates,b.value.loading=!1},m=(e,a=2,i=",",o=".")=>{let[T,C]=parseFloat(e).toFixed(a).split(".");return T=T.split("").reverse().join("").replace(/(\d{3})/g,`$1${o}`).split("").reverse().join(""),[T,C].join(i).replace(new RegExp(`^\\${o}`,"g"),"")},v=(e,a=!0)=>{const i=c.value.currencyTo;return e=e*b.value.rates[i]||1,a?m(e):e},k=W({loading:!1,data:!1}),w=async()=>{if(!c.value.token)return;k.value.loading=!0;const{data:e}=await F({url:"/user"});k.value.data=e,k.value.loading=!1},p=W({loading:!1,selected:!1,data:[]}),_=async()=>{if(!c.value.token)return;p.value.loading=!0;const{data:e}=await F({url:"/workspaces"});p.value.data=e,e.length==1&&(p.value.selected=e[0]),p.value.loading=!1},d=W({loading:!1,workedMinutes:0,working:!1,data:[]}),S=async()=>{d.value.loading&&clearTimeout(d.value.loading),d.value.loading=setTimeout(async()=>{if(!k.value||!p.value.selected)return;d.value.loading=!0;const{data:e}=await F({url:`/workspaces/${p.value.selected.id}/user/${k.value.data.id}/time-entries`,params:{start:f.value,end:t.value}});d.value.data=e.map($),d.value.loading=!1},1e3)},$=e=>(e.workedMinutes=(()=>e.timeInterval.end?Math.abs(l(e.timeInterval.start).diff(e.timeInterval.end,"minute")):Math.abs(l(e.timeInterval.start).diff(l(),"minute")))(),e=y.timeEntryParse(e),e);let D;const P=async()=>{D&&clearTimeout(D),D=setInterval(async()=>{d.value.data=d.value.data.map($);let e=d.value.data.filter(a=>!a.timeInterval.end);d.value.working=e[0]||!1,d.value.workedMinutes=d.value.data.reduce((a,i)=>a+i.workedMinutes,0),l().format("s")==59&&await S()},1e3)},V=()=>{let e=Math.abs(l(f.value).diff(t.value,"days"));return Array.from(Array(e+1).keys()).map(a=>l(f.value).add(a,"days"))},u=e=>[{value:Math.floor(e/60/24/30),signal:"m\xEAs"},{value:Math.floor(e/60/24),signal:"dia(s)"},{value:Math.floor(e/60),signal:"hs"},{value:e%60,signal:"m"}].filter(i=>i.value>0).map(i=>i.value+i.signal).join(", "),s=O(()=>k.value.data&&p.value.data.length>=1&&d.value.data.length>=1),n=O(()=>V().map(e=>{const a=d.value.data.filter(o=>l(o.timeInterval.start).format("YYYY-MM-DD")==e.format("YYYY-MM-DD"));let i={};return i.today=l().format("YYYY-MM-DD")==e.format("YYYY-MM-DD"),i.workingDay=![0,6].includes(e.day()),{date:e,year:e.format("YYYY"),month:e.format("MM"),day:e.format("DD"),is:i,entries:a}})),r=O(()=>{const e=V().filter(o=>![0,6].includes(o.day())),a=o=>(o={description:"",value:0,formatted:T=>T.value,...o},typeof o.value=="function"&&(o.value=o.value(o)),typeof o.description=="function"&&(o.description=o.description(o)),typeof o.formatted=="function"&&(o.formatted=o.formatted(o)),o);let i={};return i.rangeWorkExpected=a({description:`Tempo total esperado para trabalhar (${e.length} dias \xFAteis)`,value:60*8*e.length,formatted:o=>`${(o.value/60).toFixed(0)} horas`}),i.rangeWorkWorked=a({description:"Tempo total trabalhado",value:d.value.workedMinutes,formatted:o=>`${(o.value/60).toFixed(0)} horas`}),i.rangeWorkWorkedPercent=a({description:o=>`${o.value.toFixed(0)}% do m\xEAs trabalhado`,value:i.rangeWorkWorked.value/i.rangeWorkExpected.value*100,formatted:o=>o.value.toFixed(0)+"%"}),i.amountTotal=a({description:"Total para receber",value:d.value.workedMinutes/60*c.value.amountPerHour,formatted:o=>`${m(o.value)} (${c.value.currencyFrom}) / ${v(o.value)} (${c.value.currencyTo})`}),i.rangeWorkDayAverage=a({description:o=>"Quantidade de horas di\xE1rias para alcan\xE7ar a meta",value:o=>{const T=Math.abs(l().diff(t.value,"days")),N=(c.value.amountGoal-i.amountTotal.value)/c.value.amountPerHour;return Math.ceil(N/T)},formatted:o=>`${o.value} horas / dia`}),i.amountGoal=a({description:"Meta mensal",value:c.value.amountGoal,formatted:o=>`${m(o.value)} (${c.value.currencyFrom}) / ${v(o.value)} (${c.value.currencyTo})`}),i.amountGoalPercent=a({description:o=>`${o.value.toFixed(0)}% do valor da meta alcan\xE7ada`,value:i.amountTotal.value/c.value.amountGoal*100,formatted:o=>o.value.toFixed(0)+"%"}),i});return ne([f,t,c],async([e,a])=>{await E(),await S()}),oe(async()=>{await E(),await w(),await _(),await S(),await P()}),re(()=>{D&&clearInterval(D)}),{ready:s,dateStart:f,dateFinal:t,storage:c,currency:b,currencyLoad:E,currencyFormat:m,currencyConvert:v,user:k,userLoad:w,workspace:p,workspaceLoad:_,timeEntry:d,timeEntryLoad:S,timeHumanize:u,dates:n,result:r}}function K(y={}){const{$dayjs:l}=q();y={date:l().format(),rangeStart:null,rangeFinal:null,...y};const Y=W(y.date),f=W(y.rangeStart||null),t=W(y.rangeFinal||null),c=()=>l(Y.value),F=()=>f.value?l(f.value):null,b=()=>t.value?l(t.value):null,E=v=>({current:v.format("YYYY-MM-DD")==c().format("YYYY-MM-DD"),month:v.format("YYYY-MM")==c().format("YYYY-MM"),year:v.format("YYYY")==c().format("YYYY")}),m=O(()=>{const v=F()||c().startOf("month"),k=b()||c().endOf("month");let w=[];for(let p=0;p<=Math.abs(v.diff(k,"day"));p++){const _=v.add(p,"days");w.push({date:_,is:E(_)})}return w});return{date:Y,rangeStart:f,rangeFinal:t,dates:m}}const de={meta:{active:!0,icon:"mdi-alarm-check",name:"Clockify",description:"Gerenciamento e c\xE1lculo de horas trabalhadas utilizando o app Clockify"},mounted(){},data(){return{clockify:ce({timeEntryParse(y){return y.workedMinutesPercent=Math.min(100,y.workedMinutes/(60*14)*100),y}}),calendarDate:K(),calendarRange:K({rangeStart:"2023-01-01T00:00:00.000Z",rangeFinal:"2023-01-05T00:00:00.000Z"}),calendarDisplay:"range",dateStart:!1,dateFinal:!1}}},fe={style:{"white-space":"nowrap","font-size":"10px"}},me={class:"flex-grow-1 d-flex flex-column justify-end",style:{gap:"3px"}},ye=["title"],he=g("br",null,null,-1),ve={class:"d-flex flex-column",style:{gap:"5px"}},ge=g("br",null,null,-1),pe=g("div",null,"Working:",-1),ke=g("br",null,null,-1),_e=g("br",null,null,-1),Me={class:"d-flex align-center"},we={class:"fw-bold ms-3"},xe={style:{width:"90vw","max-width":"600px!important",margin:"0 auto"}},Ye=g("a",{href:"https://app.clockify.me/user/settings",target:"_blank"}," Acesse sua tela de configura\xE7\xF5es Clockify para gerar o token. ",-1),be=g("br",null,null,-1),$e=g("br",null,null,-1),Te={class:"d-flex align-center mb-6",style:{gap:"15px"}};function De(y,l,Y,f,t,c){const F=x("v-slide-group-item"),b=x("v-slide-group"),E=x("v-progress-linear"),m=x("v-alert"),v=x("v-table"),k=x("v-card"),w=x("v-img"),p=x("v-avatar"),_=x("v-btn"),d=x("v-text-field"),S=x("v-autocomplete"),$=x("v-switch"),D=x("v-card-text"),P=x("v-divider"),V=x("v-spacer"),u=x("v-card-actions"),s=x("v-dialog"),n=ee;return j(),U(n,{title:"Clockify","container-width":"100%"},{drawer:M(()=>[t.clockify.user.data?(j(),z(I,{key:0},[h(D,null,{default:M(()=>[g("div",Me,[h(p,null,{default:M(()=>[h(w,{src:t.clockify.user.data.profilePicture},null,8,["src"])]),_:1}),g("div",we,H(t.clockify.user.data.name),1),h(s,null,{activator:M(({props:r})=>[h(_,ae({icon:"mdi-cog",class:"ms-auto",flat:"",size:"20"},r,{ref:"settingsBtn"}),null,16)]),default:M(()=>[g("div",xe,[h(k,null,{default:M(()=>[h(D,null,{default:M(()=>[Ye,be,$e,h(d,{label:"Token",modelValue:t.clockify.storage.token,"onUpdate:modelValue":l[0]||(l[0]=r=>t.clockify.storage.token=r),class:G({"security-mode":t.clockify.storage.securityMode})},null,8,["modelValue","class"]),g("div",Te,[h(d,{label:"Converter de",modelValue:t.clockify.storage.amountPerHour,"onUpdate:modelValue":l[1]||(l[1]=r=>t.clockify.storage.amountPerHour=r),modelModifiers:{number:!0},type:"number","hide-details":!0},null,8,["modelValue"]),h(S,{modelValue:t.clockify.storage.currencyFrom,"onUpdate:modelValue":l[2]||(l[2]=r=>t.clockify.storage.currencyFrom=r),items:Object.keys(t.clockify.currency.rates),"hide-details":!0,style:{width:"150px"}},null,8,["modelValue","items"]),h(S,{label:"Para",modelValue:t.clockify.storage.currencyTo,"onUpdate:modelValue":l[3]||(l[3]=r=>t.clockify.storage.currencyTo=r),items:Object.keys(t.clockify.currency.rates),"hide-details":!0,style:{width:"150px"}},null,8,["modelValue","items"])]),h(d,{label:`Meta (${t.clockify.storage.currencyFrom})`,modelValue:t.clockify.storage.amountGoal,"onUpdate:modelValue":l[4]||(l[4]=r=>t.clockify.storage.amountGoal=r),modelModifiers:{number:!0},type:"number","hide-details":!0,suffix:`${t.clockify.currencyConvert(t.clockify.storage.amountGoal)} ${t.clockify.storage.currencyTo}`,class:G({"security-mode":t.clockify.storage.securityMode})},null,8,["label","modelValue","suffix","class"]),h($,{modelValue:t.clockify.storage.securityMode,"onUpdate:modelValue":l[5]||(l[5]=r=>t.clockify.storage.securityMode=r),"hide-details":"",label:t.clockify.storage.securityMode?"Hidden":"Shown"},null,8,["modelValue","label"])]),_:1}),h(P),h(u,null,{default:M(()=>[h(V),h(_,{onClick:l[6]||(l[6]=r=>{y.$refs.settingsBtn.$el.click()})},{default:M(()=>[A("Ok")]),_:1})]),_:1})]),_:1})])]),_:1})])]),_:1}),h(P)],64)):R("",!0),h(P),h(D,null,{default:M(()=>[h(d,{class:G({"security-mode":t.clockify.storage.securityMode}),label:`\xC0 receber (${t.clockify.storage.currencyFrom})`,"model-value":t.clockify.currencyFormat(t.clockify.result.amountTotal.value),suffix:`${t.clockify.currencyConvert(t.clockify.result.amountTotal.value)} ${t.clockify.storage.currencyTo}`,readonly:""},null,8,["class","label","model-value","suffix"])]),_:1})]),default:M(()=>[h(b,{"show-arrows":"","center-active":""},{default:M(()=>[(j(!0),z(I,null,L(t.clockify.dates,r=>(j(),U(F,{key:r.id},{default:M(()=>[g("div",{class:G(["d-flex flex-column border rounded mx-1",{"bg-green-lighten-4":r.is.today,"bg-grey-lighten-4":!r.is.today}]),style:{gap:"2px",padding:"2px","min-width":"70px","max-width":"70px",height:"300px"}},[g("div",{class:G(["text-center py-2 fw-bold rounded",{"bg-green-lighten-2":r.is.today,"bg-grey-lighten-2":!r.is.today}]),style:{"font-size":"12px"}},[g("div",null,H(r.date.format("ddd")),1),g("div",null,H(r.date.format("DD")),1),g("div",fe,"\xA0 "+H(t.clockify.timeHumanize(r.entries.reduce((e,a)=>e+a.workedMinutes,0))),1)],2),g("div",me,[(j(!0),z(I,null,L(r.entries,e=>(j(),z("div",{title:`${e.description} - ${e.workedMinutes} minutes worked`,class:G(["text-center overflow-hidden d-flex align-center justify-center rounded",{"bg-green-lighten-2":t.clockify.timeEntry.working&&t.clockify.timeEntry.working.id==e.id,"bg-grey-lighten-2":!(t.clockify.timeEntry.working&&t.clockify.timeEntry.working.id==e.id)}]),style:ie([{height:`${e.workedMinutesPercent}%`},{"font-size":"10px","white-space":"nowrap"}])},[g("div",null,H(t.clockify.timeHumanize(e.workedMinutes)),1)],14,ye))),256))])],2)]),_:2},1024))),128))]),_:1}),he,g("div",ve,[h(E,{"model-value":t.clockify.result.rangeWorkWorkedPercent.value,color:"light-green-darken-4",height:"16",striped:!!t.clockify.timeEntry.working,style:{"font-size":"10px"},rounded:""},{default:M(()=>[A(H(t.clockify.result.rangeWorkWorkedPercent.description),1)]),_:1},8,["model-value","striped"]),h(E,{"model-value":t.clockify.result.amountGoalPercent.value,color:"light-green-darken-4",height:"16",striped:!!t.clockify.timeEntry.working,style:{"font-size":"10px"},rounded:""},{default:M(()=>[A(H(t.clockify.result.amountGoalPercent.description),1)]),_:1},8,["model-value","striped"])]),ge,t.clockify.timeEntry.working?(j(),U(m,{key:0,color:"success"},{default:M(()=>[pe,g("div",null,H(t.clockify.timeEntry.working.description),1),g("div",null,H(t.clockify.timeEntry.working.workedMinutes)+" minutos",1)]),_:1})):R("",!0),ke,h(k,null,{default:M(()=>[h(v,null,{default:M(()=>[g("tbody",null,[(j(!0),z(I,null,L(Object.entries(t.clockify.result),([r,e])=>(j(),z("tr",null,[g("td",null,H(e.description),1),g("td",null,H(e.formatted),1)]))),256))])]),_:1})]),_:1}),_e]),_:1})}const Ee=se(de,[["render",De]]);export{Ee as default};
