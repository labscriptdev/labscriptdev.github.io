import{a as Y,r as i,o as m,l as f,i as o,w as a,b as c,t as p,F as g,s as b,f as T,n as j,g as I,k as _,c as w,h as M,m as S}from"./entry.ff785177.js";import{_ as E}from"./layout.ebd7a225.js";import z from"./Clockify.ab2c31f3.js";import"./lodash.0504f5d8.js";const H={props:{modelValue:{type:[Boolean,String],default:!1},dates:{type:Array,default:()=>[]}},computed:{month:{set(r){},get(){const r=this.$dayjs(this.modelValue),e={};return e.date=r.format("YYYY-MM-DD"),e.year=r.format("YYYY"),e.month=r.format("MM"),e.day=r.format("DD"),e.monthName=r.format("MMMM"),e.daysInMonth=r.daysInMonth(),e.firstDay=r.startOf("month").day(),e.weekdays=this.$dayjs.weekdays().map(h=>h.substring(0,3)),e.days=(()=>{const h={id:null,day:null,dayName:null,dayAbbr:null,dates:[]};let y=[];for(let t=0;t<e.firstDay;t++)y.push({...h});for(let t=1;t<=e.daysInMonth;t++){const s=r.set("date",t);let d={...h};d.id=s.format(),d.date=s.format("YYYY-MM-DD"),d.day=s.format("DD"),d.dayName=this.$dayjs.weekdays()[s.day()],d.dayAbbr=d.dayName.substring(0,3),y.push(d)}return y=y.map(t=>(t.id&&(t.dates=this.dates.filter(s=>s.date.startsWith(t.date))),t)),((t,s)=>Array.from({length:Math.ceil(t.length/s)},(d,u)=>t.slice(u*s,u*s+s)))(y,7)})(),e}}},methods:{monthAdd(r){const e=this.$dayjs(this.modelValue).add(r,"month").format("YYYY-MM-DD");this.$emit("update:modelValue",e)},slotBind(r={}){return{modelValue:this.modelValue,...r}}}},L={class:"bg-primary"},O={colspan:"7",class:"pa-0"},G={class:"d-flex align-center pa-2 border"},R={class:"flex-grow-1 text-center text-uppercase",style:{"font-size":"16px","line-height":"20px","white-space":"nowrap","font-weight":"bold"}},W={class:"text-center pa-0"};function q(r,e,h,y,n,t){const s=i("v-btn"),d=i("v-table");return m(),f("div",null,[o(d,{class:"rounded"},{default:a(()=>[c("thead",null,[c("tr",L,[c("td",O,[c("div",G,[o(s,{flat:"",size:30,icon:"mdi-chevron-left",onClick:e[0]||(e[0]=u=>t.monthAdd(-1))}),c("div",R,p(t.month.year)+" "+p(t.month.monthName),1),o(s,{flat:"",size:30,icon:"mdi-chevron-right",onClick:e[1]||(e[1]=u=>t.monthAdd(1))})])])]),c("tr",null,[(m(!0),f(g,null,b(t.month.weekdays,u=>(m(),f("th",{key:u,class:"text-center text-uppercase px-0 py-3"},p(u),1))),128))])]),c("tbody",null,[(m(!0),f(g,null,b(t.month.days,u=>(m(),f("tr",null,[(m(!0),f(g,null,b(u,k=>(m(),f("td",W,[T(r.$slots,"day",j(I(t.slotBind(k))),()=>[o(s,{block:"",flat:"",size:35},{default:a(()=>[_(p(k.day),1)]),_:2},1024)])]))),256))]))),256))])]),_:3})])}const J=Y(H,[["render",q]]),K={mounted(){this.clockify.init()},beforeUnmount(){this.clockify.destroy()},computed:{result(){return this.clockify.result()}},data(){return{clockify:new z}}},Q={class:"text-h3 py-4"},X={class:"fw-bold"},Z={style:{width:"90vw","max-width":"600px!important",margin:"0 auto"}},$=c("a",{href:"https://app.clockify.me/user/settings",target:"_blank"},"here",-1),ee=c("br",null,null,-1),te=c("br",null,null,-1),oe={class:"d-flex align-center",style:{gap:"15px"}};function le(r,e,h,y,n,t){const s=J,d=i("v-card-text"),u=i("v-divider"),k=i("v-icon"),x=i("v-btn"),v=i("v-text-field"),V=i("v-autocomplete"),D=i("v-spacer"),C=i("v-card-actions"),N=i("v-card"),A=i("v-dialog"),B=i("v-alert"),F=E;return m(),w(F,{title:"Clockify","container-width":"100%"},{drawer:a(()=>[n.clockify.ready?(m(),f(g,{key:0},[o(d,null,{default:a(()=>[c("div",X,p(n.clockify.user.name),1)]),_:1}),o(u)],64)):M("",!0),o(d,null,{default:a(()=>[o(A,null,{activator:a(({props:l})=>[o(x,S({block:""},l,{ref:"settings"}),{default:a(()=>[o(k,{class:"me-2"},{default:a(()=>[_("mdi-cog")]),_:1}),_(" Settings ")]),_:2},1040)]),default:a(()=>[c("div",Z,[o(N,null,{default:a(()=>[o(d,null,{default:a(()=>[_(" Get your access token "),$,_(". "),ee,te,o(v,{label:"Token",modelValue:n.clockify.storage.token,"onUpdate:modelValue":e[1]||(e[1]=l=>n.clockify.storage.token=l)},null,8,["modelValue"]),c("div",oe,[o(v,{label:"Converter de",modelValue:n.clockify.storage.amountPerHour,"onUpdate:modelValue":e[2]||(e[2]=l=>n.clockify.storage.amountPerHour=l),modelModifiers:{number:!0},type:"number","hide-details":!0},null,8,["modelValue"]),o(V,{modelValue:n.clockify.storage.currencyFrom,"onUpdate:modelValue":e[3]||(e[3]=l=>n.clockify.storage.currencyFrom=l),items:n.clockify.currency.items.map(l=>l.code),"hide-details":!0,style:{width:"150px"}},null,8,["modelValue","items"]),o(V,{label:"Para",modelValue:n.clockify.storage.currencyTo,"onUpdate:modelValue":e[4]||(e[4]=l=>n.clockify.storage.currencyTo=l),items:n.clockify.currency.items.map(l=>l.code),"hide-details":!0,style:{width:"150px"}},null,8,["modelValue","items"])])]),_:1}),o(u),o(C,null,{default:a(()=>[o(D),o(x,{onClick:e[5]||(e[5]=l=>{r.$refs.settings.$el.click(),n.clockify.init()})},{default:a(()=>[_("Ok")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),o(u),o(d,null,{default:a(()=>[o(s,{modelValue:n.clockify.date,"onUpdate:modelValue":[e[6]||(e[6]=l=>n.clockify.date=l),e[7]||(e[7]=l=>n.clockify.timeEntryLoad())]},null,8,["modelValue"])]),_:1}),o(u),o(d,null,{default:a(()=>[o(v,{label:"\xC0 receber","model-value":r.$filter.numberFormat(t.result.from.amount),suffix:t.result.from.currency,readonly:""},null,8,["model-value","suffix"]),o(v,{label:"\xC0 receber","model-value":r.$filter.numberFormat(t.result.to.amount),suffix:t.result.to.currency,readonly:""},null,8,["model-value","suffix"]),n.clockify.clockActive?(m(),w(B,{key:0,icon:"mdi-clock-outline",color:"success"},{default:a(()=>[_(" Tarefa em andamento ")]),_:1})):M("",!0)]),_:1})]),default:a(()=>[o(s,{modelValue:n.clockify.date,"onUpdate:modelValue":e[0]||(e[0]=l=>n.clockify.date=l),dates:n.clockify.timeEntry.items.map(l=>({date:l.timeInterval.start,...l}))},{day:a(l=>[c("div",Q,p(l.day),1),c("div",null,p((l.dates.reduce((U,P)=>U+P.workedMinutes,0)/60).toFixed(2)),1)]),_:1},8,["modelValue","dates"])]),_:1})}const de=Y(K,[["render",le]]);export{de as default};
