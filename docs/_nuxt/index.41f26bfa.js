import{a as w,r as i,o as m,k as f,h as o,w as a,b as c,t as _,F as g,q as b,e as F,n as P,g as U,j as h,c as j,f as I,m as S}from"./entry.ae2d44a1.js";import{_ as T}from"./layout.bbb2374b.js";import E from"./Clockify.f3dcea5a.js";import"./lodash.8d0848f9.js";const z={props:{modelValue:{type:[Boolean,String],default:!1},dates:{type:Array,default:()=>[]}},computed:{month:{set(r){},get(){const r=this.$dayjs(this.modelValue),e={};return e.date=r.format("YYYY-MM-DD"),e.year=r.format("YYYY"),e.month=r.format("MM"),e.day=r.format("DD"),e.monthName=r.format("MMMM"),e.daysInMonth=r.daysInMonth(),e.firstDay=r.startOf("month").day(),e.weekdays=this.$dayjs.weekdays().map(p=>p.substring(0,3)),e.days=(()=>{const p={id:null,day:null,dayName:null,dayAbbr:null,dates:[]};let y=[];for(let t=0;t<e.firstDay;t++)y.push({...p});for(let t=1;t<=e.daysInMonth;t++){const s=r.set("date",t);let d={...p};d.id=s.format(),d.date=s.format("YYYY-MM-DD"),d.day=s.format("DD"),d.dayName=this.$dayjs.weekdays()[s.day()],d.dayAbbr=d.dayName.substring(0,3),y.push(d)}return y=y.map(t=>(t.id&&(t.dates=this.dates.filter(s=>s.date.startsWith(t.date))),t)),((t,s)=>Array.from({length:Math.ceil(t.length/s)},(d,u)=>t.slice(u*s,u*s+s)))(y,7)})(),e}}},methods:{monthAdd(r){const e=this.$dayjs(this.modelValue).add(r,"month").format("YYYY-MM-DD");this.$emit("update:modelValue",e)},slotBind(r={}){return{modelValue:this.modelValue,...r}}}},H={class:"bg-primary"},L={colspan:"7",class:"pa-0"},O={class:"d-flex align-center pa-2 border"},q={class:"flex-grow-1 text-center text-uppercase",style:{"font-size":"16px","line-height":"20px","white-space":"nowrap","font-weight":"bold"}},G={class:"text-center pa-0"};function R(r,e,p,y,n,t){const s=i("v-btn"),d=i("v-table");return m(),f("div",null,[o(d,{class:"rounded"},{default:a(()=>[c("thead",null,[c("tr",H,[c("td",L,[c("div",O,[o(s,{flat:"",size:30,icon:"mdi-chevron-left",onClick:e[0]||(e[0]=u=>t.monthAdd(-1))}),c("div",q,_(t.month.year)+" "+_(t.month.monthName),1),o(s,{flat:"",size:30,icon:"mdi-chevron-right",onClick:e[1]||(e[1]=u=>t.monthAdd(1))})])])]),c("tr",null,[(m(!0),f(g,null,b(t.month.weekdays,u=>(m(),f("th",{key:u,class:"text-center text-uppercase px-0 py-3"},_(u),1))),128))])]),c("tbody",null,[(m(!0),f(g,null,b(t.month.days,u=>(m(),f("tr",null,[(m(!0),f(g,null,b(u,v=>(m(),f("td",G,[F(r.$slots,"day",P(U(t.slotBind(v))),()=>[o(s,{block:"",flat:"",size:35},{default:a(()=>[h(_(v.day),1)]),_:2},1024)])]))),256))]))),256))])]),_:3})])}const W=w(z,[["render",R]]),J={mounted(){this.clockify.init()},computed:{result(){return this.clockify.result()}},data(){return{clockify:new E}}},K={class:"text-h3 py-4"},Q={class:"fw-bold"},X={style:{width:"90vw","max-width":"600px!important",margin:"0 auto"}},Z=c("a",{href:"https://app.clockify.me/user/settings",target:"_blank"},"here",-1),$=c("br",null,null,-1),ee=c("br",null,null,-1),te={class:"d-flex align-center",style:{gap:"15px"}};function oe(r,e,p,y,n,t){const s=W,d=i("v-card-text"),u=i("v-divider"),v=i("v-icon"),x=i("v-btn"),k=i("v-text-field"),V=i("v-autocomplete"),M=i("v-spacer"),Y=i("v-card-actions"),D=i("v-card"),C=i("v-dialog"),N=T;return m(),j(N,{title:"Clockify","container-width":"100%"},{drawer:a(()=>[n.clockify.ready?(m(),f(g,{key:0},[o(d,null,{default:a(()=>[c("div",Q,_(n.clockify.user.name),1)]),_:1}),o(u)],64)):I("",!0),o(d,null,{default:a(()=>[o(C,null,{activator:a(({props:l})=>[o(x,S({block:""},l,{ref:"settings"}),{default:a(()=>[o(v,{class:"me-2"},{default:a(()=>[h("mdi-cog")]),_:1}),h(" Settings ")]),_:2},1040)]),default:a(()=>[c("div",X,[o(D,null,{default:a(()=>[o(d,null,{default:a(()=>[h(" Get your access token "),Z,h(". "),$,ee,o(k,{label:"Token",modelValue:n.clockify.storage.token,"onUpdate:modelValue":e[1]||(e[1]=l=>n.clockify.storage.token=l)},null,8,["modelValue"]),c("div",te,[o(k,{label:"Converter de",modelValue:n.clockify.storage.amountPerHour,"onUpdate:modelValue":e[2]||(e[2]=l=>n.clockify.storage.amountPerHour=l),modelModifiers:{number:!0},type:"number","hide-details":!0},null,8,["modelValue"]),o(V,{modelValue:n.clockify.storage.currencyFrom,"onUpdate:modelValue":e[3]||(e[3]=l=>n.clockify.storage.currencyFrom=l),items:n.clockify.currency.items.map(l=>l.code),"hide-details":!0,style:{width:"150px"}},null,8,["modelValue","items"]),o(V,{label:"Para",modelValue:n.clockify.storage.currencyTo,"onUpdate:modelValue":e[4]||(e[4]=l=>n.clockify.storage.currencyTo=l),items:n.clockify.currency.items.map(l=>l.code),"hide-details":!0,style:{width:"150px"}},null,8,["modelValue","items"])])]),_:1}),o(u),o(Y,null,{default:a(()=>[o(M),o(x,{onClick:e[5]||(e[5]=l=>{r.$refs.settings.$el.click(),n.clockify.init()})},{default:a(()=>[h("Ok")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),o(u),o(d,null,{default:a(()=>[o(s,{modelValue:n.clockify.date,"onUpdate:modelValue":[e[6]||(e[6]=l=>n.clockify.date=l),e[7]||(e[7]=l=>n.clockify.timeEntryLoad())]},null,8,["modelValue"])]),_:1}),o(u),o(d,null,{default:a(()=>[o(k,{label:"\xC0 receber","model-value":r.$filter.numberFormat(t.result.from.amount),suffix:t.result.from.currency,readonly:""},null,8,["model-value","suffix"]),o(k,{label:"\xC0 receber","model-value":r.$filter.numberFormat(t.result.to.amount),suffix:t.result.to.currency,readonly:""},null,8,["model-value","suffix"])]),_:1})]),default:a(()=>[o(s,{modelValue:n.clockify.date,"onUpdate:modelValue":e[0]||(e[0]=l=>n.clockify.date=l),dates:n.clockify.timeEntry.items.map(l=>({date:l.timeInterval.start,...l}))},{day:a(l=>[c("div",K,_(l.day),1),c("div",null,_((l.dates.reduce((A,B)=>A+B.workedMinutes,0)/60).toFixed(2)),1)]),_:1},8,["modelValue","dates"])]),_:1})}const ae=w(J,[["render",oe]]);export{ae as default};
