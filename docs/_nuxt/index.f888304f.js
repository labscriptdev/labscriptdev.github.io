import{a as w,r as u,o as m,k as f,h as l,w as a,b as d,t as _,F as v,q as b,e as F,n as P,g as U,j as h,c as j,f as I,m as S}from"./entry.a41c27f5.js";import{_ as T}from"./layout.46c2e8ee.js";import E from"./Clockify.99cdebf8.js";import"./lodash.a7a7ec87.js";const z={props:{modelValue:{type:[Boolean,String],default:!1},dates:{type:Array,default:()=>[]}},computed:{month:{set(s){},get(){const s=this.$dayjs(this.modelValue),e={};return e.date=s.format("YYYY-MM-DD"),e.year=s.format("YYYY"),e.month=s.format("MM"),e.day=s.format("DD"),e.monthName=s.format("MMMM"),e.daysInMonth=s.daysInMonth(),e.firstDay=s.startOf("month").day(),e.weekdays=this.$dayjs.weekdays().map(p=>p.substring(0,3)),e.days=(()=>{const p={id:null,day:null,dayName:null,dayAbbr:null,dates:[]};let y=[];for(let t=0;t<e.firstDay;t++)y.push({...p});for(let t=1;t<=e.daysInMonth;t++){const r=s.set("date",t);let c={...p};c.id=r.format(),c.date=r.format("YYYY-MM-DD"),c.day=r.format("DD"),c.dayName=this.$dayjs.weekdays()[r.day()],c.dayAbbr=c.dayName.substring(0,3),y.push(c)}return y=y.map(t=>(t.id&&(t.dates=this.dates.filter(r=>r.date.startsWith(t.date))),t)),((t,r)=>Array.from({length:Math.ceil(t.length/r)},(c,i)=>t.slice(i*r,i*r+r)))(y,7)})(),e}}},methods:{monthAdd(s){const e=this.$dayjs(this.modelValue).add(s,"month").format("YYYY-MM-DD");this.$emit("update:modelValue",e)},slotBind(s={}){return{modelValue:this.modelValue,...s}}}},H={class:"bg-primary"},L={colspan:"7",class:"pa-0"},O={class:"d-flex align-center pa-2 border"},q={class:"flex-grow-1 text-center text-uppercase",style:{"font-size":"16px","line-height":"20px","white-space":"nowrap","font-weight":"bold"}},G={class:"text-center pa-0"};function R(s,e,p,y,n,t){const r=u("v-btn"),c=u("v-table");return m(),f("div",null,[l(c,{class:"rounded"},{default:a(()=>[d("thead",null,[d("tr",H,[d("td",L,[d("div",O,[l(r,{flat:"",size:30,icon:"mdi-chevron-left",onClick:e[0]||(e[0]=i=>t.monthAdd(-1))}),d("div",q,_(t.month.year)+" "+_(t.month.monthName),1),l(r,{flat:"",size:30,icon:"mdi-chevron-right",onClick:e[1]||(e[1]=i=>t.monthAdd(1))})])])]),d("tr",null,[(m(!0),f(v,null,b(t.month.weekdays,i=>(m(),f("th",{key:i,class:"text-center text-uppercase px-0 py-3"},_(i),1))),128))])]),d("tbody",null,[(m(!0),f(v,null,b(t.month.days,i=>(m(),f("tr",null,[(m(!0),f(v,null,b(i,k=>(m(),f("td",G,[F(s.$slots,"day",P(U(t.slotBind(k))),()=>[l(r,{block:"",flat:"",size:35},{default:a(()=>[h(_(k.day),1)]),_:2},1024)])]))),256))]))),256))])]),_:3})])}const W=w(z,[["render",R]]),J={mounted(){this.clockify.init()},computed:{result(){return this.clockify.result()}},data(){return{clockify:new E}}},K={class:"text-h3 py-4"},Q={class:"fw-bold"},X={style:{width:"90vw","max-width":"600px!important",margin:"0 auto"}},Z=d("a",{href:"https://app.clockify.me/user/settings",target:"_blank"},"here",-1),$=d("br",null,null,-1),ee=d("br",null,null,-1),te={class:"d-flex align-center",style:{gap:"15px"}},oe=d("br",null,null,-1);function le(s,e,p,y,n,t){const r=W,c=u("v-card-text"),i=u("v-divider"),k=u("v-icon"),x=u("v-btn"),g=u("v-text-field"),V=u("v-autocomplete"),M=u("v-spacer"),Y=u("v-card-actions"),D=u("v-card"),C=u("v-dialog"),N=T;return m(),j(N,{title:"Clockify","container-width":"100%"},{drawer:a(()=>[n.clockify.ready?(m(),f(v,{key:0},[l(c,null,{default:a(()=>[d("div",Q,_(n.clockify.user.name),1)]),_:1}),l(i)],64)):I("",!0),l(c,null,{default:a(()=>[l(C,null,{activator:a(({props:o})=>[l(x,S({block:""},o,{ref:"settings"}),{default:a(()=>[l(k,{class:"me-2"},{default:a(()=>[h("mdi-cog")]),_:1}),h(" Settings ")]),_:2},1040)]),default:a(()=>[d("div",X,[l(D,null,{default:a(()=>[l(c,null,{default:a(()=>[h(" Get your access token "),Z,h(". "),$,ee,l(g,{label:"Token",modelValue:n.clockify.storage.token,"onUpdate:modelValue":e[1]||(e[1]=o=>n.clockify.storage.token=o)},null,8,["modelValue"]),d("div",te,[l(g,{label:"Converter de",modelValue:n.clockify.storage.amountPerHour,"onUpdate:modelValue":e[2]||(e[2]=o=>n.clockify.storage.amountPerHour=o),modelModifiers:{number:!0},type:"number","hide-details":!0},null,8,["modelValue"]),l(V,{modelValue:n.clockify.storage.currencyFrom,"onUpdate:modelValue":e[3]||(e[3]=o=>n.clockify.storage.currencyFrom=o),items:n.clockify.currency.items.map(o=>o.code),"hide-details":!0,style:{width:"150px"}},null,8,["modelValue","items"]),l(V,{label:"Para",modelValue:n.clockify.storage.currencyTo,"onUpdate:modelValue":e[4]||(e[4]=o=>n.clockify.storage.currencyTo=o),items:n.clockify.currency.items.map(o=>o.code),"hide-details":!0,style:{width:"150px"}},null,8,["modelValue","items"])])]),_:1}),l(i),l(Y,null,{default:a(()=>[l(M),l(x,{onClick:e[5]||(e[5]=o=>{s.$refs.settings.$el.click(),n.clockify.init()})},{default:a(()=>[h("Ok")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),l(i),l(c,null,{default:a(()=>[l(r,{modelValue:n.clockify.date,"onUpdate:modelValue":[e[6]||(e[6]=o=>n.clockify.date=o),e[7]||(e[7]=o=>n.clockify.timeEntryLoad())]},null,8,["modelValue"]),oe,l(g,{label:"\xC0 receber","model-value":s.$filter.numberFormat(t.result.amount),suffix:n.clockify.storage.currencyFrom,readonly:""},null,8,["model-value","suffix"])]),_:1})]),default:a(()=>[l(r,{modelValue:n.clockify.date,"onUpdate:modelValue":e[0]||(e[0]=o=>n.clockify.date=o),dates:n.clockify.timeEntry.items.map(o=>({date:o.timeInterval.start,...o}))},{day:a(o=>[d("div",K,_(o.day),1),d("div",null,_((o.dates.reduce((A,B)=>A+B.workedMinutes,0)/60).toFixed(2)),1)]),_:1},8,["modelValue","dates"])]),_:1})}const de=w(J,[["render",le]]);export{de as default};
