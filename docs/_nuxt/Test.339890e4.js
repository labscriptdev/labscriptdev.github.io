import{f as J,c as Q,g as W}from"./three.module.77711dbc.js";var Z={exports:{}};(function(_){(function(b,p,y){if(!b)return;for(var h={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},M={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},T={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},q={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},x,d=1;d<20;++d)h[111+d]="f"+d;for(d=0;d<=9;++d)h[d+96]=d.toString();function S(e,r,n){if(e.addEventListener){e.addEventListener(r,n,!1);return}e.attachEvent("on"+r,n)}function L(e){if(e.type=="keypress"){var r=String.fromCharCode(e.which);return e.shiftKey||(r=r.toLowerCase()),r}return h[e.which]?h[e.which]:M[e.which]?M[e.which]:String.fromCharCode(e.which).toLowerCase()}function R(e,r){return e.sort().join(",")===r.sort().join(",")}function F(e){var r=[];return e.shiftKey&&r.push("shift"),e.altKey&&r.push("alt"),e.ctrlKey&&r.push("ctrl"),e.metaKey&&r.push("meta"),r}function H(e){if(e.preventDefault){e.preventDefault();return}e.returnValue=!1}function N(e){if(e.stopPropagation){e.stopPropagation();return}e.cancelBubble=!0}function K(e){return e=="shift"||e=="ctrl"||e=="alt"||e=="meta"}function U(){if(!x){x={};for(var e in h)e>95&&e<112||h.hasOwnProperty(e)&&(x[h[e]]=e)}return x}function V(e,r,n){return n||(n=U()[e]?"keydown":"keypress"),n=="keypress"&&r.length&&(n="keydown"),n}function G(e){return e==="+"?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function I(e,r){var n,u,g,w=[];for(n=G(e),g=0;g<n.length;++g)u=n[g],q[u]&&(u=q[u]),r&&r!="keypress"&&T[u]&&(u=T[u],w.push("shift")),K(u)&&w.push(u);return r=V(u,w,r),{key:u,modifiers:w,action:r}}function B(e,r){return e===null||e===p?!1:e===r?!0:B(e.parentNode,r)}function l(e){var r=this;if(e=e||p,!(r instanceof l))return new l(e);r.target=e,r._callbacks={},r._directMap={};var n={},u,g=!1,w=!1,C=!1;function P(t){t=t||{};var s=!1,f;for(f in n){if(t[f]){s=!0;continue}n[f]=0}s||(C=!1)}function D(t,s,f,a,o,v){var i,c,m=[],k=f.type;if(!r._callbacks[t])return[];for(k=="keyup"&&K(t)&&(s=[t]),i=0;i<r._callbacks[t].length;++i)if(c=r._callbacks[t][i],!(!a&&c.seq&&n[c.seq]!=c.level)&&k==c.action&&(k=="keypress"&&!f.metaKey&&!f.ctrlKey||R(s,c.modifiers))){var j=!a&&c.combo==o,z=a&&c.seq==a&&c.level==v;(j||z)&&r._callbacks[t].splice(i,1),m.push(c)}return m}function A(t,s,f,a){r.stopCallback(s,s.target||s.srcElement,f,a)||t(s,f)===!1&&(H(s),N(s))}r._handleKey=function(t,s,f){var a=D(t,s,f),o,v={},i=0,c=!1;for(o=0;o<a.length;++o)a[o].seq&&(i=Math.max(i,a[o].level));for(o=0;o<a.length;++o){if(a[o].seq){if(a[o].level!=i)continue;c=!0,v[a[o].seq]=1,A(a[o].callback,f,a[o].combo,a[o].seq);continue}c||A(a[o].callback,f,a[o].combo)}var m=f.type=="keypress"&&w;f.type==C&&!K(t)&&!m&&P(v),w=c&&f.type=="keydown"};function E(t){typeof t.which!="number"&&(t.which=t.keyCode);var s=L(t);if(!!s){if(t.type=="keyup"&&g===s){g=!1;return}r.handleKey(s,F(t),t)}}function X(){clearTimeout(u),u=setTimeout(P,1e3)}function Y(t,s,f,a){n[t]=0;function o(k){return function(){C=k,++n[t],X()}}function v(k){A(f,k,t),a!=="keyup"&&(g=L(k)),setTimeout(P,10)}for(var i=0;i<s.length;++i){var c=i+1===s.length,m=c?v:o(a||I(s[i+1]).action);O(s[i],m,a,t,i)}}function O(t,s,f,a,o){r._directMap[t+":"+f]=s,t=t.replace(/\s+/g," ");var v=t.split(" "),i;if(v.length>1){Y(t,v,s,f);return}i=I(t,f),r._callbacks[i.key]=r._callbacks[i.key]||[],D(i.key,i.modifiers,{type:i.action},a,t,o),r._callbacks[i.key][a?"unshift":"push"]({callback:s,modifiers:i.modifiers,action:i.action,seq:a,level:o,combo:t})}r._bindMultiple=function(t,s,f){for(var a=0;a<t.length;++a)O(t[a],s,f)},S(e,"keypress",E),S(e,"keydown",E),S(e,"keyup",E)}l.prototype.bind=function(e,r,n){var u=this;return e=e instanceof Array?e:[e],u._bindMultiple.call(u,e,r,n),u},l.prototype.unbind=function(e,r){var n=this;return n.bind.call(n,e,function(){},r)},l.prototype.trigger=function(e,r){var n=this;return n._directMap[e+":"+r]&&n._directMap[e+":"+r]({},e),n},l.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},l.prototype.stopCallback=function(e,r){var n=this;if((" "+r.className+" ").indexOf(" mousetrap ")>-1||B(r,n.target))return!1;if("composedPath"in e&&typeof e.composedPath=="function"){var u=e.composedPath()[0];u!==e.target&&(r=u)}return r.tagName=="INPUT"||r.tagName=="SELECT"||r.tagName=="TEXTAREA"||r.isContentEditable},l.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},l.addKeycodes=function(e){for(var r in e)e.hasOwnProperty(r)&&(h[r]=e[r]);x=null},l.init=function(){var e=l(p);for(var r in e)r.charAt(0)!=="_"&&(l[r]=function(n){return function(){return e[n].apply(e,arguments)}}(r))},l.init(),b.Mousetrap=l,_.exports&&(_.exports=l),typeof y=="function"&&y.amd&&y(function(){return l})})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(Z);const ee={options:{fps:60,gridHelper:!0,orbitControls:!0},name:"Hello",preload(){return{track:{type:"gltf",url:"/assets/models/test-track/scene.gltf"},woodbox:{type:"texture",url:"/assets/threejs/textures/wood-box.png"}}},onCreate(_){let b=3;Array(10).fill(null).map((p,y)=>y*b).forEach(p=>{Array(10).fill(null).map((y,h)=>h*b).forEach(y=>{const h=new J({map:this.woodbox}),M=new Q(new W(1,1,1),h);M.position.set(p,1,y),_.scene.add(M),_.physics.add.existing(M,{mass:1})})}),this.track.scale.set(5,5,5),this.track.position.set(-25,-420,0),this.track.traverse(p=>{!p.isMesh||(p.castShadow=p.receiveShadow=!0,p.material.metalness=0,p.material.roughness=1)}),_.scene.add(this.track),_.physics.add.existing(this.track,{mass:0,shape:"concaveMesh"})},onUpdate(_){}};export{ee as default};
