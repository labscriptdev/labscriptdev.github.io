import{l as c,o as p,e as V,n as x,r as w,c as h,w as m,b,a as y,t as I,i as C,F as T}from"./entry.43339234.js";import{GUI as S}from"https://cdn.skypack.dev/dat.gui@0.7.9";const k={__name:"youtube-player",props:{video:{type:[Boolean,String],default:!1},modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(f,{emit:v}){const l=a=>{const t=/^.*(youtu.be\/|v\/|embed\/|watch\?|youtube.com\/user\/[^#]*#([^\/]*?\/)*)\??v?=?([^#\&\?]*).*/.exec(a);return t?t[3]:null},u=(a={})=>{a={condition:()=>{},init:()=>{},false:()=>{},true:()=>{},...a},a.init();let t=setInterval(()=>{if(a.condition()){clearInterval(t),a.true();return}a.false()},10)},n=a=>t=>{const _=o=>{e.value.videoThumbnail=`https://img.youtube.com/vi/${e.value.videoId}/0.jpg`,e.value.muted=o.target.playerInfo.muted,e.value.volume=o.target.playerInfo.volume,e.value.playerState=o.target.playerInfo.playerState,e.value.playing=o.target.playerInfo.playerState==1,e.value.currentTime=o.target.playerInfo.currentTime,e.value.currentTimePercent=o.target.playerInfo.currentTime/o.target.playerInfo.duration*100,e.value.duration=o.target.playerInfo.duration,e.value.videoUrl=o.target.playerInfo.videoUrl,e.value.videoData={...o.target.playerInfo.videoData},e.value.playerState==0&&(e.value.currentTime=e.value.duration,e.value.currentTimePercent=100),s("update:modelValue",e.value)};_(t),d&&clearInterval(d),e.value.playing&&(d=setInterval(()=>{_(t)},10))},i=()=>{new window.YT.Player(r.value,{height:"390",width:"640",videoId:e.value.videoId,playerVars:{playsinline:1,origin:`${location.host}`},events:{onReady:n(),onStateChange:n(),onPlaybackQualityChange:n(),onPlaybackRateChange:n(),onError:n(),onApiChange:n()}})},g=f,s=v,e=c({videoId:l(g.video)});let d;const r=c(null);return u({condition(){return!!window.YT&&typeof window.YT.Player=="function"},init(){document.head.appendChild(Object.assign(document.createElement("script"),{src:"https://www.youtube.com/iframe_api"}))},true:()=>{i()}}),(a,t)=>(p(),V("div",{ref_key:"videoRef",ref:r,style:{width:"100%",height:"400px"}},null,512))}};const P={meta:{icon:"mdi-youtube",name:"Iframe test"}},R=Object.assign(P,{__name:"index",setup(f){const v=c(null),l=c({data:[],add(i){this.data.push({bind:{videoId:i}})}});l.value.add("http://www.youtube.com/embed/0zM3nApSvMg?rel=0"),l.value.add("https://www.youtube.com/watch?v=UrBZsUBibtk&ab_channel=Posy");const u=c({opacity:.5,color:"#ff0000"}),n=i=>{};return x(()=>{window.gui&&window.gui.destroy(),window.gui=new S,window.gui.addFolder("Hello"),window.gui.add(u.value,"opacity",0,1,.1).name("opacity").onChange(n),window.gui.addColor(u.value,"color").name("color").onChange(n)}),(i,g)=>{const s=w("v-col"),e=k,d=w("v-row");return p(),h(d,null,{default:m(()=>[b(s,{cols:"6",class:"border"},{default:m(()=>[y("div",{ref_key:"playerRef",ref:v,style:{border:"solid 1px red",height:"300px"}},null,512),y("pre",null,"config: "+I(u.value),1),y("pre",null,"video: "+I(l.value),1)]),_:1}),b(s,{cols:"6",class:"border"},{default:m(()=>[(p(!0),V(T,null,C(l.value.data,(r,a)=>(p(),h(e,{video:r.bind.videoId,modelValue:r.bind,"onUpdate:modelValue":t=>r.bind=t},null,8,["video","modelValue","onUpdate:modelValue"]))),256))]),_:1})]),_:1})}}});export{R as default};
