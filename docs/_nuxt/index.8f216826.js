import{aM as i,o as p,e as I,ay as V,r as _,c as w,w as y,b as h,a as m,t as b,f as x,F as C}from"./entry.b4ea16a4.js";import{GUI as T}from"https://cdn.skypack.dev/dat.gui@0.7.9";const S={__name:"youtube-player",props:{video:{type:[Boolean,String],default:!1},modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(f,{emit:v}){const l=f,r=a=>{const n=/^.*(youtu.be\/|v\/|embed\/|watch\?|youtube.com\/user\/[^#]*#([^\/]*?\/)*)\??v?=?([^#\&\?]*).*/.exec(a);return n?n[3]:null},d=(a={})=>{a={condition:()=>{},init:()=>{},false:()=>{},true:()=>{},...a},a.init();let n=setInterval(()=>{if(a.condition()){clearInterval(n),a.true();return}a.false()},10)},t=a=>n=>{const s=o=>{e.value.videoThumbnail=`https://img.youtube.com/vi/${e.value.videoId}/0.jpg`,e.value.muted=o.target.playerInfo.muted,e.value.volume=o.target.playerInfo.volume,e.value.playerState=o.target.playerInfo.playerState,e.value.playing=o.target.playerInfo.playerState==1,e.value.currentTime=o.target.playerInfo.currentTime,e.value.currentTimePercent=o.target.playerInfo.currentTime/o.target.playerInfo.duration*100,e.value.duration=o.target.playerInfo.duration,e.value.videoUrl=o.target.playerInfo.videoUrl,e.value.videoData={...o.target.playerInfo.videoData},e.value.playerState==0&&(e.value.currentTime=e.value.duration,e.value.currentTimePercent=100),v("update:modelValue",e.value)};s(n),u&&clearInterval(u),e.value.playing&&(u=setInterval(()=>{s(n)},10))},g=()=>{new window.YT.Player(c.value,{height:"390",width:"640",videoId:e.value.videoId,playerVars:{playsinline:1,origin:`${location.host}`},events:{onReady:t(),onStateChange:t(),onPlaybackQualityChange:t(),onPlaybackRateChange:t(),onError:t(),onApiChange:t()}})},e=i({videoId:r(l.video)});let u;const c=i(null);return d({condition(){return!!window.YT&&typeof window.YT.Player=="function"},init(){document.head.appendChild(Object.assign(document.createElement("script"),{src:"https://www.youtube.com/iframe_api"}))},true:()=>{g()}}),(a,n)=>(p(),I("div",{ref_key:"videoRef",ref:c,style:{width:"100%",height:"400px"}},null,512))}};const k={meta:{icon:"mdi-youtube",name:"Iframe test"}},U=Object.assign(k,{__name:"index",setup(f){const v=i(null),l=i({data:[],add(t){this.data.push({bind:{videoId:t}})}});l.value.add("http://www.youtube.com/embed/0zM3nApSvMg?rel=0"),l.value.add("https://www.youtube.com/watch?v=UrBZsUBibtk&ab_channel=Posy");const r=i({opacity:.5,color:"#ff0000"}),d=t=>{};return V(()=>{window.gui&&window.gui.destroy(),window.gui=new T,window.gui.addFolder("Hello"),window.gui.add(r.value,"opacity",0,1,.1).name("opacity").onChange(d),window.gui.addColor(r.value,"color").name("color").onChange(d)}),(t,g)=>{const e=_("v-col"),u=S,c=_("v-row");return p(),w(c,null,{default:y(()=>[h(e,{cols:"6",class:"border"},{default:y(()=>[m("div",{ref_key:"playerRef",ref:v,style:{border:"solid 1px red",height:"300px"}},null,512),m("pre",null,"config: "+b(r.value),1),m("pre",null,"video: "+b(l.value),1)]),_:1}),h(e,{cols:"6",class:"border"},{default:y(()=>[(p(!0),I(C,null,x(l.value.data,(a,n)=>(p(),w(u,{video:a.bind.videoId,modelValue:a.bind,"onUpdate:modelValue":s=>a.bind=s},null,8,["video","modelValue","onUpdate:modelValue"]))),256))]),_:1})]),_:1})}}});export{U as default};
