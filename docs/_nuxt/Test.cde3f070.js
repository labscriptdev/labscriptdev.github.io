import{M as J,d as Q,g as W}from"./three.module.2ad6d296.js";import"./matter.9bf15a82.js";import Z from"./Car4.785a7771.js";import"./entry.65fd9d93.js";var $={exports:{}};(function(h){(function(p,m,_){if(!p)return;for(var d={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},C={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},M={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},q={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},b,v=1;v<20;++v)d[111+v]="f"+v;for(v=0;v<=9;++v)d[v+96]=v.toString();function S(e,t,a){if(e.addEventListener){e.addEventListener(t,a,!1);return}e.attachEvent("on"+t,a)}function D(e){if(e.type=="keypress"){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return d[e.which]?d[e.which]:C[e.which]?C[e.which]:String.fromCharCode(e.which).toLowerCase()}function O(e,t){return e.sort().join(",")===t.sort().join(",")}function R(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function j(e){if(e.preventDefault){e.preventDefault();return}e.returnValue=!1}function H(e){if(e.stopPropagation){e.stopPropagation();return}e.cancelBubble=!0}function K(e){return e=="shift"||e=="ctrl"||e=="alt"||e=="meta"}function N(){if(!b){b={};for(var e in d)e>95&&e<112||d.hasOwnProperty(e)&&(b[d[e]]=e)}return b}function U(e,t,a){return a||(a=N()[e]?"keydown":"keypress"),a=="keypress"&&t.length&&(a="keydown"),a}function V(e){return e==="+"?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function L(e,t){var a,u,g,w=[];for(a=V(e),g=0;g<a.length;++g)u=a[g],q[u]&&(u=q[u]),t&&t!="keypress"&&M[u]&&(u=M[u],w.push("shift")),K(u)&&w.push(u);return t=U(u,w,t),{key:u,modifiers:w,action:t}}function B(e,t){return e===null||e===m?!1:e===t?!0:B(e.parentNode,t)}function c(e){var t=this;if(e=e||m,!(t instanceof c))return new c(e);t.target=e,t._callbacks={},t._directMap={};var a={},u,g=!1,w=!1,P=!1;function A(r){r=r||{};var n=!1,o;for(o in a){if(r[o]){n=!0;continue}a[o]=0}n||(P=!1)}function I(r,n,o,s,f,y){var i,l,x=[],k=o.type;if(!t._callbacks[r])return[];for(k=="keyup"&&K(r)&&(n=[r]),i=0;i<t._callbacks[r].length;++i)if(l=t._callbacks[r][i],!(!s&&l.seq&&a[l.seq]!=l.level)&&k==l.action&&(k=="keypress"&&!o.metaKey&&!o.ctrlKey||O(n,l.modifiers))){var X=!s&&l.combo==f,Y=s&&l.seq==s&&l.level==y;(X||Y)&&t._callbacks[r].splice(i,1),x.push(l)}return x}function E(r,n,o,s){t.stopCallback(n,n.target||n.srcElement,o,s)||r(n,o)===!1&&(j(n),H(n))}t._handleKey=function(r,n,o){var s=I(r,n,o),f,y={},i=0,l=!1;for(f=0;f<s.length;++f)s[f].seq&&(i=Math.max(i,s[f].level));for(f=0;f<s.length;++f){if(s[f].seq){if(s[f].level!=i)continue;l=!0,y[s[f].seq]=1,E(s[f].callback,o,s[f].combo,s[f].seq);continue}l||E(s[f].callback,o,s[f].combo)}var x=o.type=="keypress"&&w;o.type==P&&!K(r)&&!x&&A(y),w=l&&o.type=="keydown"};function T(r){typeof r.which!="number"&&(r.which=r.keyCode);var n=D(r);if(!!n){if(r.type=="keyup"&&g===n){g=!1;return}t.handleKey(n,R(r),r)}}function z(){clearTimeout(u),u=setTimeout(A,1e3)}function G(r,n,o,s){a[r]=0;function f(k){return function(){P=k,++a[r],z()}}function y(k){E(o,k,r),s!=="keyup"&&(g=D(k)),setTimeout(A,10)}for(var i=0;i<n.length;++i){var l=i+1===n.length,x=l?y:f(s||L(n[i+1]).action);F(n[i],x,s,r,i)}}function F(r,n,o,s,f){t._directMap[r+":"+o]=n,r=r.replace(/\s+/g," ");var y=r.split(" "),i;if(y.length>1){G(r,y,n,o);return}i=L(r,o),t._callbacks[i.key]=t._callbacks[i.key]||[],I(i.key,i.modifiers,{type:i.action},s,r,f),t._callbacks[i.key][s?"unshift":"push"]({callback:n,modifiers:i.modifiers,action:i.action,seq:s,level:f,combo:r})}t._bindMultiple=function(r,n,o){for(var s=0;s<r.length;++s)F(r[s],n,o)},S(e,"keypress",T),S(e,"keydown",T),S(e,"keyup",T)}c.prototype.bind=function(e,t,a){var u=this;return e=e instanceof Array?e:[e],u._bindMultiple.call(u,e,t,a),u},c.prototype.unbind=function(e,t){var a=this;return a.bind.call(a,e,function(){},t)},c.prototype.trigger=function(e,t){var a=this;return a._directMap[e+":"+t]&&a._directMap[e+":"+t]({},e),a},c.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},c.prototype.stopCallback=function(e,t){var a=this;if((" "+t.className+" ").indexOf(" mousetrap ")>-1||B(t,a.target))return!1;if("composedPath"in e&&typeof e.composedPath=="function"){var u=e.composedPath()[0];u!==e.target&&(t=u)}return t.tagName=="INPUT"||t.tagName=="SELECT"||t.tagName=="TEXTAREA"||t.isContentEditable},c.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},c.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(d[t]=e[t]);b=null},c.init=function(){var e=c(m);for(var t in e)t.charAt(0)!=="_"&&(c[t]=function(a){return function(){return e[a].apply(e,arguments)}}(t))},c.init(),p.Mousetrap=c,h.exports&&(h.exports=c),typeof _=="function"&&_.amd&&_(function(){return c})})(typeof window<"u"?window:null,typeof window<"u"?document:null)})($);const se={options:{fps:60,debug:!0,orbitControls:!0},name:"Hello",preload(){return{track:{type:"gltf",url:"/assets/threejs/models/test-track/scene.gltf"},woodbox:{type:"texture",url:"/assets/threejs/textures/wood-box.png"},tire:{type:"texture",url:"/assets/threejs/textures/tire.jpg"}}},onCreate(){this.getData(),this.createMap(),this.createCar()},onUpdate(){this.getData()},createMap(){const h=this.getData();this.track.scale.set(8,8,8),this.track.position.set(-25,-670,0),this.track.traverse(p=>{!p.isMesh||(p.castShadow=p.receiveShadow=!0,p.material.metalness=0,p.material.roughness=1)}),h.scene.add(this.track),h.physics.add.existing(this.track,{mass:0,shape:"concaveMesh"}),this.track.body.setFriction(1)},createBoxes(){const h=this.getData();let p=3;Array(10).fill(null).map((m,_)=>_*p).forEach(m=>{Array(10).fill(null).map((_,d)=>d*p).forEach(_=>{const C=new J({map:this.woodbox}),M=new Q(new W(1,1,1),C);M.position.set(m+-10,1,_+-10),h.scene.add(M),h.physics.add.existing(M,{mass:1})})})},createCar(){const h=this.getData(),{scene:p,physics:m}=h;p.add(new Z({game:h,x:5,y:0,z:5}))}};export{se as default};
