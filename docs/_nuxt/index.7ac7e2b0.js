import{a as D,r as i,o as m,l as y,e as t,w as a,b as c,t as _,F as g,s as b,i as G,n as T,g as I,f,c as w,j as Y,m as S}from"./entry.8823a7a8.js";import{_ as E}from"./layout.836d1032.js";import z from"./Clockify.d47d8840.js";import"./lodash.98b923e4.js";const H={props:{modelValue:{type:[Boolean,String],default:!1},dates:{type:Array,default:()=>[]}},computed:{month:{set(r){},get(){const r=this.$dayjs(this.modelValue),e={};return e.date=r.format("YYYY-MM-DD"),e.year=r.format("YYYY"),e.month=r.format("MM"),e.day=r.format("DD"),e.monthName=r.format("MMMM"),e.daysInMonth=r.daysInMonth(),e.firstDay=r.startOf("month").day(),e.weekdays=this.$dayjs.weekdays().map(v=>v.substring(0,3)),e.days=(()=>{const v={id:null,day:null,dayName:null,dayAbbr:null,dates:[]};let p=[];for(let o=0;o<e.firstDay;o++)p.push({...v});for(let o=1;o<=e.daysInMonth;o++){const s=r.set("date",o);let d={...v};d.id=s.format(),d.date=s.format("YYYY-MM-DD"),d.day=s.format("DD"),d.dayName=this.$dayjs.weekdays()[s.day()],d.dayAbbr=d.dayName.substring(0,3),p.push(d)}return p=p.map(o=>(o.id&&(o.dates=this.dates.filter(s=>s.date.startsWith(o.date))),o)),((o,s)=>Array.from({length:Math.ceil(o.length/s)},(d,u)=>o.slice(u*s,u*s+s)))(p,7)})(),e}}},methods:{monthAdd(r){const e=this.$dayjs(this.modelValue).add(r,"month").format("YYYY-MM-DD");this.$emit("update:modelValue",e)},slotBind(r={}){return{modelValue:this.modelValue,...r}}}},L={class:"bg-primary"},O={colspan:"7",class:"pa-0"},R={class:"d-flex align-center pa-2 border"},W={class:"flex-grow-1 text-center text-uppercase",style:{"font-size":"16px","line-height":"20px","white-space":"nowrap","font-weight":"bold"}},q={class:"text-center pa-0"};function J(r,e,v,p,n,o){const s=i("v-btn"),d=i("v-table");return m(),y("div",null,[t(d,{class:"rounded"},{default:a(()=>[c("thead",null,[c("tr",L,[c("td",O,[c("div",R,[t(s,{flat:"",size:30,icon:"mdi-chevron-left",onClick:e[0]||(e[0]=u=>o.monthAdd(-1))}),c("div",W,_(o.month.year)+" "+_(o.month.monthName),1),t(s,{flat:"",size:30,icon:"mdi-chevron-right",onClick:e[1]||(e[1]=u=>o.monthAdd(1))})])])]),c("tr",null,[(m(!0),y(g,null,b(o.month.weekdays,u=>(m(),y("th",{key:u,class:"text-center text-uppercase px-0 py-3"},_(u),1))),128))])]),c("tbody",null,[(m(!0),y(g,null,b(o.month.days,u=>(m(),y("tr",null,[(m(!0),y(g,null,b(u,k=>(m(),y("td",q,[G(r.$slots,"day",T(I(o.slotBind(k))),()=>[t(s,{block:"",flat:"",size:35},{default:a(()=>[f(_(k.day),1)]),_:2},1024)])]))),256))]))),256))])]),_:3})])}const K=D(H,[["render",J]]),Q={mounted(){this.clockify.init()},beforeUnmount(){this.clockify.destroy()},computed:{result(){return this.clockify.result()}},data(){return{clockify:new z}}},X={class:"text-h3 py-4"},Z={class:"fw-bold"},$={style:{width:"90vw","max-width":"600px!important",margin:"0 auto"}},ee=c("a",{href:"https://app.clockify.me/user/settings",target:"_blank"},"here",-1),te=c("br",null,null,-1),oe=c("br",null,null,-1),le={class:"d-flex align-center mb-6",style:{gap:"15px"}},ne=c("div",{class:"my-1"},null,-1);function re(r,e,v,p,n,o){const s=K,d=i("v-card-text"),u=i("v-divider"),k=i("v-icon"),V=i("v-btn"),h=i("v-text-field"),x=i("v-autocomplete"),C=i("v-spacer"),F=i("v-card-actions"),N=i("v-card"),A=i("v-dialog"),M=i("v-progress-linear"),P=i("v-alert"),U=E;return m(),w(U,{title:"Clockify","container-width":"100%"},{drawer:a(()=>[n.clockify.ready?(m(),y(g,{key:0},[t(d,null,{default:a(()=>[c("div",Z,_(n.clockify.user.name),1)]),_:1}),t(u)],64)):Y("",!0),t(d,null,{default:a(()=>[t(A,null,{activator:a(({props:l})=>[t(V,S({block:""},l,{ref:"settings"}),{default:a(()=>[t(k,{class:"me-2"},{default:a(()=>[f("mdi-cog")]),_:1}),f(" Settings ")]),_:2},1040)]),default:a(()=>[c("div",$,[t(N,null,{default:a(()=>[t(d,null,{default:a(()=>[f(" Get your access token "),ee,f(". "),te,oe,t(h,{label:"Token",modelValue:n.clockify.storage.token,"onUpdate:modelValue":e[1]||(e[1]=l=>n.clockify.storage.token=l)},null,8,["modelValue"]),c("div",le,[t(h,{label:"Converter de",modelValue:n.clockify.storage.amountPerHour,"onUpdate:modelValue":e[2]||(e[2]=l=>n.clockify.storage.amountPerHour=l),modelModifiers:{number:!0},type:"number","hide-details":!0},null,8,["modelValue"]),t(x,{modelValue:n.clockify.storage.currencyFrom,"onUpdate:modelValue":e[3]||(e[3]=l=>n.clockify.storage.currencyFrom=l),items:n.clockify.currency.items.map(l=>l.code),"hide-details":!0,style:{width:"150px"}},null,8,["modelValue","items"]),t(x,{label:"Para",modelValue:n.clockify.storage.currencyTo,"onUpdate:modelValue":e[4]||(e[4]=l=>n.clockify.storage.currencyTo=l),items:n.clockify.currency.items.map(l=>l.code),"hide-details":!0,style:{width:"150px"}},null,8,["modelValue","items"])]),t(h,{label:"Meta",modelValue:n.clockify.storage.amountGoal,"onUpdate:modelValue":e[5]||(e[5]=l=>n.clockify.storage.amountGoal=l),modelModifiers:{number:!0},type:"number","hide-details":!0},null,8,["modelValue"])]),_:1}),t(u),t(F,null,{default:a(()=>[t(C),t(V,{onClick:e[6]||(e[6]=l=>{r.$refs.settings.$el.click(),n.clockify.init()})},{default:a(()=>[f("Ok")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),t(u),t(d,null,{default:a(()=>[t(s,{modelValue:n.clockify.date,"onUpdate:modelValue":[e[7]||(e[7]=l=>n.clockify.date=l),e[8]||(e[8]=l=>n.clockify.timeEntryLoad())]},null,8,["modelValue"])]),_:1}),t(u),t(d,null,{default:a(()=>[t(h,{label:"\xC0 receber","model-value":r.$filter.numberFormat(o.result.from.amount),suffix:o.result.from.currency,readonly:""},null,8,["model-value","suffix"]),t(h,{label:"\xC0 receber","model-value":r.$filter.numberFormat(o.result.to.amount),suffix:o.result.to.currency,readonly:""},null,8,["model-value","suffix"]),t(M,{color:"#ccc",height:"22","model-value":o.result.amountGoalPercent},{default:a(()=>[f("Meta: "+_(r.$filter.numberFormat(n.clockify.storage.amountGoal)),1)]),_:1},8,["model-value"]),ne,t(M,{color:"#ccc",height:"22","model-value":o.result.amountDaysPercent},{default:a(()=>[f("Fim do m\xEAs")]),_:1},8,["model-value"]),n.clockify.clockActive?(m(),w(P,{key:0,icon:"mdi-clock-outline",color:"success"},{default:a(()=>[f(" Tarefa em andamento ")]),_:1})):Y("",!0)]),_:1})]),default:a(()=>[t(s,{modelValue:n.clockify.date,"onUpdate:modelValue":e[0]||(e[0]=l=>n.clockify.date=l),dates:n.clockify.timeEntry.items.map(l=>({date:l.timeInterval.start,...l}))},{day:a(l=>[c("div",X,_(l.day),1),c("div",null,_((l.dates.reduce((B,j)=>B+j.workedMinutes,0)/60).toFixed(2)),1)]),_:1},8,["modelValue","dates"])]),_:1})}const ue=D(Q,[["render",re]]);export{ue as default};
